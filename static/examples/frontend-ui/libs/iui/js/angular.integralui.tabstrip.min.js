/*
  filename: angular.integralui.tabstrip.min.js
  version : 1.1.675
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITabStripService",["$rootScope","IntegralUIPublicService",function(d,x){return{addTab:function(f,e){d.$broadcast(f+"-add-tab",e)},clearTabs:function(f){d.$broadcast(f+"-clear-tabs")},insertTabAt:function(f,e,n){d.$broadcast(f+"-insert-tab-at",e,n)},insertTabBefore:function(f,e,n){d.$broadcast(f+"-insert-tab-before",e,n)},insertTabAfter:function(f,e,n){d.$broadcast(f+"-insert-tab-after",e,n)},removeTab:function(f,e){d.$broadcast(f+"-remove-tab",e)},removeTabAt:function(f,
e){d.$broadcast(f+"-remove-tab-at",e)},loadData:function(f,e,n){d.$broadcast(f+"-load-data",e,n)},findTabById:function(f,e){d.$broadcast(f+"-find-tab-by-id",e);var n=this.getTempData();this.clearTempData();return n?n:null},findTabByText:function(f,e){d.$broadcast(f+"-find-tab-by-text",e);var n=this.getTempData();this.clearTempData();return n?n:null},clearTempData:function(){tempData=null},getList:function(f,e){d.$broadcast(f+"-get-list",e);var n=this.getTempData();this.clearTempData();return n?n:
[]},getTempData:function(){return tempData},setTempData:function(d){tempData=d},clearSelection:function(f){d.$broadcast(f+"-clear-selection")},selectedTab:function(f,e){if(e)d.$broadcast(f+"-set-selected-tab",e);else{d.$broadcast(f+"-get-selected-tab");var n=this.getTempData();this.clearTempData();return n?n:null}},refresh:function(f){d.$broadcast(f+"-refresh")},resumeLayout:function(f){d.$broadcast(f+"-resume-layout")},suspendLayout:function(f){d.$broadcast(f+"-suspend-layout")},updateLayout:function(f){d.$broadcast(f+
"-update-layout")}}}]).controller("IntegralUITabStripController",["$scope","$element","IntegralUIInternalService","IntegralUIDataService","IntegralUITabStripService",function(d,x,f,e,n){var c=this;c.defaultStyle={general:"iui-tabstrip",navigation:{general:"iui-tabstrip-navigation",button:{disabled:"iui-tabstrip-navigation-button-disabled",normal:"iui-tabstrip-navigation-button",hovered:"iui-tabstrip-navigation-button-hovered",selected:"iui-tabstrip-navigation-button-selected"}},tab:{general:"iui-tab",
header:{content:"iui-tab-header-content",disabled:"iui-tab-header-disabled",focused:"iui-tab-header-focused",normal:"iui-tab-header",hovered:"iui-tab-header-hovered",selected:"iui-tab-header-selected"},content:{disabled:"iui-tab-content-disabled",focused:"iui-tab-content-focused",normal:"iui-tab-content",hovered:"iui-tab-content-hovered",selected:"iui-tab-content-selected"}}};c.options={};c.updateAutoSize=function(a){c.options.autoSize=a?{horizontal:void 0!=a.horizontal?a.horizontal:!1,vertical:void 0!=
a.vertical?a.vertical:!1}:{horizontal:!1,vertical:!1}};this.updateOptions=function(a){a?(c.options={autoSize:f.isFieldAvailable(c.updateAutoSize(a.autoSize),{horizontal:!1,vertical:!1}),controlStyle:c.defaultStyle,enabled:f.isFieldAvailable(a.enabled,!0),hoverSelection:f.isFieldAvailable(a.hoverSelection,!1),hoverTab:null,rtl:f.isFieldAvailable(a.rtl,!1),selectedTab:f.isFieldAvailable(a.selectedTab,c.options.selectedTab?c.options.selectedTab:null),showCloseButton:f.isFieldAvailable(a.showCloseButton,
!0),showIcons:f.isFieldAvailable(a.showIcons,!0),tabIcon:f.isFieldAvailable(a.tabIcon,""),tabstripPlacement:f.isFieldAvailable(a.tabstripPlacement,"top")},c.updateDataFields(a.dataFields),c.updateControlStyle(a.controlStyle)):(c.options={autoSize:{horizontal:!1,vertical:!1},controlStyle:c.defaultStyle,enabled:!0,hoverSelection:!1,hoverTab:null,rtl:!1,selectedTab:null,showCloseButton:!0,showIcons:!0,tabIcon:"",tabstripPlacement:"top"},c.updateDataFields())};this.updateDataFields=function(a){c.options.dataFields=
a?{content:a.content?a.content:"content",enabled:a.enabled?a.enabled:"enabled",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",name:a.name?a.name:"name",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",text:a.text?a.text:"text",value:a.value?a.value:"value",visible:a.visible?a.visible:"visible"}:{content:"content",enabled:"enabled",icon:"icon",id:"id",name:"name",selected:"selected",style:"style",text:"text",value:"value",visible:"visible"};c.dataObj&&c.dataObj.updateDataFields(c.options.dataFields)};
c.updateOptions();d.$on(d.name+"-add-tab",function(a,b){c.dataObj.insertAt(b,-1,null,c.tabIsAdded)});d.$on(d.name+"-clear-tabs",function(a){c.dataObj.clear(null,c.listIsCleared)});d.$on(d.name+"-insert-tab-at",function(a,b,d){c.dataObj.insertAt(b,d,null,c.tabIsAdded)});d.$on(d.name+"-insert-tab-after",function(a,b,d){c.dataObj.insertByRef(b,d,!0,c.tabIsAdded)});d.$on(d.name+"-insert-tab-before",function(a,b,d){c.dataObj.insertByRef(b,d,!1,c.tabIsAdded)});d.$on(d.name+"-remove-tab",function(a,b){c.dataObj.removeAt(b,
-1,null,c.tabIsRemoved)});d.$on(d.name+"-remove-tab-at",function(a,b){c.dataObj.removeAt(null,b,null,c.tabIsRemoved)});this.listIsCleared=function(){c.options.selectedTab=null;c.updateLayout()};this.tabIsAdded=function(){c.updateLayout()};this.tabIsRemoved=function(a,b,d){a&&(a.selected=!1,a==c.options.selectedTab&&(c.options.selectedTab=null));c.updateLayout()};this.addTabScope=function(a){a&&(c.tabScopeList.push(a),c.updateLayout&&c.updateLayout())};this.removeTabScope=function(a){a=c.tabScopeList.indexOf(a);
0<=a&&c.tabScopeList.splice(a,1)};this.currentList=[];this.currentScopeList=[];this.getCurrentList=function(){return c.currentList};this.updateCurrentList=function(){c.currentList.length=0;var a=c.dataObj.getList();if(a)for(var b=0;b<a.length;b++){var d=a[b];c.isTabVisible(d)&&(d.type="tab",d[c.options.dataFields.id]||(d[c.options.dataFields.id]=f.getUniqueId()),c.currentList.push(d))}};this.updateCurrentScopeList=function(){for(var a=c.currentScopeList.length=0;a<c.currentList.length;a++){var b=
c.getScopeByTab(c.currentList[a]);b&&c.currentScopeList.push(b)}};this.tabScopeList=d.tabScopeList=[];this.dataEvents={clear:function(a){return angular.isDefined(d.events)&&d.events.clear?d.events.clear():d.clear()},objAdded:function(a){return angular.isDefined(d.events)&&d.events.tabAdded?d.events.tabAdded({tab:a.e.obj}):d.tabAdded(a)},objAdding:function(a){return angular.isDefined(d.events)&&d.events.tabAdding?d.events.tabAdding({tab:a.e.obj}):d.tabAdding(a)},objRemoved:function(a){return angular.isDefined(d.events)&&
d.events.tabRemoved?d.events.tabRemoved({tab:a.e.obj}):d.tabRemoved(a)},objRemoving:function(a){return angular.isDefined(d.events)&&d.events.tabRemoving?d.events.tabRemoving({tab:a.e.obj}):d.tabRemoving(a)}};this.getDataFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",objects:a.tabs?a.tabs:"tabs",text:a.text?a.text:"text"}};c.dataObj=new e({objects:d.tabs,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});d.$on(d.name+"-load-data",
function(a,b,d){c.loadData(b,d)});this.loadData=function(a,b){c.allowEvents=!1;c.updateDataFields(b);var t=[];c.dataObj.clear(null,c.listIsCleared);a&&(t=a);if(angular.isDefined(d.tabs))for(var f=d.tabs.length=0;f<t.length;f++)d.tabs.push(t[f]);c.dataObj=new e({objects:d.tabs,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});c.updateLayout();c.allowEvents=!0};this.allowEvents=!0;this.callAfterSelect=function(a){angular.isDefined(d.events)&&d.events.afterSelect?d.events.afterSelect({tab:a}):
d.afterSelect({e:{tab:a}});angular.isDefined(d.events)&&d.events.selectionChanged?d.events.selectionChanged({tab:a}):d.selectionChanged({e:{tab:a}})};this.callEnabledChanged=function(a){angular.isDefined(d.events)&&d.events.enabledChanged?d.events.enabledChanged({enabled:a}):d.enabledChanged({e:{enabled:a}})};this.callTabClick=function(a,c){angular.isDefined(d.events)&&d.events.tabClick?d.events.tabClick({tab:a,mousePos:c}):d.tabClick({e:{tab:a,mousePos:c}})};this.callTabDblClick=function(a,c){angular.isDefined(d.events)&&
d.events.tabDblClick?d.events.tabDblClick({tab:a,mousePos:c}):d.tabDblclick({e:{tab:a,mousePos:c}})};this.callTabHover=function(a){angular.isDefined(d.events)&&d.events.tabHover?d.events.tabHover({tab:a}):d.tabHover({e:{tab:a}})};this.callTabRightClick=function(a,c){angular.isDefined(d.events)&&d.events.tabRightClick?d.events.tabRightClick({tab:a,mousePos:c}):d.tabRightclick({e:{tab:a,mousePos:c}})};this.callStyleChanged=function(a){angular.isDefined(d.events)&&d.events.styleChanged?d.events.styleChanged({style:a}):
d.styleChanged({e:{style:a}})};d.$on(d.name+"-find-tab-by-id",function(a,b){n.setTempData(c.findTabById(b))});d.$on(d.name+"-find-tab-by-text",function(a,b){n.setTempData(c.findTabByText(b))});this.findTabById=function(a){return c.dataObj.findObjectById(a)};this.findTabByText=function(a){return c.dataObj.findObjectByText(a)};this.findTabByName=function(a){var b=null,d=c.getList();if(d)for(var f=0;f<d.length;f++)if(d[f].name==a){b=d[f];break}return b};this.findScopeByName=function(a){for(var b=null,
d=0;d<c.tabScopeList.length;d++)if(c.tabScopeList[d].name==a){b=c.tabScopeList[d];break}return b};d.$on(d.name+"-get-ctrl",function(a){f.setTempData(c)});d.$on(d.name+"-get-list",function(a,b){1==b?n.setTempData(c.getCurrentList()):n.setTempData(c.getList())});this.getTabByScope=function(a){return a&&(a=c.getTabScopeIndex(a),c.isIndexInRange(a))?c.currentList[a]:null};this.getTabCurrentIndex=function(a){return a&&c.currentList?c.currentList.indexOf(a):-1};this.getTabScopeIndex=function(a){return a&&
c.currentScopeList?c.currentScopeList.indexOf(a):-1};this.getTabState=function(a){if(a){if(0==c.options.enabled||0==a[c.options.dataFields.enabled])return"disabled";if(a==c.options.selectedTab)return"selected";if(a==c.options.hoverTab)return"hovered"}return"normal"};this.getList=function(){return c.dataObj.getList()};this.getScopeByTab=function(a){return a?c.findScopeByName(a[c.options.dataFields.name]):null};this.isTabEnabled=function(a){return f.isEnabled(a[c.options.dataFields.enabled])};this.isTabVisible=
function(a){return a&&0!=a[c.options.dataFields.visible]?!0:!1};this.isIndexInRange=function(a){return 0<=a&&a<c.currentList.length};this.setHoverTab=function(a){(a=c.getTabByScope(a))?(c.options.hoverTab=a,c.callTabHover(a)):c.options.hoverTab=null};c.allowUpdate=!0;this.suspendLayout=function(){c.allowUpdate=!1};this.resumeLayout=function(){c.allowUpdate=!0;c.updateLayout()};d.$on(d.name+"-refresh",function(a){c.refresh()});d.$on(d.name+"-resume-layout",function(a){c.resumeLayout()});d.$on(d.name+
"-suspend-layout",function(a){c.suspendLayout()});d.$on(d.name+"-update-layout",function(a){c.updateLayout()});this.selectionCancelled=!1;d.$on(d.name+"-get-selected-tab",function(a){n.setTempData(c.tabSelection())});d.$on(d.name+"-set-selected-tab",function(a,b){c.tabSelection(b)});d.$on(d.name+"-clear-selection",function(a){c.options.selectedTab&&(c.options.selectedTab[c.options.dataFields.selected]=!1);c.options.selectedTab=null});this.tabSelection=function(a,b){if(a){if(c.isTabEnabled(a)){var t=
c.tabSelection(),e=!0;t&&(e=!f.isEqual(t[c.options.dataFields.id],a[c.options.dataFields.id]));e&&(t=angular.isDefined(d.events)&&d.events.beforeSelect?d.events.beforeSelect({tab:a}):d.beforeSelect({e:{tab:a}}),c.selectionCancelled=0==t,0!=t&&(c.options.selectedTab&&(c.options.selectedTab.selected=!1,c.updateTab(c.options.selectedTab)),c.options.selectedTab=a,a[c.options.dataFields.selected]=!0,c.callAfterSelect(a),c.updateLayout()))}}else return c.options.selectedTab};this.selectTab=function(a){(a=
c.getTabByScope(a))&&c.tabSelection(a)};var b=function(a){if(a){var b=f.isFieldAvailable(a.general,"iui-tabstrip-navigation");a=a.button;a=f.isString(a)?a:a?{disabled:f.isFieldAvailable(a.disabled,"iui-tabstrip-navigation-button-disabled"),normal:f.isFieldAvailable(a.normal,"iui-tabstrip-navigation-button"),hovered:f.isFieldAvailable(a.hovered,"iui-tabstrip-navigation-button-hovered"),selected:f.isFieldAvailable(a.selected,"iui-tabstrip-navigation-button-selected")}:c.options.controlStyle.navigation.button;
return{general:b,button:a}}return c.options.controlStyle.navigation},A=function(a){if(a){var b=f.isFieldAvailable(a.general,"iui-tab"),d;d=a.header;d=f.isString(d)?d:d?{content:f.isFieldAvailable(d.content,"iui-tab-header-content"),disabled:f.isFieldAvailable(d.disabled,"iui-tab-header-disabled"),focused:f.isFieldAvailable(d.focused,"iui-tab-header-focused"),normal:f.isFieldAvailable(d.normal,"iui-tab-header"),hovered:f.isFieldAvailable(d.hovered,"iui-tab-header-hovered"),selected:f.isFieldAvailable(d.selected,
"iui-tab-header-selected")}:c.options.controlStyle.tab.header;a=a.content;a=f.isString(a)?a:a?{disabled:f.isFieldAvailable(a.disabled,"iui-tab-content-disabled"),focused:f.isFieldAvailable(a.focused,"iui-tab-content-focused"),normal:f.isFieldAvailable(a.normal,"iui-tab-content"),hovered:f.isFieldAvailable(a.hovered,"iui-tab-content-hovered"),selected:f.isFieldAvailable(a.selected,"iui-tab-content-selected")}:c.options.controlStyle.tab.content;return{general:b,header:d,content:a}}return c.options.controlStyle.tab};
this.updateControlStyle=function(a){c.options.controlStyle=a?{general:f.isFieldAvailable(a.general,"iui-tabstrip"),navigation:b(a.navigation),tab:A(a.tab)}:{general:f.isFieldAvailable(c.defaultStyle.general,"iui-tabstrip"),navigation:b(c.defaultStyle.navigation),tab:A(c.defaultStyle.tab)}};this.getCurrentNavigationStyle=function(){return c.options.controlStyle.navigation};this.getCurrentNavButtonStyle=function(a,b){if(!a)return"";switch(b){case "disabled":return a&&a.disabled?a.disabled:c.options.controlStyle.navigation.button.disabled;
case "hovered":return a&&a.hovered?a.hovered:c.options.controlStyle.navigation.button.hovered;case "selected":return a&&a.selected?a.selected:c.options.controlStyle.navigation.button.selected;default:return a&&a.normal?a.normal:c.options.controlStyle.navigation.button.normal}};this.getCurrentTabStyle=function(a){var b=c.options.controlStyle.tab;if(a)switch(a.style){case "initial":break;default:null!=a.style&&(b=a.style)}return b?b:c.options.controlStyle.tab};this.getCurrentTabHeaderStyle=function(a,
b){if(!a||!a.header)return"";switch(b){case "content":return a.header.content?a.header.content:c.options.controlStyle.tab.header.content;case "disabled":return a.header.disabled?a.header.disabled:c.options.controlStyle.tab.header.disabled;case "focused":return a.header.focused?a.header.focused:c.options.controlStyle.tab.header.focused;case "hovered":return a.header.hovered?a.header.hovered:c.options.controlStyle.tab.header.hovered;case "selected":return a.header.selected?a.header.selected:c.options.controlStyle.tab.header.selected;
default:return a.header.normal?a.header.normal:c.options.controlStyle.tab.header.normal}};this.getCurrentTabContentStyle=function(a,b){if(!a||!a.content)return"";switch(b){case "disabled":return a.content.disabled?a.content.disabled:c.options.controlStyle.tab.content.disabled;case "focused":return a.content.focused?a.content.focused:c.options.controlStyle.tab.content.focused;case "hovered":return a.content.hovered?a.content.hovered:c.options.controlStyle.tab.content.hovered;case "selected":return a.content.selected?
a.content.selected:c.options.controlStyle.tab.content.selected;default:return a.content.normal?a.content.normal:c.options.controlStyle.tab.content.normal}};c.updateTab=function(a){(a=c.getScopeByTab(a))&&a.refresh()};d.$watch("autoSize",function(a,b){a!==b&&(c.updateAutoSize(a),c.updateLayout())});d.$watch("controlStyle",function(a,b){a!==b&&(c.options.controlStyle=a,c.refresh(),c.callStyleChanged(a))});d.$watch("enabled",function(a,b){a!==b&&(c.options.enabled=a,c.refresh(),c.callEnabledChanged(a))});
d.$watch("fields",function(a,b){a!==b&&(c.options.dataFields=a,c.UpdateData())});d.$watch("tabIcon",function(a,b){a!==b&&(c.options.tabIcon=a,c.updateLayout())});d.$watch("hoverSelection",function(a,b){a!==b&&(c.options.hoverSelection=a)});d.$watch("options",function(a,b){a!==b&&(c.updateOptions(a),c.updateLayout())},!0);d.$watch("rtl",function(a,b){a!==b&&(c.options.rtl=a,c.updateLayout())});d.$watch("selectedTab",function(a,b){a!==b&&(b&&(b.selected=!1),c.options.selectedTab=a,c.callAfterSelect(a))});
d.$watch("showCloseButton",function(a,b){a!==b&&(c.options.showCloseButton=a,c.updateLayout())});d.$watch("showIcons",function(a,b){a!==b&&(c.options.showIcons=a,c.updateLayout())});d.$watch("tabstripPlacement",function(a,b){a!==b&&(c.options.tabstripPlacement=a,c.updateLayout())})}]).directive("iuiTabstrip",["$timeout","$interval","IntegralUIInternalService",function(d,x,f){return{restrict:"EA",controller:"IntegralUITabStripController",transclude:!0,replace:!0,template:'<div class="iui-tabstrip" data-element="tabstrip"><ul ng-transclude></ul><div style="background:transparent;position:absolute;width:100px;height:1px;"></div><div class="iui-tab-content" ng-repeat="tab in tabScopeList" iui-content-transclude="tab" data-name="{{tab.name}}"></div></div>',
scope:{autoSize:"=",controlStyle:"=",enabled:"=",fields:"=",hoverSelection:"=",name:"@",options:"=?",rtl:"=",selectedTab:"=",showCloseButton:"=",showIcons:"=",tabIcon:"=",tabs:"=",tabstripPlacement:"@",afterSelect:"&",beforeSelect:"&",buttonClicked:"&",buttonClicking:"&",clear:"&",enabledChanged:"&",events:"=?",tabAdded:"&",tabAdding:"&",tabClick:"&",tabDblclick:"&",tabHover:"&",tabRemoved:"&",tabRemoving:"&",tabRightclick:"&",selectionChanged:"&",styleChanged:"&"},link:function(e,n,c,b,A){var a=
this,t=angular.element(n.children().eq(0)),B=angular.element(n.children().eq(1)),r=angular.element("<div></div>"),h=angular.element("<div><span></span></div>"),p=angular.element("<div><span></span></div>"),q=angular.element("<div><span></span></div>");e.$on("$destroy",function(b){a.s2t();G()});var G=function(){h.unbind("click mousedown mouseup");p.unbind("click mousedown mouseup");q.unbind("mousedown mouseup")},I=function(){h.bind("click",function(a){a.stopPropagation()});h.bind("mousedown",function(a){H(!1);
a.stopPropagation()});h.bind("mouseup",function(a){C&&x.cancel(C);a.stopPropagation()});p.bind("click",function(a){a.stopPropagation()});p.bind("mousedown",function(a){H(!0);a.stopPropagation()});p.bind("mouseup",function(a){C&&x.cancel(C);a.stopPropagation()});q.bind("mousedown",function(a){b.options.selectedTab&&b.dataObj.removeAt(b.options.selectedTab,-1,null,b.tabIsRemoved);a.stopPropagation()})},w=0,y=0,F=function(a){for(var b=null,c=n.children(),d=1;d<c.length;d++){var f=angular.element(c.eq(d));
if(f&&f[0].attributes&&f[0].attributes["data-name"]&&f[0].attributes["data-name"].value==a){b=f;break}}return b};b.updateLayout=function(){if(b.allowUpdate){G();y=w=0;b.maxScrollPos=0;b.updateCurrentList();b.updateCurrentScopeList();!b.options.selectedTab&&0<b.currentList.length&&(b.options.selectedTab=b.currentList[0]);var a=d(function(){var c=b.getTabCurrentIndex(b.options.selectedTab);if(b.options.rtl){var g=t.children();if(g&&0<g.length){var l=0,e=0,u,z,k,v=f.getPadding(t[0]);t.css("top","auto");
t.css("right","auto");t.css("bottom","auto");t.css("left","auto");switch(b.options.tabstripPlacement){case "right":t.css("bottom",0);t.css("right",0);break;case "left":t.css("bottom",0);t.css("left",0);break;case "bottom":t.css("right",0);t.css("bottom",0);break;default:1==b.options.autoSize.vertical&&t.css("position","static"),t.css("top",0),t.css("right",0)}for(var m=0;m<g.length;m++)switch(k=angular.element(g.eq(m)),k[0].attributes&&k[0].attributes.name&&((u=b.findTabByName(k[0].attributes.name.value))&&
0!=u[b.options.dataFields.visible]?k.css("display","inline-block"):k.css("display","none")),k.css("top","auto"),k.css("right","auto"),k.css("bottom","auto"),k.css("left","auto"),b.options.tabstripPlacement){case "left":k.css("bottom",e+"px");e+=k[0].offsetHeight;w<k[0].offsetWidth&&(w=k[0].offsetWidth);break;case "right":k.css("bottom",e+"px");k.css("right",0);e+=k[0].offsetHeight;w<k[0].offsetWidth&&(w=k[0].offsetWidth);break;default:k.css("right",l+"px"),l+=k[0].offsetWidth,y<k[0].offsetHeight&&
(y=k[0].offsetHeight)}for(m=0;m<g.length;m++){k=angular.element(g.eq(m));u=f.getBorderWidth(k[0]);z=f.getPadding(k[0]);switch(b.options.tabstripPlacement){case "left":m==c?k.css("left","0"):k.css("left",v.left+"px");k.css("width",w-(u.left+u.right)-(z.left+z.right)+"px");y=e;break;case "right":m==c?k.css("right","0"):k.css("right",v.right+"px");k.css("width",w-(u.left+u.right)-(z.left+z.right)+"px");y=e;break;case "bottom":m==c?k.css("bottom","0"):k.css("bottom",v.bottom+"px");k.css("height",y-(u.top+
u.bottom)-(z.top+z.bottom)+"px");w=l;break;default:var x=1==b.options.autoSize.vertical?1:0;m==c?k.css("top",x+"px"):k.css("top",v.top+x+"px");k.css("height",y-(u.top+u.bottom)-(z.top+z.bottom)+"px");w=l}k.css("opacity",1)}1==b.options.autoSize.vertical&&"top"==b.options.tabstripPlacement&&t.css("height",y+"px")}l=b.getCurrentNavigationStyle();r.removeAttr("class");r.addClass(b.options.controlStyle.navigation.general);n.append(r);g=f.getPadding(r[0]);r.empty();q.removeAttr("class");if(b.options.showCloseButton)switch(q.addClass(b.defaultStyle.navigation.button.normal),
e=b.getCurrentNavButtonStyle(l),e!=b.options.controlStyle.navigation.button.normal&&q.addClass(e),q.addClass("iui-tabstrip-navigation-button-close"),r.append(q),q.css("top","auto"),q.css("right","auto"),q.css("bottom","auto"),q.css("left","auto"),b.options.tabstripPlacement){case "left":q.css("top",g.top+"px");q.css("right",g.right+"px");break;case "right":q.css("top",g.top+"px");q.css("left",g.left+"px");break;case "bottom":q.css("top",g.top+"px");q.css("left",g.left+"px");break;default:q.css("bottom",
g.bottom+"px"),q.css("left",g.left+"px")}h.removeAttr("class");h.addClass(b.defaultStyle.navigation.button.normal);e=b.getCurrentNavButtonStyle(l);e!=b.options.controlStyle.navigation.button.normal&&h.addClass(e);"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?h.addClass("iui-tabstrip-navigation-button-up"):h.addClass("iui-tabstrip-navigation-button-left");r.append(h);h.css("top","auto");h.css("right","auto");h.css("bottom","auto");h.css("left","auto");switch(b.options.tabstripPlacement){case "left":h.css("top",
g.top+q[0].offsetHeight+"px");h.css("right",g.right+"px");break;case "right":h.css("top",g.top+q[0].offsetHeight+"px");h.css("left",g.left+"px");break;case "bottom":h.css("top",g.top+"px");h.css("left",g.left+q[0].offsetWidth+"px");break;default:h.css("bottom",g.bottom+"px"),h.css("left",g.left+q[0].offsetWidth+"px")}p.removeAttr("class");p.addClass(b.defaultStyle.navigation.button.normal);e=b.getCurrentNavButtonStyle(l);e!=b.options.controlStyle.navigation.button.normal&&p.addClass(e);"left"==b.options.tabstripPlacement||
"right"==b.options.tabstripPlacement?p.addClass("iui-tabstrip-navigation-button-down"):p.addClass("iui-tabstrip-navigation-button-right");r.append(p);p.css("top","auto");p.css("right","auto");p.css("bottom","auto");p.css("left","auto");switch(b.options.tabstripPlacement){case "left":p.css("top",g.top+q[0].offsetHeight+h[0].offsetHeight+"px");p.css("right",g.right+"px");break;case "right":p.css("top",g.top+q[0].offsetHeight+h[0].offsetHeight+"px");p.css("left",g.left+"px");break;case "bottom":p.css("top",
g.top+"px");p.css("left",g.left+q[0].offsetWidth+h[0].offsetWidth+"px");break;default:p.css("bottom",g.bottom+"px"),p.css("left",g.left+q[0].offsetWidth+h[0].offsetWidth+"px")}e=l=0;"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?(l=w-(g.left+g.right)-1,e+=h[0].offsetHeight,e+=p[0].offsetHeight,e+=q[0].offsetHeight):(l+=h[0].offsetWidth,l+=p[0].offsetWidth,l+=q[0].offsetWidth,e=y-(g.top+g.bottom)-1);r.css("top","auto");r.css("right","auto");r.css("bottom","auto");r.css("left",
"auto");switch(b.options.tabstripPlacement){case "left":r.css("top",0);r.css("left",0);break;case "right":r.css("top",0);r.css("right",0);break;case "bottom":r.css("bottom",0);r.css("left",0);break;default:r.css("top",0),r.css("left",0)}}else{if((g=t.children())&&0<g.length){e=l=0;k=f.getPadding(t[0]);t.css("top","auto");t.css("right","auto");t.css("bottom","auto");t.css("left","auto");switch(b.options.tabstripPlacement){case "right":t.css("top",0);t.css("right",0);break;case "left":t.css("top",0);
t.css("left",0);break;case "bottom":t.css("left",0);t.css("bottom",0);break;default:1==b.options.autoSize.vertical&&t.css("position","static"),t.css("top",0),t.css("left",0)}for(v=0;v<g.length;v++)switch(m=angular.element(g.eq(v)),m[0].attributes&&m[0].attributes.name&&((u=b.findTabByName(m[0].attributes.name.value))&&0!=u[b.options.dataFields.visible]?m.css("display","inline-block"):m.css("display","none")),m.css("top","auto"),m.css("right","auto"),m.css("bottom","auto"),m.css("left","auto"),b.options.tabstripPlacement){case "left":m.css("top",
l+"px");l+=m[0].offsetHeight;m=m[0].offsetWidth;w<m&&(w=m);break;case "right":m.css("top",l+"px");m.css("right",0);l+=m[0].offsetHeight;m=m[0].offsetWidth;w<m&&(w=m);break;default:m.css("left",e+"px"),e+=m[0].offsetWidth,m=m[0].offsetHeight,y<m&&(y=m)}for(v=0;v<g.length;v++){m=angular.element(g.eq(v));u=f.getBorderWidth(m[0]);z=f.getPadding(m[0]);switch(b.options.tabstripPlacement){case "left":v==c?m.css("left","0"):m.css("left",k.left+"px");m.css("width",w-(u.left+u.right)-(z.left+z.right)+"px");
y=l;break;case "right":v==c?m.css("right","0"):m.css("right",k.right+"px");m.css("width",w-(u.left+u.right)-(z.left+z.right)+"px");y=l;break;case "bottom":v==c?m.css("bottom","0"):m.css("bottom",k.bottom+"px");m.css("height",y-(u.top+u.bottom)-(z.top+z.bottom)+"px");w=e;break;default:x=1==b.options.autoSize.vertical?1:0,v==c?m.css("top",x+"px"):m.css("top",k.top+x+"px"),m.css("height",y-(u.top+u.bottom)-(z.top+z.bottom)+"px"),w=e}m.css("opacity",1)}1==b.options.autoSize.vertical&&"top"==b.options.tabstripPlacement&&
t.css("height",y+"px")}l=b.getCurrentNavigationStyle();r.removeAttr("class");r.addClass(b.options.controlStyle.navigation.general);n.append(r);g=f.getPadding(r[0]);r.empty();h.removeAttr("class");h.addClass(b.defaultStyle.navigation.button.normal);e=b.getCurrentNavButtonStyle(l);e!=b.options.controlStyle.navigation.button.normal&&h.addClass(e);"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?h.addClass("iui-tabstrip-navigation-button-up"):h.addClass("iui-tabstrip-navigation-button-left");
r.append(h);h.css("top","auto");h.css("right","auto");h.css("bottom","auto");h.css("left","auto");switch(b.options.tabstripPlacement){case "left":h.css("top",g.top+"px");h.css("right",g.right+"px");break;case "right":h.css("top",g.top+"px");h.css("left",g.left+"px");break;case "bottom":h.css("top",g.top+"px");h.css("left",g.left+"px");break;default:h.css("bottom",g.bottom+"px"),h.css("left",g.left+"px")}p.removeAttr("class");p.addClass(b.defaultStyle.navigation.button.normal);e=b.getCurrentNavButtonStyle(l);
e!=b.options.controlStyle.navigation.button.normal&&p.addClass(e);"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?p.addClass("iui-tabstrip-navigation-button-down"):p.addClass("iui-tabstrip-navigation-button-right");r.append(p);p.css("top","auto");p.css("right","auto");p.css("bottom","auto");p.css("left","auto");switch(b.options.tabstripPlacement){case "left":p.css("top",g.top+h[0].offsetHeight+"px");p.css("right",g.right+"px");break;case "right":p.css("top",g.top+h[0].offsetHeight+
"px");p.css("left",g.left+"px");break;case "bottom":p.css("top",g.top+"px");p.css("left",g.left+h[0].offsetWidth+"px");break;default:p.css("bottom",g.bottom+"px"),p.css("left",g.left+h[0].offsetWidth+"px")}q.removeAttr("class");if(b.options.showCloseButton)switch(q.addClass(b.defaultStyle.navigation.button.normal),e=b.getCurrentNavButtonStyle(l),e!=b.options.controlStyle.navigation.button.normal&&q.addClass(e),q.addClass("iui-tabstrip-navigation-button-close"),r.append(q),q.css("top","auto"),q.css("right",
"auto"),q.css("bottom","auto"),q.css("left","auto"),b.options.tabstripPlacement){case "left":q.css("top",g.top+h[0].offsetHeight+p[0].offsetHeight+"px");q.css("right",g.right+"px");break;case "right":q.css("top",g.top+h[0].offsetHeight+p[0].offsetHeight+"px");q.css("left",g.left+"px");break;case "bottom":q.css("top",g.top+"px");q.css("left",g.left+h[0].offsetWidth+p[0].offsetWidth+"px");break;default:q.css("bottom",g.bottom+"px"),q.css("left",g.left+h[0].offsetWidth+p[0].offsetWidth+"px")}e=l=0;"left"==
b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?(l=w-(g.left+g.right)-1,e+=h[0].offsetHeight,e+=p[0].offsetHeight,e+=q[0].offsetHeight):(l+=h[0].offsetWidth,l+=p[0].offsetWidth,l+=q[0].offsetWidth,e=y-(g.top+g.bottom)-1);r.css("top","auto");r.css("right","auto");r.css("bottom","auto");r.css("left","auto");switch(b.options.tabstripPlacement){case "left":r.css("bottom",0);r.css("left",0);break;case "right":r.css("bottom",0);r.css("right",0);break;case "bottom":r.css("bottom",0);r.css("right",
0);break;default:r.css("top",0),r.css("right",0)}}g=1==b.options.autoSize.vertical&&"top"==b.options.tabstripPlacement?1:0;r.css("width",l+"px");r.css("height",e+g+"px");n.children();for(g=0;g<b.currentScopeList.length;g++)if(l=b.currentScopeList[g],l.refresh(),l=F(l.name)){e=f.getBorderWidth(l[0]);k=f.getPadding(l[0]);if(g==c&&(u=k,1==b.options.autoSize.horizontal||1==b.options.autoSize.vertical)&&(v=angular.element(l.children().clone()),v.css("position","absolute"),v.css("top","-9999px"),v.css("display",
"block"),n.append(v),v&&v[0])){switch(b.options.tabstripPlacement){case "left":m=w+v[0].offsetWidth+u.left+u.right;u=v[0].offsetHeight+u.top+u.bottom;break;case "right":m=w+v[0].offsetWidth+u.left+u.right;u=v[0].offsetHeight+u.top+u.bottom;break;default:m=v[0].offsetWidth+u.left+u.right,u=y+v[0].offsetHeight+u.top+u.bottom}1==b.options.autoSize.horizontal&&n.css("width",m+"px");1==b.options.autoSize.vertical&&"top"!=b.options.tabstripPlacement&&n.css("height",u+"px");v.remove()}l.css("top","auto");
l.css("right","auto");l.css("bottom","auto");l.css("left","auto");switch(b.options.tabstripPlacement){case "left":l.css("left",w-1+"px");l.css("width",n[0].clientWidth-w-(k.left+k.right)-1+"px");l.css("height",n[0].clientHeight-(e.top+e.bottom)-(k.top+k.bottom)+"px");break;case "right":l.css("right",w-1+"px");l.css("width",n[0].clientWidth-w-(k.left+k.right)-1+"px");l.css("height",n[0].clientHeight-(e.top+e.bottom)-(k.top+k.bottom)+"px");break;case "bottom":l.css("width",n[0].clientWidth-(e.left+
e.right)-(k.left+k.right)+"px");l.css("height",n[0].clientHeight-y-(k.top+k.bottom)-1+"px");break;default:if(1==b.options.autoSize.vertical){if(l.css("position","static"),g==c){a:{e=c;if((k=t.children())&&0<k.length)for(v=0;v<k.length;v++)if(v==e){e=angular.element(k.eq(v));if(e[0].attributes&&e[0].attributes.name&&(k=b.findTabByName(e[0].attributes.name.value))&&0!=k[b.options.dataFields.visible])break a;break}e=null}e?(B.css("display","block"),B.css("top",y+"px"),B.css("left",e[0].offsetLeft+"px"),
B.css("width",e[0].offsetWidth+"px"),B.css("background-color",getComputedStyle(e[0]).backgroundColor)):B.css("display","none")}}else B.css("display","none"),l.css("top",y-1+"px"),l.css("width",n[0].clientWidth-(e.left+e.right)-(k.left+k.right)+"px"),l.css("height",n[0].clientHeight-y-(k.top+k.bottom)-1+"px")}g==c?l.css("display","block"):l.css("display","none")}for(g=0;g<b.tabScopeList.length;g++)l=b.tabScopeList[g],0>b.getTabScopeIndex(l)&&(l=F(l.name))&&l.css("display","none");b.maxScrollPos=0;
"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?y>n[0].clientHeight?(b.maxScrollPos=y-(n[0].clientHeight-r[0].offsetHeight),b.options.rtl&&b.maxScrollPos++):(r.remove(),b.scrollPos=0):w>n[0].clientWidth?(b.maxScrollPos=w-(n[0].clientWidth-r[0].offsetWidth),b.options.rtl&&b.maxScrollPos++):(r.remove(),b.scrollPos=0);b.scrollTabs();b.refresh();I();d.cancel(a)},1)}};var D=0,C=null,E=!1;b.scrollPos=0;b.maxScrollPos=0;var H=function(a){C&&x.cancel(C);D=0;C=x(function(){var c=
a;b.options.rtl&&(c=!c);0==D&&(D=1);D+=5;E=!1;c?b.scrollPos+D<b.maxScrollPos?b.scrollPos+=D:(E=!0,b.scrollPos=b.maxScrollPos):0<b.scrollPos-D?b.scrollPos-=D:(E=!0,b.scrollPos=0);b.scrollTabs();E&&x.cancel(C)},100)};b.scrollTabs=function(){var a=t.children();if(a&&0<a.length)for(var c=-b.scrollPos,d=-b.scrollPos,e=-b.scrollPos,f=-b.scrollPos,h,n=0;n<a.length;n++)if(h=angular.element(a.eq(n)),b.options.rtl?"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?(h.css("bottom",e+"px"),
e+=h[0].offsetHeight):(h.css("right",d+"px"),d+=h[0].offsetWidth):"left"==b.options.tabstripPlacement||"right"==b.options.tabstripPlacement?(h.css("top",c+"px"),c+=h[0].offsetHeight):(h.css("left",f+"px"),f+=h[0].offsetWidth),1==b.options.autoSize.vertical&&"top"==b.options.tabstripPlacement){var k=b.getTabCurrentIndex(b.options.selectedTab);n==k&&B.css("left",h[0].offsetLeft+"px")}};b.refresh=function(){for(var a,c,d=0;d<b.currentScopeList.length;d++)if(a=b.currentScopeList[d],a.refresh(),c=F(a.name)){var e=
b.getTabByScope(a);if(e){a=b.getTabState(e);var f=b.getCurrentTabStyle(e),e=b.defaultStyle.tab.content.normal;a=b.getCurrentTabContentStyle(f,a);a!=b.options.controlStyle.tab.content.normal&&(e+=" "+a);c.removeAttr("class");c.addClass(e)}}(a=b.getScopeByTab(b.options.selectedTab))&&a.select()};a=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(a.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",n[0].scrollTop+"px"),this.$tw.css("left",n[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
n[0].scrollTop+"px"),this.$tw.css("left",n[0].scrollLeft+"px"))};this.s1t=function(c){this.trlTime=d(function(){a.trActive||(a.trCount=0,a.trActive=!0,a.trId=x(function(){a.animTr()},1E3))},c)};this.s2t=function(){this.trId&&(x.cancel(this.trId),this.trId=null);this.trlTime&&(d.cancel(this.trlTime),this.trlTime=null);this.trActive=!1;this.$tw.remove()};n.append(this.$tw);this.s1t(this.twp);angular.isDefined(e.options)?b.updateOptions(e.options):(angular.isDefined(e.autoSize)&&b.updateAutoSize(e.autoSize),
angular.isDefined(e.controlStyle)&&b.updateControlStyle(e.controlStyle),0==e.enabled&&(b.options.enabled=e.enabled),angular.isDefined(e.fields)&&b.updateDataFields(e.fields),angular.isDefined(e.tabstripPlacement)&&(b.options.tabstripPlacement=e.tabstripPlacement),1==e.hoverSelection&&(b.options.hoverSelection=e.hoverSelection),angular.isDefined(e.tabIcon)&&(b.options.tabIcon=e.tabIcon),1==e.rtl&&(b.options.rtl=e.rtl),angular.isDefined(e.selectedTab)&&(b.options.selectedTab=e.selectedTab),0==e.showCloseButton&&
(b.options.showCloseButton=e.showCloseButton),0==e.showIcons&&(b.options.showIcons=e.showIcons));d(function(){b.updateLayout()},1)}}}]).controller("IntegralUITabController",["$scope","$element","IntegralUIInternalService",function(d,x,f){var e=this;this.heading=d.heading;this.setHeading=function(d){this.heading=d};d.$on(d.name+"-get-ctrl",function(d){f.setTempData(e)})}]).directive("iuiTab",["$timeout","IntegralUIInternalService",function(d,x){return{require:"^iuiTabstrip",restrict:"EA",controller:"IntegralUITabController",
transclude:!0,replace:!0,template:'<li class="iui-tab-header" data-element="tab-header"><div iui-tab-header-transclude="heading">{{heading}}</div></li>',scope:{expanded:"=",name:"@",heading:"@"},link:function(f,e,n,c,b){var A=angular.element(e.children().eq(0));f.$on("$destroy",function(a){A&&A.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart");c.removeTabScope(f)});(function(){A.bind("click",function(a){var b=c.getTabByScope(f);b&&"disabled"!=c.getTabState(b)&&c.callTabClick(b,
x.getMousePos(a));a.stopPropagation()});A.bind("dblclick",function(a){var b=c.getTabByScope(f);b&&"disabled"!=c.getTabState(b)&&c.callTabDblClick(b,x.getMousePos(a));a.stopPropagation()});A.bind("mouseenter",function(b){var e=c.getTabByScope(f);e&&"disabled"!=c.getTabState(e)&&(c.setHoverTab(f),f.refresh(),c.options.hoverSelection&&(a=d(function(){a&&c.selectTab(f)},500)));b.stopPropagation()});A.bind("mouseleave",function(b){var e=c.getTabByScope(f);e&&"disabled"!=c.getTabState(e)&&(c.setHoverTab(),
a&&(d.cancel(a),a=null),f.refresh());b.stopPropagation()});A.bind("mousedown",function(a){var b=c.getTabByScope(f);if(b&&"disabled"!=c.getTabState(b))switch(a.which){case 1:c.selectTab(f);break;case 3:c.callTabRightClick(b,x.getMousePos(a))}a.stopPropagation()});A.bind("touchstart",function(a){a.preventDefault();var b=x.getTouchData(a);b&&0<b.length&&((b=c.getTabByScope(f))&&"disabled"!=c.getTabState(b)&&c.selectTab(f),a.stopPropagation())})})();f.open=function(){};f.close=function(){};var a=null;
f.select=function(){f.refresh()};f.refresh=function(){var a=c.getTabByScope(f);if(a){var b=c.getTabState(a),d=c.getCurrentTabStyle(a),h=c.defaultStyle.tab.header.normal,b=c.getCurrentTabHeaderStyle(d,b);b!=c.options.controlStyle.tab.header.normal&&(h+=" "+b);e.removeAttr("class");e.addClass(h);h="iui-tab-header";switch(c.options.tabstripPlacement){case "left":h+="-left";break;case "right":h+="-right";break;case "bottom":h+="-bottom";break;default:h+="-top"}e.addClass(h);h="iui-tab-header-selected";
if(a==c.options.selectedTab){switch(c.options.tabstripPlacement){case "left":h+="-left";break;case "right":h+="-right";break;case "bottom":h+="-bottom";break;default:h+="-top"}e.addClass(h)}}};f.$transcludeFn=b;c.addTabScope(f)}}}]).directive("iuiTabHeaderTransclude",function(){return{restrict:"A",require:"^iuiTab",link:function(d,x,f,e){d.$watch("headerElem",function(d){d&&(x.empty(),x.append(d))})}}}).directive("iuiContentTransclude",function(){return{restrict:"A",require:"^iuiTabstrip",link:function(d,
x,f){var e=d.$eval(f.iuiContentTransclude);e.$transcludeFn(e.$parent,function(d){angular.forEach(d,function(c){c.tagName&&(c.hasAttribute("iui-tab-header")||"iui-tab-header"===c.tagName.toLowerCase())?e.headerElem=c:x.append(c)})})}}});