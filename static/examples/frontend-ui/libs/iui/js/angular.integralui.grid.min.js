/*
  filename: angular.integralui.grid.min.js
  version : 4.0.0
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIGridService",["$rootScope",function(c){var f=null;return{addColumn:function(n,l){c.$broadcast(n+"-add-column",l)},clearColumns:function(n){c.$broadcast(n+"-clear-columns")},insertColumnAt:function(n,l,f){c.$broadcast(n+"-insert-column-at",l,f)},insertColumnBefore:function(n,l,f){c.$broadcast(n+"-insert-column-before",l,f)},insertColumnAfter:function(n,l,f){c.$broadcast(n+"-insert-column-after",l,f)},removeColumn:function(n,l){c.$broadcast(n+"-remove-column",
l)},removeColumnAt:function(n,l){c.$broadcast(n+"-remove-column-at",l)},addGroup:function(n,l){c.$broadcast(n+"-add-group",l)},clearGroups:function(n){c.$broadcast(n+"-clear-groups")},insertGroupAt:function(n,l,f){c.$broadcast(n+"-insert-group-at",l,f)},insertGroupBefore:function(n,l,f){c.$broadcast(n+"-insert-group-before",l,f)},insertGroupAfter:function(n,l,f){c.$broadcast(n+"-insert-group-after",l,f)},removeGroup:function(n,l){c.$broadcast(n+"-remove-group",l)},removeGroupAt:function(n,l){c.$broadcast(n+
"-remove-group-at",l)},addRow:function(n,l){c.$broadcast(n+"-add-row",l)},clearRows:function(n){c.$broadcast(n+"-clear-rows")},insertRowAt:function(n,l,f){c.$broadcast(n+"-insert-row-at",l,f)},insertRowBefore:function(n,l,f){c.$broadcast(n+"-insert-row-before",l,f)},insertRowAfter:function(n,l,f){c.$broadcast(n+"-insert-row-after",l,f)},removeRow:function(n,l){c.$broadcast(n+"-remove-row",l)},removeRowAt:function(n,l){c.$broadcast(n+"-remove-row-at",l)},exportToJSON:function(n,l,f,h){c.$broadcast(n+
"-export-json",l,f,h);n=this.getTempData();this.clearTempData();return n?n:""},loadData:function(n,l,f){c.$broadcast(n+"-load-data",l,f)},openEditor:function(n,l){c.$broadcast(n+"-open-editor",l)},closeEditor:function(n,l){c.$broadcast(n+"-close-editor",l)},filter:function(n,l,f){c.$broadcast(n+"-filter",l,f)},findRowById:function(n,l){c.$broadcast(n+"-find-row-by-id",l);var f=this.getTempData();this.clearTempData();return f?f:null},findRowByText:function(n,l){c.$broadcast(n+"-find-row-by-text",l);
var f=this.getTempData();this.clearTempData();return f?f:null},getCellAt:function(n,l){c.$broadcast(n+"-get-cell-at",l);var f=this.getTempData();this.clearTempData();return f?f:null},getRowAt:function(n,f){c.$broadcast(n+"-get-row-at",f);var l=this.getTempData();this.clearTempData();return l?l:null},focus:function(n,f){c.$broadcast(n+"-focus",f)},clearTempData:function(){f=null},ensureVisible:function(n,f){c.$broadcast(n+"-ensure-visible",f)},getTempData:function(){return f},getHoverColumn:function(n,
f){c.$broadcast(n+"-get-hover-column",f);var l=this.getTempData();this.clearTempData();return l?l:null},getList:function(n){c.$broadcast(n+"-get-list");n=this.getTempData();this.clearTempData();return n?n:[]},setTempData:function(c){f=c},topRow:function(n,f){if(f)c.$broadcast(n+"-set-top-row",f);else return c.$broadcast(n+"-get-top-row"),f=this.getTempData(),this.clearTempData(),f?f:null},beginLoad:function(f,l){c.$broadcast(f+"-begin-load",l)},endLoad:function(f){c.$broadcast(f+"-end-load")},moveColumn:function(f,
l,B){c.$broadcast(f+"-move-column",l,B)},moveRow:function(f,l,B,h,ra){c.$broadcast(f+"-move-row",l,B,h,ra)},getScrollPos:function(f){c.$broadcast(f+"-get-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},getMaxScrollPos:function(f){c.$broadcast(f+"-get-max-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},setScrollPos:function(f,l){c.$broadcast(f+"-set-scroll-pos",l)},scrollTo:function(f,l,B){c.$broadcast(f+"-scroll-to",l,B)},currentPage:function(f,
l){if(void 0!=l&&null!=l)c.$broadcast(f+"-set-current-page",l);else{c.$broadcast(f+"-get-current-page");var n=this.getTempData();this.clearTempData();return void 0!=n?n:-1}},firstPage:function(f){c.$broadcast(f+"-first-page")},lastPage:function(f){c.$broadcast(f+"-last-page")},nextPage:function(f){c.$broadcast(f+"-next-page")},prevPage:function(f){c.$broadcast(f+"-prev-page")},clearSelection:function(f){c.$broadcast(f+"-clear-selection")},selectedColumn:function(f,l){if(l)c.$broadcast(f+"-set-selected-column",
l);else{c.$broadcast(f+"-get-selected-column");var n=this.getTempData();this.clearTempData();return n?n:null}},selectedRow:function(f,l){if(l)c.$broadcast(f+"-set-selected-row",l);else{c.$broadcast(f+"-get-selected-row");var n=this.getTempData();this.clearTempData();return n?n:null}},selectedRows:function(f,l){if(l)c.$broadcast(f+"-set-selected-rows",l);else{c.$broadcast(f+"-get-selected-rows");var n=this.getTempData();this.clearTempData();return n?n:null}},sort:function(f,l,B,h){c.$broadcast(f+"-sort",
l,B,h)},refresh:function(f,l,B){c.$broadcast(f+"-refresh",l,B)},resumeLayout:function(f,l){c.$broadcast(f+"-resume-layout",l)},suspendLayout:function(f,l){c.$broadcast(f+"-suspend-layout",l)},updateLayout:function(f,l){c.$broadcast(f+"-update-layout",l)},updateView:function(f){c.$broadcast(f+"-update-view")}}}]).controller("IntegralUIGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUIGridService","IntegralUIDragDrop",
"IntegralUIFilter",function(c,f,n,l,B,h,ra,m,r,uc){var a=this;this.suppressProcess=!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-grid",column:{general:{content:"iui-grid-column-cell-content",disabled:"iui-grid-column-disabled",normal:"iui-grid-column",
hovered:"iui-grid-column-hovered",selected:"iui-grid-column-selected"},header:{content:"iui-grid-column-header-cell-content",disabled:"iui-grid-column-header-disabled",normal:"iui-grid-column-header",hovered:"iui-grid-column-header-hovered",selected:"iui-grid-column-header-selected"},body:{content:"iui-grid-column-body-cell-content",disabled:"iui-grid-column-body-disabled",normal:"iui-grid-column-body",hovered:"iui-grid-column-body-hovered",selected:"iui-grid-column-body-selected"},footer:{content:"iui-grid-column-footer-cell-content",
disabled:"iui-grid-column-footer-disabled",normal:"iui-grid-column-footer",hovered:"iui-grid-column-footer-hovered",selected:"iui-grid-column-footer-selected"}},row:{general:{disabled:"iui-grid-row-disabled",focused:"iui-grid-row-focused",normal:"iui-grid-row",hovered:"iui-grid-row-hovered",selected:"iui-grid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-grid-expand-box",animated:"iui-grid-expand-box-load",expanded:"iui-grid-expand-box-open",collapsed:"iui-grid-expand-box-close"},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"},fixed:{disabled:"iui-grid-row-fixed-disabled",normal:"iui-grid-row-fixed",
hovered:"iui-grid-row-fixed-hovered"}},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"}};this.updateGrouping=function(b){a.options.grouping=b?{enabled:h.isFieldAvailable(b.enabled,!1),showColumns:h.isFieldAvailable(b.showColumns,!1)}:{enabled:!1,showColumns:!1}};this.updatePaging=function(b){a.options.paging=
b?{enabled:h.isFieldAvailable(b.enabled,!1),showControlPanel:h.isFieldAvailable(b.showControlPanel,!0),pageSize:h.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:h.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:h.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:h.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:h.isFieldAvailable(b.allowDrag,!1),allowDrop:h.isFieldAvailable(b.allowDrop,!0),
allowFilter:h.isFieldAvailable(b.allowFilter,!1),allowFocus:h.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:h.isFieldAvailable(b.autoExpand,!0),autoUpdate:h.isFieldAvailable(b.autoUpdate,!0),controlStyle:a.defaultStyle,displayMode:h.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:h.isFieldAvailable(b.enabled,!0),expandColIndex:h.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:h.isFieldAvailable(b.fillSpace,
!1),gridLines:h.isFieldAvailable(b.gridLines,"both"),hoverSelection:h.isFieldAvailable(b.hoverSelection,!1),indent:h.isFieldAvailable(b.indent,15),labelEdit:h.isFieldAvailable(b.labelEdit,!1),loadRows:[],mouseWheelSpeed:h.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:h.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:h.isFieldAvailable(b.rowHeight,-1),rtl:h.isFieldAvailable(b.rtl,!1),selectedColumn:h.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:
null),selectedIndex:-1,selectedRow:h.isFieldAvailable(b.selectedRow,a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:h.isFieldAvailable(b.selectionMode,"one"),showFooter:h.isFieldAvailable(b.showFooter,!0),showHeader:h.isFieldAvailable(b.showHeader,!0),showIcons:h.isFieldAvailable(b.showIcons,!0),sorting:h.isFieldAvailable(b.sorting,"none")},a.updateGrouping(b.grouping),a.updatePaging(b.paging),a.updateDataFields(b.dataFields),
a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoUpdate:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,
selectedRow:null,selectedRows:[],selectionMode:"one",showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updateGrouping(),a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",allowGrouping:b.allowGrouping?b.allowGrouping:"allowGrouping",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:
"cellTemplateUrl",columns:b.columns?b.columns:"columns",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:
"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",groupText:b.groupText?
b.groupText:"groupText",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.columns?b.columns:"columns",
pid:b.pid?b.pid:"pid",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",allowGrouping:"allowGrouping",cellTemplateUrl:"cellTemplateUrl",columns:"columns",comparer:"comparer",contentAlignment:"contentAlignment",
contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",footerTemplateModel:"footerTemplateModel",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerText:"footerText",footerTooltip:"footerTooltip",groupText:"groupText",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",
headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",objects:"columns",pid:"pid",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",
allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?
b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",
tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.getRowFields(a.options.rowFields))};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?
b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),
a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,e){a.columnsObj.insertAt(e,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,e,c){a.columnsObj.insertAt(e,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,e,c){a.columnsObj.insertByRef(e,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,e,c){a.columnsObj.insertByRef(e,
c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,e){a.columnsObj.removeAt(e,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,e){a.columnsObj.removeAt(null,e,null,a.columnIsRemoved)});this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-group",
function(b,e){0>a.groupsObj.getList().indexOf(e)&&a.groupsObj.insertAt(e,-1,null,a.groupIsAdded)});c.$on(c.name+"-clear-groups",function(b){a.groupsObj.clear(null,a.groupsAreCleared)});c.$on(c.name+"-insert-group-at",function(b,e,c){0>a.groupsObj.getList().indexOf(e)&&a.groupsObj.insertAt(e,c,null,a.groupIsAdded)});c.$on(c.name+"-insert-group-after",function(b,e,c){0>a.groupsObj.getList().indexOf(e)&&a.groupsObj.insertByRef(e,c,!0,a.groupIsAdded)});c.$on(c.name+"-insert-group-before",function(b,e,
c){0>a.groupsObj.getList().indexOf(e)&&a.groupsObj.insertByRef(e,c,!1,a.groupIsAdded)});c.$on(c.name+"-remove-group",function(b,e){a.groupsObj.removeAt(e,-1,null,a.groupIsRemoved)});c.$on(c.name+"-remove-group-at",function(b,e){a.groupsObj.removeAt(null,e,null,a.groupIsRemoved)});this.groupsAreCleared=function(){a.updateLayout();a.callGroupChange()};a.groupIsAdded=function(b){a.updateLayout();a.callGroupChange(b)};a.groupIsRemoved=function(b){a.updateLayout();a.callGroupChange(b)};c.$on(c.name+"-add-row",
function(b,e){a.rowsObj.insertAt(e,-1,null,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b){a.rowsObj.clear(null,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,e,c){a.rowsObj.insertAt(e,c,null,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,e,c){a.rowsObj.insertByRef(e,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,e,c){a.rowsObj.insertByRef(e,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,e){a.rowsObj.removeAt(e,-1,null,a.rowIsRemoved)});
c.$on(c.name+"-remove-row-at",function(b,e){a.rowsObj.removeAt(null,e,null,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.groups=[];a.groupList=[];a.groupLevel=-1;this.updateGroupList=function(){a.groupList.length=0;var b=a.groupsObj.getList();
b&&(a.groups=b);if(a.options.grouping.enabled&&0<a.groups.length&&(b=a.rowsObj.getList()))for(var e=0;e<b.length;e++){var c=b[e],y=c[a.options.rowFields.cells];if(y&&0<y.length){for(var f,h=null,l=0;l<a.groups.length;l++){f=a.groups[l];f=f[a.options.columnFields.id];var m=l;f&&(m=a.getCellIndexById(y,l,f));if(0<=m&&m<y.length){(f=y[m][a.options.cellFields.text])&&""!=f||(f=void 0!=y[m][a.options.cellFields.value]?y[m][a.options.cellFields.value].toString():"undefined");var m=null,n=a.groupList;h&&
(n=h[a.options.rowFields.rows]);if(n)for(var r=0;r<n.length;r++)if(n[r][a.options.rowFields.text]==f){m=n[r];break}m||(m={},m[a.options.rowFields.text]=f,m[a.options.rowFields.cells]=[{cid:a.columnList[a.options.expandColIndex][a.options.columnFields.id],text:f}],m.type="group",h?(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(m)):a.groupList.push(m));h=m}}h&&(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(c))}}};
this.callGroupRemoving=function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a}):c.groupRemoving({e:{group:a}})};this.callGroupRemoved=function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?c.events.groupRemoved({group:a}):c.groupRemoved({e:{group:a}})};this.callGroupChange=function(a){angular.isDefined(c.events)&&c.events.groupChange?c.events.groupChange({group:a}):c.groupChange({e:{group:a}})};a.columnList=[];a.columnFilterList=[];a.completeColumnList=
[];a.currentColumnList=[];a.maxColumnLevels=0;a.relatedColumns=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var Tc=function(b,e){if(b&&0!=b.length)for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(a.maxColumnLevels<e&&(a.maxColumnLevels=e),Tc(b[c][a.options.columnFields.columns],e+1))},H=function(b){var e=0;if(!b[a.options.columnFields.columns]||0==b[a.options.columnFields.columns].length)return 1;for(var c=0;c<b[a.options.columnFields.columns].length;c++)e+=H(b[a.options.columnFields.columns][c]);
return e};this.isColumnWithChildenVisible=function(b){var e=!1;if(b&&(e=a.isColumnVisible(b))&&(b=b[a.options.columnFields.columns])&&0<b.length){for(var c=e=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&e++;e=0<e?!0:!1}return e};var Da=function(b,e,c){if(b)for(var q=0;q<b.length;){if(a.isColumnWithChildenVisible(b[q])){c&&(b[q][a.options.columnFields.pid]=c);var f={colSpan:b[q][a.options.columnFields.columns]?H(b[q]):0,column:b[q],isRoot:0==e?!0:!1,rowSpan:b[q][a.options.columnFields.columns]&&
0!=b[q][a.options.columnFields.columns].length?0:a.maxColumnLevels-e};a.completeColumnList[e].push(f);Da(b[q][a.options.columnFields.columns],e+1,b[q][a.options.columnFields.id])}q++}};this.updateColumnCompleteList=function(){Tc(a.currentColumnList,1);for(var b=1;b<=a.maxColumnLevels;b++)a.completeColumnList.push([]);Da(a.currentColumnList,0)};var P=function(b){b.type="column";b[a.options.columnFields.id]||(b[a.options.columnFields.id]=h.getUniqueId());if(a.isColumnWithChildenVisible(b))if(b[a.options.columnFields.columns])for(var e=
0;e<b[a.options.columnFields.columns].length;e++)P(b[a.options.columnFields.columns][e]);else e=!0,a.options.grouping.enabled&&(e=0<=a.groups.indexOf(b)?a.options.grouping.showColumns:!0),e&&(e=(e=b[a.options.columnFields.filterParams])?uc.createTree(e.conditions,e.formula):null,a.columnFilterList.push({cid:b[a.options.columnFields.id],tree:e}),a.columnList.push(b))};this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.completeColumnList.length=0;a.currentColumnList.length=
0;a.maxColumnLevels=0;a.relatedColumns.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b){for(var e=0;e<b.length;e++){var c=b[e];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=h.getUniqueId());if(a.isColumnWithChildenVisible(c))switch(a.currentColumnList.push(c),c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=
!0)}}a.updateColumnCompleteList();for(e=0;e<a.currentColumnList.length;e++)P(a.currentColumnList[e])}b=a.columnRelationsObj.getList();E(b)};var E=function(b,e){if(b)for(var c=0;c<b.length;c++)a.isRootColumn(b[c].column)&&(b[c].id||(b[c].id=h.getUniqueId()),e&&(b[c].pid=e),a.relatedColumns.push(b[c]),b[c].children&&E(b[c].children,b[c].id))};this.isRootColumn=function(b){var e=!1;if(b&&a.completeColumnList&&0<a.completeColumnList.length)for(var c=0;c<a.completeColumnList[0].length;c++){var y=a.completeColumnList[0][c].column;
if(y==b||h.isEqual(y[a.options.columnFields.id],b[a.options.columnFields.id])){e=!0;break}}return e};this.isColumnRelated=function(b){var e=!1;if(b&&a.relatedColumns)for(var c=0;c<a.relatedColumns.length;c++){var y=a.relatedColumns[c].column;if(y&&(y==b||h.isEqual(y[a.options.columnFields.id],b[a.options.columnFields.id]))){e=!0;break}}return e};this.getColumnRelatedObject=function(b){for(var e=null,c=0;c<a.relatedColumns.length;c++){var y=a.relatedColumns[c];if(y.column&&(y.column==b||h.isEqual(y.column[a.options.columnFields.id],
b[a.options.columnFields.id]))){e=y;break}}return e};this.isTherePrevRelatedColumn=function(b){var e=a.relatedColumns.indexOf(b);return 0<e&&(a.relatedColumns[e-1].id==b.pid||b.pid&&b.pid==a.relatedColumns[e-1].pid)?!0:!1};this.isThereNextRelatedColumn=function(b){var e=a.relatedColumns.indexOf(b);return 0<=e&&e<a.relatedColumns.length-1&&(b.children&&0<b.children.length||b.pid&&b.pid==a.relatedColumns[e+1].pid)?!0:!1};var jb=function(b){for(var e=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==
b){e=a.columnFilterList[c].tree;break}return e},Sa=function(b,e){if(0==a.options.allowFilter||"group"==b.type)return!0;var c=!0;if(b)for(var y,f,h,l=0;l<b[a.options.rowFields.cells].length;l++){c=!0;h=b[a.options.rowFields.cells][l];y=h[a.options.cellFields.cid];f=a.getColumnById(y);!f&&l<a.columnList.length&&(f=a.columnList[l]);if(f&&f[a.options.columnFields.filterParams]){f=f[a.options.columnFields.filterParams];var m=h[a.options.cellFields.value]?h[a.options.cellFields.value]:h[a.options.cellFields.text];
f&&(c=f.callback?f.callback(m,h,b):uc.match(m,f.conditions,f.formula,jb(y),f.caseSensitive))}if(!c)break}return c},za=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var e=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=
0;c<b.length;c++)if(Sa(b[c])&&!a.isRowFixed(b[c])){e=!0;break}return e};var kb=function(b,e,c,y){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var q=b[a.options.rowFields.cells];if(q&&0<q.length){c=Sa(b,y);for(var f,l,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];f=m[a.options.columnFields.id];l=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var r=n;f&&(r=a.getCellIndexById(q,
n,f));0<=r&&r<q.length&&(q[r].type="cell",q[r][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(q[r],l,m))}}if(c)if(y)a.fullList.push(b),a.fullIndentList.push(e);else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:e}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:e}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);
break;case "bottom":a.currentBottomList.push(b);break;default:a.currentList.push(b),a.indentList.push(e)}return c},zb=function(b,e,c,y){if(!b[a.options.rowFields.rows])return c=kb(b,e,c,y);if((c=kb(b,e,c,y))&&!a.isRowFixed(b)){var q=0,f;if("group"==b.type&&(y||a.isRowExpanded(b))){var h=b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var l=0;l<h.length;l++)(f=zb(h[l],e+za,b[a.options.rowFields.id],y))&&q++}}y||a.isThereChildRows||!(0<q||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<
b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),e=0;e<b.length;e++)zb(b[e],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=
0;a.currentTopList.length=0;a.currentBottomList.length=0;za=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var e=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(e=a.groupList);if(e)for(a.applySorting(e),b=0;b<
e.length;b++)zb(e[b],0,null,!1)}};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;za=a.options.indent;var b=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(b=a.groupList);if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var e=0;e<b.length;e++)zb(b[e],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&
c.events.clearColumns?c.events.clearColumns():c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&
c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.groupEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearGroups?c.events.clearGroups():c.clearGroups(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.groupAdded?c.events.groupAdded({group:a.e.group}):c.groupAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.groupAdding?c.events.groupAdding({group:a.e.group}):c.groupAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&
c.events.groupRemoved?c.events.groupRemoved({group:a.e.group}):c.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a.e.group}):c.groupRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows():c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&
c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",
subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new ra({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new ra({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.groupsObj=new ra({objects:c.groups,events:a.groupEvents,fields:a.options.columnFields});a.columnRelationsObj=new ra({objects:c.columnRelations,fields:a.options.columnFields});c.$on(c.name+"-load-data",function(b,e,c){a.loadData(e,c)});c.$on(c.name+
"-export-json",function(b,e,c,y){m.setTempData(a.exportToJSON(e,c,y))});this.exportToJSON=function(b,e,c){var q=c,q=q?q:null,f=a.columnsObj.getList();b=JSON.stringify(f,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.allowGrouping,a.options.columnFields.cellTemplateUrl,a.options.columnFields.columns,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,
a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerText,a.options.columnFields.footerTooltip,a.options.columnFields.groupText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,
a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.pid,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],q);c=c?c:null;q=a.getFullList();e=JSON.stringify(q,e?e:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,
a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.cellFields.rid],c);return'[\n{ "columns": '+b+' },\n{ "rows": '+e+" }\n]"};this.loadData=function(b,e){a.suspendLayout();
a.updateDataFields(e);a.rowsObj.clear(null,a.rowsAreCleared);if(angular.isDefined(c.rows))for(var q=c.rows.length=0;q<b.length;q++)c.rows.push(b[q]);a.rowsObj=new ra({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new ra({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var I=!1;this.dragDropStatus=function(a){if(void 0!=
a)I=a;else return I};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:null};var Uc=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:
a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getGridName=function(){return angular.isDefined(c.name)?c.name:""};f.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var e=r.getData();e.source||(e.source=a.getDnDSource(b));b={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:e.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});f.bind("dragover",function(b){b.preventDefault();
if(!a.options.enabled||!a.isDropInRange(b)||a.options.grouping.enabled&&0<a.groups.length)a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");else{var e=!0;b.dataTransfer?e="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(e="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(e)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?"move":
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),e=r.getData(),e.source||(e.source=a.getDnDSource(b)),r.setData({source:e.source,sourceCtrl:e.sourceCtrl,target:null,dropPos:-1}),e={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},0==a.callDragOver(e))b.dataTransfer?b.dataTransfer.dropEffect=
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{e=a.getMousePos(b);b=e.y+16;var e=e.x+20,q=a.getDropMarkWindow();q.empty();q.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"Grid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:e});a.dropMark(!0)}}});f.bind("drop",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var e=
!0;b.dataTransfer?e="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(e="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(e&&(e=r.getData(),e.source||(e.source=a.getDnDSource(b)),e.source)){var q={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(q)&&(a.drop(e),c.$$phase||c.$apply())}}r.clearData()}b.stopPropagation()});
f.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var e=r.getData();e.source||(e.source=a.getDnDSource(b));b={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:e.target,mousePos:a.getMousePos(b)};a.callDragLeave(b);a.cancelScrollTimer()}});f.bind("dragend",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),r.getData().source||r.clearData(),a.dragDropStatus(!1))});f.bind("mouseleave",function(b){b.preventDefault();
a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,e){return r.hitTest(a,e,{left:0,top:0,right:f[0].clientWidth,bottom:f[0].clientHeight})};this.isPopupActive=function(){return!1};var Jb=function(b,e){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var f={};f[a.options.cellFields.text]=b[e.text];b[c.cells].push(f)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[e.items]&&0<b[e.items].length)for(f=0;f<b[e.items].length;f++)b[c.rows].push(Jb(b[e.items][f],
e));return b},M=function(b,e){var c=!1;e.sourceCtrl&&(c=e.sourceCollection.removeAt(b,-1,null,e.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Jb(b,e.sourceCtrl.options.dataFields)),1===e.dropPos||2===e.dropPos?1===e.dropPos?a.rowsObj.insertByRef(b,e.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,e.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,e){var c=b;!c&&0<=e&&e<a.currentList.length&&(c=a.currentList[e]);a.clearPrevSelection(c);a.rowSelection(c)};
this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var e=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var f=[],h=0;h<b.source.length;h++){for(var l=!1,m=b.sourceCollection.getParent(b.source[h]);m;){if(b.sourceCtrl.isObjInSelList(m)){l=!0;break}m=b.sourceCollection.getParent(m)}l||f.push(b.source[h])}if(0<f.length)if(e=f[f.length-1],h=b.sourceCtrl.getObjCurrentIndex(f[0]),
l=b.sourceCtrl.getObjCurrentIndex(e),h<=l)for(h=0;h<f.length;h++)M(f[h],b);else for(h=f.length-1;0<=h;h--)M(f[h],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),M(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());b.sourceCtrl.multiSelection(!1);var r=n(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(e);a.updateFocus(a.getObjCurrentIndex(e),
0);n.cancel(r)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&"row"==b.type&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isDropAllowed=function(b,e,c){if((c=a.options.allowDrop)&&b&&e&&(c=a.isRowFixed(e)||"row"!=e.type||!e[a.options.rowFields.allowDrop]&&void 0!==e[a.options.rowFields.allowDrop]?!1:!0))if(Array.isArray(b))for(var q=0;q<b.length;q++){if(b[q][a.options.rowFields.pid]&&e[a.options.rowFields.pid]&&
!h.isEqual(b[q][a.options.rowFields.pid],e[a.options.rowFields.pid])){c=!1;break}else if(h.isEqual(b[q][a.options.rowFields.id],e[a.options.rowFields.id])){c=!1;break}if(!c)break}else b[a.options.rowFields.pid]&&e[a.options.rowFields.pid]&&!h.isEqual(b[a.options.rowFields.pid],e[a.options.rowFields.pid])?c=!1:h.isEqual(b[a.options.rowFields.id],e[a.options.rowFields.id])&&(c=!1);return c};this.getDropMarkWindow=function(){for(var a=Uc,e=angular.element(document.body).children(),c=0;c<e.length;c++){var f=
angular.element(e[c]);if(f[0].attributes&&f[0].attributes["data-element"]&&"dropmark"===f[0].attributes["data-element"].value){a=f;break}}return a};this.dropMark=function(b,e){e||(e=a.getDropMarkWindow());if(e){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(e).css("display",c)}};this.updateDropMarkElem=function(a,e){a&&e&&(a.css("top",e.top+"px"),a.css("left",e.left+"px"),a.css("width",e.width+"px"))};c.$on(c.name+"-open-editor",function(b,e){a.openEditor(e)});c.$on(c.name+
"-close-editor",function(b,e){a.closeEditor(e)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:h.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=
function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):
c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,e,q){var f=!0;a.allowEvents&&(f=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:e,value:q}):c.cellvalueChanging({e:{row:b,cell:e,value:q}}));return f};this.callCellValueChanged=function(b,e,q){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,cell:e,value:q}):c.cellvalueChanged({e:{row:b,cell:e,value:q}}))};this.callChange=function(){angular.isDefined(c.events)&&
c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,e){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:e});c.columnClick({e:{column:a,mousePos:e}})};this.callColumnDblClick=function(a,e){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:e});c.columnDblclick({e:{column:a,mousePos:e}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});
c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,e){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:e}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:e}})};this.callColumnPosChanged=function(a,e){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,targetColumn:e});c.columnPoschanged({e:{sourceColumn:a,targetColumn:e}})};this.callColumnRightClick=function(a,
e){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:e});c.columnRightclick({e:{column:a,mousePos:e}})};this.callColumnSizeChanged=function(a,e){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,
targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var e=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:e,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):
c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:e,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var e=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:e,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,
mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:e,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceCtrl:a.sourceCtrl,
dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,e,q,f){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:e,cell:q,mousePos:f});c.cellClick({e:{event:a,row:e,cell:q,mousePos:f}})};this.callCellHover=function(a,e){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:e}):c.cellHover({e:{event:a,cell:e}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?
c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,e,q){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:e,mousePos:q}):c.rowClick({e:{event:a,row:e,mousePos:q}})};this.callRowDblClick=function(a,e){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:e}):c.rowDblclick({e:{row:a,mousePos:e}})};this.callRowHover=function(a,e){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,
row:e}):c.rowHover({e:{event:a,row:e}})};this.callRowRightClick=function(a,e){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:e});c.rowRightclick({e:{row:a,mousePos:e}})};this.callKeyDown=function(a,e){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:e}):c.keyDown({e:{event:a,row:e}})};this.callKeyPress=function(a,e){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:e}):c.keyPress({e:{event:a,row:e}})};
this.callKeyUp=function(a,e){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:e}):c.keyUp({e:{event:a,row:e}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};f.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});f.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&
a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});f.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];this.suppressWatchScrollVisibility=!1;var ac=function(b,e,c){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var q=b[a.options.rowFields.cells];
if(q&&0<q.length){c=Sa(b);for(var f,l,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];f=m[a.options.columnFields.id];l=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var r=n;f&&(r=a.getCellIndexById(q,n,f));0<=r&&r<q.length&&(q[r].type="cell",a.setDefaultCellValue(q[r],l,m))}}c&&(a.expandList.push(b),a.expandIndentList.push(e));return c},C=function(b,e,c){if(!b[a.options.rowFields.rows])return c=ac(b,e+za,c);if(c=ac(b,e+za,c)){var q=0,f;if("group"==b.type&&a.isRowExpanded(b)){var h=
b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var l=0;l<h.length;l++)(f=C(h[l],e+za,b[a.options.rowFields.id]))&&q++}}!a.isThereChildRows&&(0<q||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var e=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)C(b[c],
a.indentList[e],null)}if(0<a.expandList.length){a.allowEvents=!1;e++;Array.prototype.splice.apply(a.currentList,[e,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[e,0].concat(a.expandIndentList));a.getRowScope()?a.updateView():a.updateLayout();var f=n(function(){a.suppressWatchScrollVisibility=!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=n(function(){a.suppressWatchScrollVisibility=!1;n.cancel(b)},10);n.cancel(f)},
1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var e=null,c=!1,f=b,h=-1,l=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){e=a.getList(b);for(h=e.indexOf(f)+1;!c&&h<e.length;)f=e[h],0<a.getRowCurrentIndex(f)&&(c=!0),h++;c||(f=b);b=a.getParent(b)}if(!c&&f)for(e=a.getList(),a.options.grouping.enabled&&0<a.groups.length&&(e=a.groupList),h=e.indexOf(f)+1;h<e.length;)if(f=e[h],0<a.getRowCurrentIndex(f)){c=!0;break}else h++;l++;e=a.currentList.length-
l;c&&(e=a.getRowCurrentIndex(f)-l);if(0<e){a.currentList.splice(l,e);a.indentList.splice(l,e);a.getRowScope()?a.updateView():a.updateLayout();var m=n(function(){a.suppressWatchScrollVisibility=!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=n(function(){a.suppressWatchScrollVisibility=!1;n.cancel(b)},10);n.cancel(m)},1)}}};this.toggle=function(b,e){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&
!(e&&0!=b[a.options.rowFields.expanded]||!1===e&&0==b[a.options.rowFields.expanded])){a.updateType="view";var c=void 0!==e?e:!1!==b[a.options.rowFields.expanded]?!0:!1,c=void 0!=e?e:!c;c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c)}}else{for(var c=a.getFullList(),f=0;f<c.length;f++)c[f][a.options.rowFields.expanded]=e;a.updateCurrentLayout()}};this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",
function(b,e,c){a.filter(e,c)});this.filter=function(b,e){if(b)b[a.options.columnFields.filterParams]=e;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,e,f,h,l){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:e,cell:f,edit:void 0!=h?!0:!1,editValue:l}):c.gotFocus({e:{event:a,row:e,cell:f,edit:void 0!=h?!0:!1,editValue:l}})};this.callLostFocus=
function(a,e,f,h,l){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:e,cell:f,edit:void 0!=h?!0:!1,editValue:l}):c.lostFocus({e:{event:a,row:e,cell:f,edit:void 0!=h?!0:!1,editValue:l}})};this.getTabIndex=function(){return f[0].attributes&&f[0].attributes.tabindex?f[0].attributes.tabindex.value:""};this.updateFocus=function(b,e){if(1==a.options.allowFocus)var c=n(function(){if(a.isRowIndexInRange(b)){var q="none";0<=e&&e<a.columnList.length&&(q=a.columnList[e][a.options.columnFields.fixed]);
var h=a.getElemFromRow(a.currentList[b],q);h&&(1==a.options.allowCellFocus&&0<=e&&e<a.columnList.length?(q=a.getElemFromCell(b,e,q))&&q[0].focus():h[0].focus())}else f[0].focus();n.cancel(c)},5)};c.$on(c.name+"-focus",function(b,e){if(e)switch(e.type){case "group":var c=a.getRowCurrentIndex(e);a.updateFocus(c);break;case "row":c=a.getRowCurrentIndex(e);a.updateFocus(c);break;case "cell":c=a.getCellRowIndex(e);var f=a.getCellColumnIndex(e);a.updateFocus(c,f)}else a.updateFocus()});var G=!1;this.getCell=
function(b,e){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(e);0<=e&&e<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],e,a.columnList[e].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellObject=function(b,e){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(e);0<=e&&e<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],
e,a.columnList[e].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellIndexById=function(b,c,f){var e=-1;if(b){c=a.getColumnRealIndex(c);for(var q=0;q<b.length;q++)if(void 0==b[q][a.options.cellFields.cid]){e=c;break}else if(b[q][a.options.cellFields.cid]==f){e=q;break}}return e};this.getCellIndexFromRow=function(b,c){var e=-1;if(b&&c&&c[a.options.rowFields.cells])for(var f=0;f<c[a.options.rowFields.cells].length;f++)if(c[a.options.rowFields.cells][f]==
b){e=f;break}return e};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var c=a.findRowById(b[a.options.cellFields.rid]);if(c&&(c=c[a.options.rowFields.cells])&&0<c.length)return c.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&
(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var c=null,f=0;f<a.columnList.length;f++)if(a.columnList[f][a.options.columnFields.id]==b){c=a.columnList[f];break}return c};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?
!0:!1:!0};this.getContentElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length)for(var e=a.children(),f=0;f<e.length;f++){var h=angular.element(e.eq(f));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}return b};this.getElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var e=a.children(),f=0;f<e.length;f++){var h=angular.element(e.eq(f));if(h[0].attributes&&
h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}}return b};this.getChildElement=function(a,c){var b=null;c||(c="content");if(a&&0<a.children().length)for(var e=a.children(),f=0;f<e.length;f++){var h=angular.element(e.eq(f));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}return b};this.getElemFromColumn=function(b,c,f){var e=null;if(b){b=a.getColumnCurrentIndex(b);var q=a.getHeaderElem(c);"footer"==f&&
(q=a.getFooterElem(c));if(q&&(c=q.find("td"))&&0<c.length)for(f=0;f<c.length;f++)if(q=angular.element(c[f]),q[0].attributes["data-index"]&&q[0].attributes["data-index"].value.toString()===b.toString()){e=q;break}}return e};this.getElemFromRow=function(b,c,f){var e=null;if(b&&(b=a.getRowCurrentIndex(b,f),(c=a.getRowElems(c,f))&&0<c.length))for(f=0;f<c.length;f++){var q=angular.element(c[f]);if(q[0].attributes["data-index"]&&q[0].attributes["data-index"].value.toString()===b.toString()){e=q;break}}return e};
this.getElemFromCell=function(b,c,f,h){var e=null;if(a.isRowIndexInRange(b,h)){switch(h){case "top":b=a.getElemFromRow(a.currentTopList[b],f,h);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],f,h);break;default:b=a.getElemFromRow(a.currentList[b],f,h)}if(b&&(b=b.find("td"))&&0<b.length)for(f=0;f<b.length;f++)if(h=angular.element(b[f]),h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===c.toString()){e=h;break}}return e};this.getElemFromColumnCell=function(b,
c,f,h,l){var e=null;b=a.getColumnCompleteIndex(b);if((c=f?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(f=0;f<c.length;f++){var q=angular.element(c[f]);switch(h){case "column-expand-cell":q[0].attributes["data-element"]&&q[0].attributes["data-element"].value.toString()==h&&q[0].attributes["data-level"]&&q[0].attributes["data-level"].value.toString()===b.level.toString()&&q[0].attributes["data-index"]&&q[0].attributes["data-index"].value.toString()===b.index.toString()&&
(e=q);break;case "column-footer":q[0].attributes["data-index"]&&q[0].attributes["data-index"].value.toString()===l.toString()&&(e=q);break;default:q[0].attributes["data-level"]&&q[0].attributes["data-level"].value.toString()===b.level.toString()&&q[0].attributes["data-index"]&&q[0].attributes["data-index"].value.toString()===b.index.toString()&&(e=q)}}return e};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=a.options.indent,parent=a.rowsObj.getParent(parent);
return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "group":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b.selected)return"selected";if(b==a.hoverRow)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";
if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;var e=null;var f="left";for(var l=0;!e&&3>l;){if(f=a.getHeaderElem(f)){var m=f.find("td");if(m&&0<m.length)for(var n=0;n<m.length;n++){f=angular.element(m[n]);var r=h.getPageRect(f);if(h.checkHit(b,
c,r)){e=a.getColumnFromElem(f);break}}}l++;f=1==l?"right":"none"}return e};this.getCellAt=function(b,c){var e=null,f=a.getRowAt(b,c);if(f){var l=a.getElemFromRow(f).find("td");if(l&&0<l.length)for(var m=0;m<l.length;m++){var n=angular.element(l[m]);var r=h.getPageRect(n);if(h.checkHit(b,c,r)&&(e=a.getRowCurrentIndex(f),n=a.getIndexFromElem(n),e=a.getCellObject(e,n)))break}}return e};this.getRowAt=function(b,c){var e=null;var f="none";for(var l=0;!e&&3>l;){var m=a.getRowElems(f);if(m&&0<m.length)for(var n=
0;n<m.length;n++){f=angular.element(m[n]);var r=h.getPageRect(f);if(h.checkHit(b,c,r)){e=a.getRowFromElem(f);break}}l++;f=1==l?"left":"right"}return e};this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=
function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?a.getRowFromElem(b):null}return null};this.getColumnCompleteIndex=function(b){var c={level:-1,index:-1};if(b&&a.completeColumnList)for(var f=0;f<a.completeColumnList.length;f++){for(var l=0;l<a.completeColumnList[f].length;l++){var m=a.completeColumnList[f][l];if(m.column==b||h.isEqual(m.column[a.options.columnFields.id],b[a.options.columnFields.id])){c={level:f,index:l};
break}}if(0<=c.index)break}return c};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.columnsObj.getList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-level"]&&
b[0].attributes["data-index"]){var c=b[0].attributes["data-level"].value;b=b[0].attributes["data-index"].value;if(0<=c&&c<a.completeColumnList.length&&0<=b&&b<a.completeColumnList[c].length)return a.completeColumnList[c][b].column}return null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,
f="none";b&&b[0].attributes["data-fixed"]&&(f=b[0].attributes["data-fixed"].value);switch(f){case "top":if(a.isRowIndexInRange(c,f))return a.currentTopList[c];break;case "bottom":if(a.isRowIndexInRange(c,f))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};this.isColumnVisible=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=
b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&h.isEnabled(b[a.options.rowFields.enabled])};this.mouseButtonStatus=function(a){G=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){m.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-text",function(b,c){m.setTempData(a.findRowByText(c))});
c.$on(c.name+"-get-list",function(b,c){m.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){m.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,c){if(b){for(var e=[],f=a.getParent(b);f;)e.push(f),f=a.getParent(f);for(f=e.length-1;0<=f;f--)e[f][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var h=n(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);n.cancel(h)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};
this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.findParent=function(b,c){var e=null;if(b&&c)for(var f=0;!e&&f<c.length;)e=c[f][a.options.rowFields.id]&&b[a.options.rowFields.pid]&&c[f][a.options.rowFields.id].toString()===b[a.options.rowFields.pid].toString()?c[f]:a.findParent(b,c[f][a.options.rowFields.rows]),f++;return e};this.getParent=function(b){return b?a.findParent(b,a.groupList):
null};this.getList=function(b){return a.rowsObj.getList(b)};this.findParentColumn=function(b){var c=null;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var h=0;h<a.completeColumnList[f].length;h++){var l=a.completeColumnList[f][h].column;if(l[a.options.columnFields.id]&&b[a.options.columnFields.pid]&&l[a.options.columnFields.id].toString()===b[a.options.columnFields.pid].toString()){c=l;break}}if(c)break}return c};this.getParentColumn=function(b){return b?a.findParentColumn(b):null};this.getColumnLevel=
function(b){var c=-1;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var l=0;l<a.completeColumnList[f].length;l++){var m=a.completeColumnList[f][l].column;if(m==b||h.isEqual(m[a.options.columnFields.id],b[a.options.columnFields.id])){c=f;break}}if(0<=c)break}return c};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=
b;b--)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);
break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};f.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});
this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,f){a.refresh(c,f)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});
c.$on(c.name+"-begin-load",function(b,c){a.beginLoad(c)});c.$on(c.name+"-end-load",function(b){a.endLoad()});this.callLoadComplete=function(){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){m.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});
c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&
(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){m.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){m.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});
c.$on(c.name+"-scroll-to",function(b,c,f){a.scrollTo(c,f)});var J=!1;this.shiftFirstSelectedRow=null;this.multiSelection=function(a){if(void 0!=a)J=a;else return J};this.columnSelection=function(b,e){if(b){var f=!0;a.options.selectedColumn&&(f=!h.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var l=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});f&&!1!==l&&(a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=
!1,a.refresh(a.options.selectedColumn)),a.options.selectedColumn=b,b[a.options.columnFields.selected]=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return h.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!h.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=
!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.rowSelection=function(b,e,f,l,m){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var q=a.rowSelection(),n=!0;q&&(n=!h.isEqual(q[a.options.rowFields.id],b[a.options.rowFields.id]));var r=!0,r=angular.isDefined(c.events)&&
c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==r)if(f=e||f||l?!0:!1,n){n=!0;"multi-extended"==a.options.selectionMode&&(n=!a.isObjInSelList(b)||!f||e);n&&("one"==a.options.selectionMode?a.clearPrevSelection():G&&e?a.clearPrevSelection():J||f||"multi-simple"===a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(G&&e&&"one"!=a.options.selectionMode){if(a.shiftFirstSelectedRow||(a.shiftFirstSelectedRow=q),e=a.getRowCurrentIndex(a.shiftFirstSelectedRow),
m=a.getRowCurrentIndex(b),e>m&&(q=e,e=m,m=q),a.isRowIndexInRange(e)&&a.isRowIndexInRange(m))for(;e<=m;e++)a.currentList[e][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[e])}else G&&(J||f||"multi-simple"===a.options.selectionMode)?(e=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],b[a.options.rowFields.selected]=!e,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):
a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b)),a.shiftFirstSelectedRow=null;angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else J||f||"multi-simple"===a.options.selectionMode?(e=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],m&&"undefined"!==m&&(e=m),b[a.options.rowFields.selected]=
!e,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.shiftFirstSelectedRow=null,a.callAfterSelect(b),a.refresh(null,null,!0)):J||f||"multi-simple"===a.options.selectionMode||(f||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b),a.shiftFirstSelectedRow=null)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,f){b=
b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!f&&!J&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,f=a.options.selectedRows;if(b&&f)for(var l=0;l<f.length;l++)if(h.isEqual(f[l][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&
(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?m.setTempData(a.hoverColumn):c&&m.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){m.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",function(b){m.setTempData(a.rowSelection())});
c.$on(c.name+"-set-selected-row",function(b,c){var e=n(function(){a.rowSelection(c);n.cancel(e)},1)});c.$on(c.name+"-get-selected-rows",function(b){m.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&n(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=
null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,f){a.moveColumn(c,f)});c.$on(c.name+"-move-row",function(b,c,f,h,l){a.moveRow(c,f,h,l)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",
function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoUpdate",function(b,c){b!==c&&(a.options.autoUpdate=b,a.updateLayout())});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=
b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.grouping.enabled&&a.updateGroupPanel(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",
function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("grouping",function(b,c){b!==c&&(a.updateGrouping(b),a.updateLayout())},!0);c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=
b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();
break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=
b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,f,h){a.sort(c,f,h)});this.sort=function(b,c,f){a.sortColumn=b;a.sortComparer=f;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,f){var e=-1;if(b)for(var h=0;h<b.length;h++)if(void 0==b[h][a.options.cellFields.cid]){e=c;break}else if(b[h][a.options.cellFields.cid]==
f){e=h;break}return e};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),f=0<=c?c:a.options.expandColIndex;if(f<a.columnList.length){var l=a.columnList[f][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?
b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var e=null,m=null;if(b[a.options.rowFields.cells]){var q=a.getCellIndexInCollection(b[a.options.rowFields.cells],f,l);0<=q&&((e=b[a.options.rowFields.cells][q][a.options.cellFields.value])||(e=b[a.options.rowFields.cells][q][a.options.cellFields.text]),h.isObject(e)&&(e=e.value?e.value:e.text))}c[a.options.rowFields.cells]&&(q=a.getCellIndexInCollection(c[a.options.rowFields.cells],f,l),0<=q&&((m=c[a.options.rowFields.cells][q][a.options.cellFields.value])||
(m=c[a.options.rowFields.cells][q][a.options.cellFields.text]),h.isObject(m)&&(m=m.value?m.value:m.text)));e=void 0!=e?e:null;m=void 0!=m?m:null;switch(a.options.sorting){case "ascending":if(e<m)return-1;if(e>m)return 1;break;case "descending":if(e>m)return-1;if(e<m)return 1;break;default:return 0}})}}};var lb=function(b){if(b){var c=h.isFieldAvailable(b.general,"iui-grid-column");var f=(f=b.header)?{content:h.isFieldAvailable(f.content,"iui-grid-column-header-cell-content"),disabled:h.isFieldAvailable(f.disabled,
"iui-grid-column-header-disabled"),normal:h.isFieldAvailable(f.normal,"iui-grid-column-header"),hovered:h.isFieldAvailable(f.hovered,"iui-grid-column-header-hovered"),selected:h.isFieldAvailable(f.selected,"iui-grid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:h.isFieldAvailable(b.content,"iui-grid-column-footer-cell-content"),disabled:h.isFieldAvailable(b.disabled,"iui-grid-column-footer-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-column-footer"),
hovered:h.isFieldAvailable(b.hovered,"iui-grid-column-footer-hovered"),selected:h.isFieldAvailable(b.selected,"iui-grid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:f,footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:h.isFieldAvailable(b.general,"iui-grid-expand-box"),animated:h.isFieldAvailable(b.animated,"iui-grid-expand-box-load"),expanded:h.isFieldAvailable(b.expanded,"iui-grid-expand-box-open"),collapsed:h.isFieldAvailable(b.collapsed,
"iui-grid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Ea=function(b){if(b){var c=(c=b.general)?{disabled:h.isFieldAvailable(c.disabled,"iui-grid-row-disabled"),focused:h.isFieldAvailable(c.focused,"iui-grid-row-focused"),normal:h.isFieldAvailable(c.normal,"iui-grid-row"),hovered:h.isFieldAvailable(c.hovered,"iui-grid-row-hovered"),selected:h.isFieldAvailable(c.selected,"iui-grid-row-selected")}:a.options.controlStyle.row.general;var f=b.checkBox;if(f){var l=h.isFieldAvailable(f.general,
"iui-checkbox");f=(f=f.box)?{general:h.isFieldAvailable(f.general,"iui-checkbox-box"),disabled:h.isFieldAvailable(f.disabled,"iui-checkbox-disabled"),checked:h.isFieldAvailable(f.checked,"iui-checkbox-checked"),indeterminate:h.isFieldAvailable(f.indeterminate,"iui-checkbox-indeterminate"),unchecked:h.isFieldAvailable(f.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box;l={general:l,box:f}}else l=a.options.controlStyle.row.checkBox;var f=a.getExpandBoxStyle(b.expandBox);var m=
(m=b.cell)?{content:h.isFieldAvailable(m.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(m.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(m.disabled,"iui-grid-row-cell-disabled"),focused:h.isFieldAvailable(m.focused,"iui-grid-row-cell-focused"),normal:h.isFieldAvailable(m.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(m.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(m.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?
{disabled:h.isFieldAvailable(b.disabled,"iui-grid-row-fixed-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-fixed"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;return{general:c,checkBox:l,expandBox:f,cell:m,fixed:b}}return a.options.controlStyle.row},mb=function(b){return b?{content:h.isFieldAvailable(b.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(b.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(b.disabled,
"iui-grid-row-cell-disabled"),focused:h.isFieldAvailable(b.focused,"iui-grid-row-cell-focused"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(b.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:h.isFieldAvailable(b.general,"iui-grid"),column:lb(b.column),row:Ea(b.row),cell:mb(b.cell)}:{general:h.isFieldAvailable(a.defaultStyle.general,
"iui-grid"),column:lb(a.defaultStyle.column),row:Ea(a.defaultStyle.row),cell:mb(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,f){var e=a.options.controlStyle.column;b&&b.style&&(e=b.style);b=a.options.controlStyle.column.body;var h=e.body;switch(c){case "header":b=a.options.controlStyle.column.header;h=e.header;break;case "footer":b=a.options.controlStyle.column.footer,h=e.footer}if(f)switch(f){case "content":return h&&h.content?h.content:b.content;case "disabled":return h&&h.disabled?
h.disabled:b.disabled;case "hovered":return h&&h.hovered?h.hovered:b.hovered;case "selected":return h&&h.selected?h.selected:b.selected;default:return h&&h.normal?h.normal:b.normal}else return c?h?h:b:e?e:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var f=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(f=b.style)}if(c){if(h.isString(f.general))return f.general;
if(a.isRowFixed(b))switch(c){case "disabled":return f.fixed&&f.fixed.disabled?f.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return f.fixed&&f.fixed.hovered?f.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return f.fixed&&f.fixed.normal?f.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return f.general&&f.general.disabled?f.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return f.general&&f.general.focused?
f.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return f.general&&f.general.hovered?f.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return f.general&&f.general.selected?f.general.selected:a.options.controlStyle.row.general.selected;default:return f.general&&f.general.normal?f.general.normal:a.options.controlStyle.row.general.normal}}else return f?f:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-grid-row-cell-content"};
this.getDefaultCellLabelClass=function(){return"iui-grid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-grid-lines-both"};this.getCurrentCellStyle=function(b,c,f){var e=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;case "parent":b&&(e=mb(a.getCurrentRowStyle(b)));break;default:c.style&&(e=c.style)}if(f)switch(f){case "content":return e.content?e.content:a.options.controlStyle.cell.content;case "disabled":return e.disabled?e.disabled:
a.options.controlStyle.cell.disabled;case "focused":return e.focused?e.focused:a.options.controlStyle.cell.focused;case "hovered":return e.hovered?e.hovered:a.options.controlStyle.cell.hovered;case "selected":return e.selected?e.selected:a.options.controlStyle.cell.selected;default:return e.normal?e.normal:a.options.controlStyle.cell.normal}else return e?e:a.options.controlStyle.row.cell}}]).directive("iuiGrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window",
"IntegralUIListCtrlService",function(c,f,n,l,B,h,ra){return{restrict:"EA",controller:"IntegralUIGridController",transclude:!0,replace:!0,template:'<div class="iui-grid" data-element="grid"><div class="iui-grid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoUpdate:"=",columns:"=",columnRelations:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",
expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",grouping:"=",groups:"=",hoverSelection:"=",indent:"=",labelEdit:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showFooter:"=",showHeader:"=",showIcons:"=",sorting:"@",afterEdit:"&",afterLabelEdit:"&",afterSelect:"&",beforeEdit:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",
change:"&",clearColumns:"&",clearGroups:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",groupAdded:"&",groupAdding:"&",groupChange:"&",groupRemoved:"&",groupRemoving:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",
rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(m,r,uc,a,Tc){var H=this,Da=r.children().eq(0),P=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),E=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),jb=angular.element('<div class="iui-scrollbar-corner"></div>'),
Sa=null,za=null,kb=null,zb=!1,I=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)zb=a;else return zb};var Uc=function(){var d="iui-grid-block";a.options.showStatusIcons&&(d+=" "+d+"-shift-left");a.options.rtl&&(d+=" "+d+"-rtl");return d};m.$on("$destroy",function(a){H.s2t();ab&&(f.cancel(ab),ab=null);bb&&(f.cancel(bb),bb=null);v&&(v.unbind("mouseenter mouseleave mousemove mouseup"),Jd());Fa&&Fa.unbind("mousedown");r.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");
angular.element(h).unbind("dragenter",Kd);angular.element(h).unbind("dragover",Ld);angular.element(h).unbind("dragend",Md);angular.element(h).unbind("keyup",Nd);angular.element(h).unbind("mousemove",Od);angular.element(h).unbind("mousedown",Pd);angular.element(h).unbind("mouseup",Qd);I&&I.unbind("blur focus keydown mousedown");Rd();z&&z.$destroy();u&&u.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;r.append(a.getDropMarkWindow());a.dropMark();var Jb=function(){Sa&&(f.cancel(Sa),
Sa=null)};a.addDropMark=function(){var d=r[0];for(var b=null;d;){if(d===document.getElementsByTagName("body")[0]){b=d;break}d=d.offsetParent}if(d=b)angular.element(d).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(d){d=a.getMousePos(d);var b=r[0].getBoundingClientRect();d.x-=angular.element(h)[0].pageXOffset;d.y-=angular.element(h)[0].pageYOffset;var c=b.top+D,b=b.bottom-N;O&&E&&(b-=E[0].offsetHeight);return d.y<c||
d.y>b?!1:!0};var M=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),ac=function(){M&&(M.remove(),M.css("top","-9999999px"),M.css("left","-9999999px"))};a.getCellElemFromRow=function(d){return d&&(d=a.getElemFromRow(d))?a.getChildElement(d,"cell"):null};a.openEditor=function(d,b){if(d)switch(d.type){case "cell":b||(b=a.getColumnById(d[a.options.cellFields.cid]));if(!b){var g=a.getCellColumnIndex(d),c=a.columnsObj.getList();c&&0<=g&&g<c.length&&(b=c[g])}if(b){var g=
a.getCellType(d,a.getColumnRealIndex(b)),c=a.getCellRowIndex(d),A=a.getCellColumnIndex(d);if(c=a.getElemFromCell(c,A,b[a.options.columnFields.fixed]))switch(g){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(c,d,b);break;case "dropdown":a.openDropDownEditor(c,d,b);break;default:0!=d[a.options.cellFields.allowEdit]&&bc(null,c,0)}}}};a.closeEditor=function(d,b,c){if(d)switch(d.type){case "cell":if(b||(b=a.getColumnById(d[a.options.cellFields.cid])),b)switch(a.getCellType(d,
a.getColumnRealIndex(b))){case "incell":a.closeActiveEditor(d);break;case "dropdown":a.closeActiveEditor(d)}else a.closeActiveEditor()}else a.closeActiveEditor();c||"optimal"!=a.options.displayMode||a.updateView();J=null};var C=null,G=!1,J=null,lb=null,Ea=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(d,b,k){G&&a.closeActiveEditor(b,!0);mb();if(b&&k&&(J=b,k='<div ng-include="'+k[a.options.columnFields.editorTemplate]+'"></div>',C=angular.element('<div class="iui-incell-editor"></div>'),
C.append(c(k)(m.$parent)),0!=a.callBeforeEdit(b))){d.children().eq(0).append(C);G=!0;lb="incell";e();C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",function(a){a.stopPropagation()});C.bind("click",function(a){a.stopPropagation()});C.bind("keydown",function(d){switch(d.keyCode){case 27:a.closeActiveEditor(J)}d.stopPropagation()});C.bind("keypress",function(a){a.stopPropagation()});C.bind("keyup",function(a){a.stopPropagation()});var g=f(function(){var a=l.getPadding(d[0]),b=
parseInt(getComputedStyle(d[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(d[0]).height,10)+2;C.css("width",b+"px");C.css("height",a+"px");C.css("top",d[0].offsetTop+"px");m.$apply();C.children&&1==C.children().length&&(b=C.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));f.cancel(g)},1)}};a.openDropDownEditor=function(d,b,k){G&&a.closeActiveEditor(b,!0);mb();if(b&&k&&(J=b,k='<div ng-include="'+k[a.options.columnFields.editorTemplate]+'"></div>',
C=angular.element('<div class="iui-dropdown-editor"></div>'),C.append(c(k)(m.$parent)),0!=a.callBeforeEdit(b)))var g=f(function(){angular.element(xb).append(C);C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",function(a){a.stopPropagation()});C.bind("click",function(a){a.stopPropagation()});G=!0;lb="dropdown";var a=d[0].getBoundingClientRect(),b=angular.element(h)[0].pageXOffset,c=angular.element(h)[0].pageYOffset,k=f(function(){var g=l.getPadding(d[0]),g=parseInt(getComputedStyle(d[0]).width,
10)+(g.left+g.right),p=l.getPadding(C[0]),g=g-(p.left+p.right),p=parseInt(getComputedStyle(C[0]).width,10);g<p&&(g=p);p=a.right-(g+3)+b;C.css("top",a.bottom+c+"px");C.css("left",p+"px");C.css("width",g+"px");m.$apply();f.cancel(k)},1);f.cancel(g)},1)};a.closeActiveEditor=function(d,b){G=!1;mb();C&&C.remove();lb=J=null;b||a.callAfterEdit(d)};var mb=function(){C&&C.unbind("click keydown keypress keyup mousedown mouseup")},b=function(a,b){a&&(Ea.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(Ea),
Ea.css("left",a[0].offsetLeft+a[0].offsetWidth-Ea[0].offsetWidth-2+"px"),Ea.css("top",a[0].offsetTop+(a[0].offsetHeight-Ea[0].offsetHeight)/2+"px"))},e=function(){Ea&&("dropdown"!=lb||"dropdown"==lb&&!G)&&(Ea.removeAttr("class"),Ea.remove())},q=null,y=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),vc=function(a,b){!a||yb&&!b||(a.append(y),y.css("top",a[0].offsetTop+"px"),y.css("left",a[0].offsetLeft+a[0].offsetWidth-y[0].offsetWidth+"px"),y.css("height",getComputedStyle(a[0]).height))},
La=function(a){!y||yb&&!a||y.remove()};a.getCellType=function(d,b){var c=null,g="label";d&&(c=a.getColumnById(d[a.options.cellFields.cid]));!c&&0<=b&&b<a.columnList.length&&(c=a.columnList[b]);c&&(g=c[a.options.columnFields.editorType]);return g};var xb=l.getBodyElem(r[0]),$b=l.getUniqueId(4),sa=null,yb=!1,cc=0,$e=function(d,b,k){if(xb&&d.items&&0<d.items.length){d=l.getUniqueId(4);var g=c('<iui-list name="'+d+'" style="position:absolute;top:-99px;height:100px" items="data['+b+"].column."+a.options.columnFields.editorSettings+
'.items"></iui-list>')(z);angular.element(xb).append(g);ra.updateLayout(d);var A=f(function(){if(0<g.children().length){var a=g.children().eq(0);0<a.children().length&&(cc=angular.element(a.children().eq(0))[0].offsetHeight,k&&(k.avgItemHeight=cc))}g.remove();f.cancel(A)},1)}},Ab=null,Bb=function(d,b,k,p){var g=a.getCell(k,p);if(g!=q&&(q=g,sa&&sa.remove(),Ab&&Ab.$destroy(),xb)){Ab=m.$new();Ab.data=a.columnList[p];J=g;var e='<iui-list name="'+$b+'" style="position:absolute;"',e=e+(' items="data.'+
a.options.columnFields.editorSettings+'.items"'),e=e+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),e=e+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),e=e+(' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"'),e=e+(' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"');sa=c(e+(' nav-selection="false" before-select="onCellValueChanging(e, '+k+", "+p+')" after-select="onCellValueChanged(e, '+
k+", "+p+')"></iui-list>'))(Ab);cc=0;Kb&&p<Kb.length&&(cc=Kb[p].avgItemHeight);var wc=f(function(){angular.element(xb).append(sa);var c=d[0].getBoundingClientRect(),k=angular.element(h)[0].pageXOffset,p=angular.element(h)[0].pageYOffset,p=c.bottom+p-1,c=c.left+k,k=d.children().eq(0),A=l.getPadding(k[0]),k=parseInt(getComputedStyle(k[0]).width,10)+(A.left+A.right),A=l.getPadding(sa[0]),k=k-(A.left+A.right);void 0!=b.dropDownWidth&&k<b.dropDownWidth&&(k=b.dropDownWidth);A=void 0!=b.dropDownHeight?b.dropDownHeight:
100;void 0!=b.maxDropDownItems&&(A=cc*b.maxDropDownItems);sa.css("top",p+"px");sa.css("left",c+"px");sa.css("width",k+"px");sa.css("height",A+"px");sa.css("z-index","999");g&&g[a.options.cellFields.value]&&ra.selectedItem($b,g[a.options.cellFields.value]);ra.updateLayout($b);var e=f(function(){if(g&&g[a.options.cellFields.value]){ra.ensureVisible($b,g[a.options.cellFields.value]);var d=f(function(){ra.focus($b,g[a.options.cellFields.value]);f.cancel(d)},1)}f.cancel(e)},10);y&&(La(!0),vc(d,!0));yb=
!0;af();f.cancel(wc)},1)}};a.removeDropDownList=function(a){sa&&(q=null,sa.remove(),yb=!1,a||La(),sa.unbind("keydown"));Ab&&Ab.$destroy();J=null};var af=function(){sa.bind("keydown",function(d){switch(d.keyCode){case 27:a.removeDropDownList(),La()}})},bc=function(d,b,c){a.options.labelEdit&&(void 0===c&&(c=500),za=f(function(){if(za)var a=f(function(){xc(d,b,!0);f.cancel(a)},c);f.cancel(za)},c/3))},dc=function(){za&&(f.cancel(za),za=null)},Lb=null,Mb=null,xc=function(d,b,c){if(a.dragDropStatus()){var g=
I[0].value;a.labelEditStatus(!1);I.unbind("blur focus keydown mousedown");I.remove();Mb=Lb=null}else{var k=a.getRowFromChildElem(b);if(k){var e=a.getRowCurrentIndex(k),wc=a.getIndexFromElem(b),h=a.getCellObject(e,wc);g="";g=b.children().eq(0);if(h)if(c){if(0!=a.callBeforeLabelEdit(h)){Lb=k;Mb=h;a.labelEditStatus(!0);I.unbind("blur focus keydown mousedown");d=parseInt(getComputedStyle(b[0]).width,10)-4;c=parseInt(getComputedStyle(b[0]).height,10)-3;I.css("top",b[0].offsetTop+"px");I.css("left",b[0].offsetLeft+
"px");I.css("width",d+"px");I.css("height",c+"px");g.append(I);I[0].value=h[a.options.cellFields.text];I.bind("keydown",function(d){switch(d.keyCode){case 13:h[a.options.cellFields.text]=I[0].value?I[0].value:"null";xc(d,b,!1);break;case 27:xc(d,b,!1)}d.stopPropagation()});I.bind("focus",function(d){var b=angular.element(this);a.callGotFocus(d,Lb,Mb,!0,b[0].value)});I.bind("blur",function(a){xc(a)});I.bind("mousedown",function(a){a.stopPropagation()});var l=f(function(){I[0].focus();I[0].select();
f.cancel(l)},10)}}else g=I[0].value,a.labelEditStatus(!1),I.unbind("blur focus keydown"),I.remove(),a.updateView(),a.updateFocus(e,wc),a.callAfterLabelEdit(h),a.callLostFocus(d,k,h,!0,g),Mb=Lb=null}else g=I[0].value,a.labelEditStatus(!1),I.unbind("blur focus keydown mousedown"),I.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(d,Lb,Mb,!0,g),Mb=Lb=null}},Sd=function(d){var b="",c=a.defaultStyle.row.expandBox.general;d[a.options.rowFields.style]&&d[a.options.rowFields.style].expandBox&&
d[a.options.rowFields.style].expandBox.general!=c?c+=" "+d[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=c&&(c+=" "+a.options.controlStyle.row.expandBox.general);var p=a.getCurrentRowStyle(d),p=a.getExpandBoxStyle(p.expandBox);if(a.isThereChildRows||d&&d[a.options.rowFields.hasChildren])b=c;c=d[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(d)||!d[a.options.rowFields.rows]||d[a.options.rowFields.rows]&&0==d[a.options.rowFields.rows].length);
d&&!a.isRowFixed(d)&&(c||a.isThereVisibleChildren(d))&&(b=d[a.options.rowFields.hasChildren]&&void 0===d[a.options.rowFields.expanded]?b+(" "+p.expanded):!1!==d[a.options.rowFields.expanded]?b+(" "+p.collapsed):b+(" "+p.expanded),!0===a.options.rtl&&(b+="-rtl"),a.options.enabled&&a.isRowEnabled(d)||(b+="-disabled"));return b};r.bind("mousemove",function(d){if(a.options.enabled&&0===d.button&&Y&&x){var b=a.getMousePos(d),c=b.y+16,b=b.x+20;ga.empty();ga.append("<span>"+x[a.options.columnFields.headerText]+
"</span>");ga.css("top",c+"px");ga.css("left",b+"px");ga.css("display","block");Td();d.stopPropagation()}});var Wd=function(){for(var d=0,b="none";3>d;){if((b=a.getRowElems(b))&&0<b.length)for(var c=0;c<b.length;c++){var p=angular.element(b[c]);Ud(p);for(var p=p.find("td"),A=0;A<p.length;A++){var f=angular.element(p[A]),e=a.getElement(f,"expandbox");e&&e.unbind("click touchend");Vd(f)}}d++;b=1==d?"left":"right"}},Rd=function(){mb();for(var d=0,b="none";3>d;){var c=a.getRowElems(b);if(c&&0<c.length)for(var p=
0;p<c.length;p++){var A=angular.element(c[p]);Ud(A);A=A.find("td");for(var f=0;f<A.length;f++){var e=angular.element(A[f]);var h=a.getElement(e,"expandbox");h&&h.unbind("click touchend");Vd(e)}}c=b;for(p=0;2>p;){rowFixed=0==p?"top":"bottom";if((A=a.getRowElems(c,rowFixed))&&0<A.length)for(f=0;f<A.length;f++)for((e=angular.element(A[f]))&&e.unbind("mousedown mouseenter mouseleave"),e=e.find("td"),h=0;h<e.length;h++){var l=angular.element(e[h]);l&&l.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}p++}if((c=
a.getHeaderElem(b))&&0<c.length)for(p=0;p<c.length;p++)for(A=angular.element(c[p]),A=A.find("td"),f=0;f<A.length;f++)(e=angular.element(A[f]))&&(b=a.getChildElement(e,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.unbind("mousedown");d++;b=1==d?"left":"right"}},gf=function(){Wd();for(var b=0,c="none";3>b;){var k=a.getRowElems(c);if(k&&0<k.length)for(var p,A=k.length-1,f=0;f<=A;f++){p=angular.element(k[f]);bf(p);for(var e=p.find("td"),h=0;h<e.length;h++){var l=angular.element(e[h]);
cf(a.getElement(l,"expandbox"));df(l,a.getRowFromElem(p),h)}}for(k=0;2>k;){rowFixed=0==k?"top":"bottom";if((p=a.getRowElems(c,rowFixed))&&0<p.length)for(f=0;f<p.length;f++)for(A=angular.element(p[f]),ef(A),e=A.find("td"),h=0;h<e.length;h++)l=angular.element(e[h]),ff(l,a.getRowFromElem(A),h);k++}b++;c=1==b?"left":"right"}},Y=!1,x=null,nb=-1,yc=function(b,c){if(b){var d=a.getColumnWidthFromData(b);return a.isColumnWithFixedWidth(b)||10<c.x&&c.x<d-10}return!1},Xd=function(a,b){var d=parseInt(getComputedStyle(a[0]).height,
10),c=parseInt(getComputedStyle(ta[0]).height,10),g=l.getPadding(a[0]);ta.css("top",(d+g.top+g.bottom-c)/2+"px");1==b?(ta.css("left","0"),ta.css("right","auto")):(ta.css("left","auto"),ta.css("right","0"))},Xc=function(b){b=b.find("td");for(var d=0;d<b.length;d++)currentElem=angular.element(b[d]),currentElem.bind("click",function(b){if(a.options.enabled&&1===b.which){var d=l.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&yc(c,d)&&a.callColumnClick(c,a.getMousePos(b))}b.stopPropagation()}),
currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var d=l.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&yc(c,d)&&a.callColumnDblClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("contextmenu",function(b){var d=a.getColumnFromElem(this);d&&(Ma=d,d[a.options.columnFields.contextMenu]&&0<d[a.options.columnFields.contextMenu].length&&b.preventDefault(),Yd(b,d),b.stopPropagation())}),currentElem.bind("mouseenter",function(b){var d=angular.element(this);
if(!(d&&d[0].attributes["data-element"]&&"column-expand-cell"==d[0].attributes["data-element"].value.toString()||!a.options.enabled||Z||ma)){var c=a.getColumnFromElem(this);c&&(a.hoverColumn=c,a.refresh(c),a.callColumnHover(c));1===b.which&&Y&&x&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&ta&&(ta.remove(),a.hoverColumn!=x&&(d.append(ta),Xd(d)))}}),currentElem.bind("mouseleave",function(b){b=angular.element(this);b&&b[0].attributes["data-element"]&&"column-expand-cell"==b[0].attributes["data-element"].value.toString()||
!a.options.enabled||Z||ma||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),ta&&ta.remove(),Z||r.css("cursor","default"))}),currentElem.bind("mousemove",function(b){var d=angular.element(this);if((!d||!d[0].attributes["data-element"]||"column-expand-cell"!=d[0].attributes["data-element"].value.toString())&&a.options.enabled)if(d=angular.element(this),1===b.which&&Y&&x&&a.hoverColumn&&a.hoverColumn!=x&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&x[a.options.columnFields.fixed]==
a.hoverColumn[a.options.columnFields.fixed]){var c=parseInt(getComputedStyle(d[0]).width,10),g=a.getColumnCompleteIndex(x),k=a.getColumnCompleteIndex(a.hoverColumn);ta.empty();nb=-1;x[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&g.level==k.level&&(b.offsetX>c/2?(nb=2,ta.append('<span class="iui-grid-column-reorder-mark-right"></span>')):(nb=1,ta.append('<span class="iui-grid-column-reorder-mark-left"></span>')),Xd(d,nb))}else if(d=a.getColumnFromChildElem(this))b=l.getClientMousePos(b,
this),c=a.getColumnWidthFromData(d),g=10,a.isFilteringAllowed(d)&&(g=0),10>b.x&&!a.isColumnWithFixedWidth(d)&&Zd(d,"left")?(r.css("cursor","ew-resize"),Ta="left"):b.x>c-g&&!a.isColumnWithFixedWidth(d)&&Zd(d,"right")?(r.css("cursor","ew-resize"),Ta="right"):Z||(r.css("cursor","default"),Ta="none")}),currentElem.bind("mouseup",function(b){var d=angular.element(this);if((!d||!d[0].attributes["data-element"]||"column-expand-cell"!=d[0].attributes["data-element"].value.toString())&&a.options.enabled){if(1===
b.which&&Y&&x&&a.hoverColumn&&a.hoverColumn!=x&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&x[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(x,a.hoverColumn)&&(b=a.getColumnCompleteIndex(x),d=a.getColumnCompleteIndex(a.hoverColumn),x[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&b.level==d.level)){b=a.columnsObj.getParent(x);b=a.columnsObj.getList(b);var d=b.indexOf(x),c=b.indexOf(a.hoverColumn);if(0<=d&&0<=
c){var g=c;d<c?1==nb&&g--:d>c&&2==nb&&g++;a.moveObject(d,g,b);a.updateLayout();a.callColumnPosChanged(x,a.hoverColumn)}}x=null;nb=-1;Z=Y=!1;r.css("cursor","default")}}),currentElem.bind("mousedown",function(b){var d;if((d=angular.element(this))&&d[0].attributes["data-element"]&&"column-expand-cell"==d[0].attributes["data-element"].value.toString()){if(1==b.which&&(d=a.getColumnFromChildElem(this))&&a.isColumnRelated(d)&&(d=a.getColumnRelatedObject(d))&&d.children){d.expanded=!(void 0!=d.expanded?
d.expanded:0!=d.expanded);for(var c=0;c<d.children.length;c++)d.children[c].column[a.options.columnFields.visible]=d.expanded;a.updateLayout()}}else if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(),d=a.getColumnFromChildElem(this))){l.getClientMousePos(b,this);var g=d;if(0===b.button&&!Z){var c=g,k=g[a.options.columnFields.fixed];switch(Ta){case "left":"right"==k?c=g:(g=zc(g,k))?(c=g,g[a.options.columnFields.fixed]!=k?(c=null,Z=!1):Z=!0):Z=!1;c&&(Z=!0);break;case "right":"right"==
k?(g=Ac(g,k))?(c=g,g[a.options.columnFields.fixed]!=k?(c=null,Z=!1):Z=!0):Z=!1:(c=g,Z=!0)}!a.isColumnWithFixedWidth(c)&&Z?a.setColumnResizingParams(c,Ta,a.getMousePos(b).x):Z=!1}if(!Z)switch(c=l.getClientMousePos(b,this),yc(d,c)&&a.columnSelection(d),b.which){case 1:a.options.allowColumnReorder&&0!=d[a.options.columnFields.allowDrag]&&0==Y&&0!=d[a.options.columnFields.allowGrouping]&&(x=d,a.getMousePos(b),Y=!0,(d=l.getBodyElem(r[0]))&&angular.element(d).append(ga));break;case 3:yc(d,c)&&a.callColumnRightClick(d,
a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&hf(this);a.stopPropagation()})}(currentElem)},Fa=null,hf=function(b){a.closeFilterWindow();var d=a.getColumnFromChildElem(b);if(d){var k=angular.element(b),p=k.parent().parent();if(xb){b='<div ng-include="'+d[a.options.columnFields.filterTemplate]+'"></div>';Fa=angular.element('<div class="iui-filter-window"></div>');
Fa.append(c(b)(m.$parent));var A=f(function(){angular.element(xb).append(Fa);Fa.bind("mousedown",function(a){a.stopPropagation()});k[0].getBoundingClientRect();var b=p[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,e=f(function(){var k=b.bottom+g,p=b.right-(parseInt(getComputedStyle(Fa[0]).width,10)+3)+c;d[a.options.columnFields.filterParams]&&"left"==d[a.options.columnFields.filterParams].templateAlignment&&(p=b.left+c);Fa.css("top",k+"px");Fa.css("left",
p+"px");f.cancel(e)},1);f.cancel(A)},1)}}};a.closeFilterWindow=function(){Fa&&(Fa.unbind("mousedown"),Fa.remove())};var Ud=function(a){a&&a.unbind("click contextmenu blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},bf=function(b){b&&(b.bind("click",function(a){a.preventDefault();Cb()}),b.bind("contextmenu",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&(Ma=d,d[a.options.rowFields.contextMenu]&&0<d[a.options.rowFields.contextMenu].length&&b.preventDefault(),
Yd(b,d),b.stopPropagation())}),b.bind("dragover",function(b){var d=a.getRowFromElem(this);if(d&&a.isRowEnabled(d)){if(a.isScrollBarVisible("vertical")){var d=a.getMousePos(b),c=r[0].getBoundingClientRect();d.x-=angular.element(h)[0].pageXOffset;d.y-=angular.element(h)[0].pageYOffset;var g=c.top+D+25,c=c.bottom-N-25;O&&E&&(c-=E[0].offsetHeight);d.y<g?Bc(!1):d.y>c?Bc(!0):Nb()}else Nb();b.stopPropagation()}}),b.bind("dragend",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&(b.preventDefault(),
a.dragDropStatus(!1),a.dropMark(),B.getData().source||B.clearData())}),b.bind("mouseenter",function(b){if(!ma){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&!Y&&(a.hoverRow=d,a.refresh(d),a.callRowHover(b,d),a.options.hoverSelection&&(kb=f(function(){kb&&a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey)},500)))}}),b.bind("mouseleave",function(b){ma||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),kb&&(f.cancel(kb),kb=null))}),b.bind("keydown",function(b){var d=a.getRowFromElem(this);
if(d&&a.isRowEnabled(d)){var c=!0;a.callKeyDown(b,d);var g=a.getRowCurrentIndex(d);switch(b.keyCode){case 9:$d(b,d,g);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:ae(b,g);break;case 34:be(b,g);break;case 35:ce(b,g);break;case 36:de(b,g);break;case 37:ee(b,d,g);break;case 32:fe(b,d);break;case 38:Yc(b,g);break;case 39:ge(b,d,g);break;case 40:Zc(b,g);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),
b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),b.bind("keyup",function(b){var d=a.getRowFromElem(this);if(d&&a.isRowEnabled(d)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,d)}}),b.bind("keypress",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&a.callKeyPress(b,d)}),b.bind("mousedown",function(b){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)?a.callGotFocus(b,d):a.updateFocus()}),b.bind("blur",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&a.callLostFocus(b,d)}))},cf=function(b){b&&(b.bind("click",function(b){var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(a.toggle(d),a.updateFocus(a.getRowCurrentIndex(d),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();
var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(a.toggle(d),a.updateFocus(a.getRowCurrentIndex(d),a.options.expandColIndex),b.stopPropagation())}))},Cc={x:0,y:0},Ob={x:0,y:0},Pb=!1,$c=!1,cb=null,he=function(){return{x:angular.element(h)[0].pageXOffset,y:angular.element(h)[0].pageYOffset}},Qb=function(a){var b=he();return{x:a.x-b.x,y:a.y-b.y}},df=function(d,c,k){d&&(d.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();
B.clearData();var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d))if(dc(),a.isDragAllowed(d)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",d[a.options.rowFields.id]?d[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",d[a.options.rowFields.id]?d[a.options.rowFields.id].toString():""));b={source:d,
sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}B.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),d.bind("dragover",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);b.preventDefault();var g=!0;
b.dataTransfer?g="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(g="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(g&&(d=a.getRowFromChildElem(c))){var g=c[0].getBoundingClientRect(),k=angular.element(h)[0].pageXOffset,p=angular.element(h)[0].pageYOffset,f=a.getMousePos(b);f.x-=g.left+k;f.y-=g.top+p;c=B.getDropPos(f,{x:0,y:0,width:c[0].offsetWidth,height:c[0].offsetHeight},!0);k=B.getData();g=a.isDropAllowed(k.source,d,c);p={event:b,sourceCtrl:k.sourceCtrl?
k.sourceCtrl.getGridName():"",dragRow:k.source,targetCtrl:a.getGridName(),targetRow:d,isDropAllowed:g,dropPos:c,mousePos:a.getMousePos(b)};p=a.callDragOver(p);if(g&&!1!==p){p=a.getMousePos(b);b=p.y+16;p=p.x+20;f=a.getDropMarkWindow();f.empty();var e="";switch(c){case 1:e="iui-drop-marker-move-up";break;case 2:e="iui-drop-marker-move-down"}f.append("<span class='"+e+"'></span><span class='iui-drop-marker-title'>"+d[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,
left:p});a.dropMark(g);B.setData({source:k.source,sourceList:k.sourceList,target:d,dropPos:c})}else b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),d.bind("drop",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);b.preventDefault();Jb();a.dropMark();d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&
(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d){var g=a.getRowFromChildElem(c);if(g){var c=B.getData(),k=c.source;k||(k=a.getDnDSource(b));if(d=a.isDropAllowed(k,g,c.dropPos))a.toggle(g,!0),k&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:k,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:d,dropPos:c.dropPos,mousePos:a.getMousePos(b)},!1!==a.callDragDrop(d)&&(a.drop(c),m.$$phase||m.$apply()))}}B.clearData();b.stopPropagation()}}),d.bind("dragenter",
function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){b.preventDefault();if(a.options.autoExpand)var c=f(function(){Sa||(Sa=f(function(){Sa&&a.toggle(d,!0)},750));f.cancel(c)},1);var g=B.getData();g.source||(g.source=a.getDnDSource(b));g={event:b,sourceCtrl:g.sourceCtrl?g.sourceCtrl.getGridName():"",dragRow:g.source,targetCtrl:a.getGridName(),targetRow:g.target,mousePos:a.getMousePos(b)};a.callDragEnter(g);b.stopPropagation()}}),d.bind("dragleave",function(b){a.hoverRow=null;var d=
a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(b.preventDefault(),Jb(),d=B.getData(),d.source||(d.source=a.getDnDSource(b)),d={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:d.target,mousePos:a.getMousePos(b)},a.callDragLeave(d),b.stopPropagation())}),d.bind("touchstart",function(b){var d;if((d=a.getRowFromChildElem(this))&&a.isRowEnabled(d)&&(b.preventDefault(),(d=a.getTouchData(b))&&0<d.length)){$c=!0;var c=f(function(){$c=
!1;f.cancel(c)},750);Cc=Qb({x:d[0].pageX,y:d[0].pageY});a.closeFilterWindow();d=Cc;if((d=a.getRowAt(d.x,d.y))&&a.isRowEnabled(d)){var g=angular.element(this);a.mouseButtonStatus(!0);cb=d;var k=a.getRowCurrentIndex(d),p=parseInt(a.getIndexFromElem(this),10),e=a.getCell(k,p),h=a.getCellType(e,p),l=null,m=a.options.editorSettings;g[0].focus();a.updateFocus(k,p);e&&(l=a.getColumnById(e[a.options.cellFields.cid]));!l&&0<=p&&p<a.columnList.length&&(l=a.columnList[p]);var n="click"==a.options.editorSettings.activate;
l&&l[a.options.columnFields.editorSettings]&&(m=l[a.options.columnFields.editorSettings],n=void 0!=m.activate?"click"==m.activate:n);e&&e!=J?a.closeEditor(J):a.closeEditor();switch(h){case "checkbox":break;case "combobox":a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);e&&0!=e[a.options.cellFields.allowEdit]&&l&&n?Bb(angular.element(this),m,k,p):a.removeDropDownList();break;case "incell":a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);!G&&e&&0!=e[a.options.cellFields.allowEdit]&&n&&a.openInCellEditor(g,
e,l);break;case "dropdown":a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);!G&&e&&0!=e[a.options.cellFields.allowEdit]&&n&&a.openDropDownEditor(g,e,l);break;default:a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey),a.removeDropDownList(),e&&0!=e[a.options.cellFields.allowEdit]&&n&&bc(b,angular.element(this))}}}}),d.bind("touchmove",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)&&(d=a.getTouchData(b))&&0<d.length){Ob=Qb({x:d[0].pageX,y:d[0].pageY});var d=Math.abs(Ob.x-Cc.x),
c=Math.abs(Ob.y-Cc.y),g=r[0].getBoundingClientRect();if(B.hitTest(Ob.x,Ob.y,g)){if(b.preventDefault(),M&&M.css("display","block"),!$c)if(!Pb&&(2<d||2<c)&&cb&&a.isRowEnabled(cb))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{Pb=!0;B.clearData();if((d=a.getTouchData(b))&&0<d.length&&(Qb({x:d[0].pageX,y:d[0].pageY}),cb&&a.isRowEnabled(cb)&&(dc(),a.isDragAllowed(cb)))){a.dragDropStatus(!0);a.addDropMark();d={source:cb,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":d.source=
a.options.selectedRows;break;case "multi-extended":d.source=a.options.selectedRows}B.setData(d);if(d=a.getCellElemFromRow(cb))if(d=a.getContentElement(d))M.empty(),M.append(d.clone()),M.css("display","none"),r.append(M)}b.stopPropagation()}else if(Pb&&(angular.element(this),b.preventDefault(),(c=a.getTouchData(b))&&0<c.length)){d=he();var k=Qb({x:c[0].pageX,y:c[0].pageY});if(c=a.getRowAt(k.x,k.y)){var p=a.getCellElemFromRow(c);if(p){var g=p[0].getBoundingClientRect(),p=B.getDropPos({x:k.x-g.left,
y:k.y-g.top},{x:0,y:0,width:p[0].offsetWidth,height:p[0].offsetHeight},!0),g=B.getData(),f=a.isDropAllowed(g.source,c,p);b={event:b,sourceCtrl:g.sourceCtrl?g.sourceCtrl.getGridName():"",dragRow:g.source,targetCtrl:a.getGridName(),targetRow:c,isDropAllowed:f,dropPos:p,mousePos:k};var e=r[0].getBoundingClientRect();var h=k.x-e.left;e=k.y-e.top;M.css("top",e-16+"px");M.css("left",h+"px");M.css("display","block");b=a.callDragOver(b);if(f&&0!=b){b=k.y+d.y+16;k=k.x+d.x+20;d=a.getDropMarkWindow();d.empty();
h="iui-drop-marker-move-in";switch(p){case 1:h="iui-drop-marker-move-up";break;case 2:h="iui-drop-marker-move-down"}d.append("<span class='"+h+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:k});a.dropMark(f);B.setData({source:g.source,sourceList:g.sourceList,target:c,dropPos:p})}else a.dropMark(),M&&M.css("display","none")}}else g=r[0].getBoundingClientRect(),c=g.top+D,g=g.bottom-N,O&&E&&(g-=E[0].offsetHeight),
!a.options.allowDrop||k.y<c||k.y>g?(a.dropMark(),M&&M.css("display","none")):(e=r[0].getBoundingClientRect(),h=k.x-e.left,e=k.y-e.top,M.css("top",e-16+"px"),M.css("left",h+"px"),M.css("display","block"),c=B.getData(),g={source:c.source,sourceCtrl:c.sourceCtrl,target:null,dropPos:-1},B.setData(g),b={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:k},b=a.callDragOver(b),0==
b?a.dropMark():(b=k.y+d.y+16,k=k.x+d.x+20,d=a.getDropMarkWindow(),d.empty(),d.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(m.name?m.name:"Grid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:k}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),M&&M.css("display","none")}}),d.bind("touchend",function(b){var d;if((d=a.getRowFromChildElem(this))&&a.isRowEnabled(d)){if((d=a.getTouchData(b))&&0<d.length){d=
Qb({x:d[0].pageX,y:d[0].pageY});var c=r[0].getBoundingClientRect();if(B.hitTest(d.x,d.y,c))if(Pb){angular.element(this);b.preventDefault();Jb();a.dropMark();ac();if((d=a.getTouchData(b))&&0<d.length){d=Qb({x:d[0].pageX,y:d[0].pageY});var g=a.getRowAt(d.x,d.y);if(g){var c=B.getData(),k=c.source,p=a.isDropAllowed(k,g,c.dropPos);p&&(a.toggle(g,!0),k&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:k,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:p,dropPos:c.dropPos,mousePos:d},
d=a.callDragDrop(d),!1!==d&&(a.drop(c),m.$$phase||m.$apply())))}else a.dropMark(),g=r[0].getBoundingClientRect(),c=g.top+D,g=g.bottom-N,O&&E&&(g-=E[0].offsetHeight),d.y>=c&&d.y<=g&&(c=B.getData(),c.source&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:d},d=a.callDragDrop(d),!1!==d&&(a.drop(c),m.$$phase||m.$apply())))}B.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),
(d=a.getRowFromChildElem(this))&&a.isRowEnabled(d)&&a.updateSelection(b,d,b.shiftKey),dc()}d=Pb;a.removeDropMark();ac();Ob={x:0,y:0};Pb=!1;cb=null;d&&b.stopPropagation()}}),d.bind("dblclick",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);b.preventDefault();if(1===b.which){var g=a.getRowCurrentIndex(d),k=parseInt(a.getIndexFromElem(this),10),p=a.getCell(g,k),f=a.getCellType(p,k),e=null,h=a.options.editorSettings;p&&(e=a.getColumnById(p[a.options.cellFields.cid]));
!e&&0<=k&&k<a.columnList.length&&(e=a.columnList[k]);var l="dblclick"==a.options.editorSettings.activate;e&&e[a.options.columnFields.editorSettings]&&(h=e[a.options.columnFields.editorSettings],l=void 0!=h.activate?"dblclick"==h.activate:l);switch(f){case "checkbox":break;case "combobox":p&&0!=p[a.options.cellFields.allowEdit]&&e&&l?Bb(angular.element(this),h,g,k):a.removeDropDownList();break;case "incell":!G&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(c,p,e);break;case "dropdown":!G&&
p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(c,p,e);break;default:a.removeDropDownList(),p&&0!=p[a.options.cellFields.allowEdit]&&l&&bc(b,angular.element(this),0)}0!=a.callRowDblClick(d,a.getMousePos(b))&&"checkbox"!=f&&"checkbox"!=f&&p&&!l&&(a.toggle(d),a.updateFocus(g,k))}b.stopPropagation()}}),d.bind("mouseenter",function(d){if(!ma){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!Y){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,
k))if(a.hoverCell=g,a.refresh(c),a.callCellHover(d,g),d=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(k=a.getCellType(g,k),k){case "combobox":yb||vc(d);break;case "incell":G&&g==J||b(d,k);break;case "dropdown":G&&g!=J||b(d,k);break;default:La(),e()}else La()}}}),d.bind("mouseleave",function(b){if(!ma&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var d=parseInt(a.getIndexFromElem(this),10);a.getCell(b,d)&&(La(),e())}}),d.bind("keydown",
function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=!0,g=angular.element(this);a.callKeyDown(b,d);var k=a.getRowCurrentIndex(d),p=parseInt(a.getIndexFromElem(this),10),e=a.getCell(k,p),f=a.getCellType(e,p),h=a.getColumnById(e[a.options.cellFields.cid]);!h&&0<=p&&p<a.columnList.length&&(h=a.columnList[p]);switch(b.keyCode){case 9:$d(b,d,k,p);break;case 13:switch(f){case "checkbox":ie(e,p);break;case "combobox":e&&0!=e[a.options.cellFields.allowEdit]?h&&Bb(angular.element(this),
h[a.options.columnFields.editorSettings],k,p):a.removeDropDownList();break;case "incell":!G&&e&&0!=e[a.options.cellFields.allowEdit]&&a.openInCellEditor(g,e,h);break;case "dropdown":!G&&e&&0!=e[a.options.cellFields.allowEdit]&&a.openDropDownEditor(g,e,h);break;default:e&&0!=e[a.options.cellFields.allowEdit]&&bc(b,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:ae(b,k,p);break;case 34:be(b,k,p);break;
case 35:ce(b,k,p);break;case 36:de(b,k,p);break;case 37:ee(b,d,k,p);break;case 32:fe(b,d,e,p);break;case 38:Yc(b,k,p);break;case 39:ge(b,d,k,p);break;case 40:Zc(b,k,p);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),d.bind("keyup",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||
b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,d);b.stopPropagation()}}),d.bind("keypress",function(b){var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(a.callKeyPress(b,d),b.stopPropagation())}),d.bind("click",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){if(1===b.which){var c=a.getRowCurrentIndex(d),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g);a.callCellClick(b,d,c,a.getMousePos(b));a.callRowClick(b,d,a.getMousePos(b))}b.stopPropagation()}}),
d.bind("mousedown",function(b){a.closeFilterWindow();var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:var g=a.getRowCurrentIndex(d),k=parseInt(a.getIndexFromElem(this),10),p=a.getCell(g,k),e=a.getCellType(p,k),f=null,h=a.options.editorSettings;p&&(f=a.getColumnById(p[a.options.cellFields.cid]));!f&&0<=k&&k<a.columnList.length&&(f=a.columnList[k]);var l="click"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&
(h=f[a.options.columnFields.editorSettings],l=void 0!=h.activate?"click"==h.activate:l);p&&p!=J?a.closeEditor(J):a.closeEditor();switch(e){case "checkbox":break;case "combobox":a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);p&&0!=p[a.options.cellFields.allowEdit]&&f&&l?Bb(angular.element(this),h,g,k):a.removeDropDownList();break;case "dropdown":a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);!G&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(c,p,f);break;case "incell":a.rowSelection(d,
b.shiftKey,b.ctrlKey,b.metaKey);!G&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(c,p,f);break;default:if("image"==e?0!=h.allowSelection:1)a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey),a.removeDropDownList(),p&&0!=p[a.options.cellFields.allowEdit]&&l&&bc(b,angular.element(this))}break;case 3:a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey),a.callRowRightClick(d,a.getMousePos(b))}b.stopPropagation()}}),d.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==b.which){var d=a.getRowFromChildElem(this);
if(d&&a.isRowEnabled(d)){var c=a.getRowCurrentIndex(d),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g),k=a.getCellType(c,g),p=null,e=a.options.editorSettings;c&&(p=a.getColumnById(c[a.options.cellFields.cid]));!p&&0<=g&&g<a.columnList.length&&(p=a.columnList[g]);p&&p[a.options.columnFields.editorSettings]&&(e=p[a.options.columnFields.editorSettings]);("image"==k?0!=e.allowSelection:1)&&a.updateSelection(b,d,b.shiftKey)}dc()}}),d.bind("focus",function(d){var c=a.getRowFromChildElem(this);
if(c&&a.isRowEnabled(c)){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10),g=a.getCell(g,k);a.callGotFocus(d,c,g);if(g&&0!=g[a.options.cellFields.allowEdit])switch(d=angular.element(this),k=a.getCellType(g,k),k){case "combobox":yb||vc(d);break;case "incell":G||b(d,k);break;case "dropdown":G||b(d,k);break;default:La()}else La()}}),d.bind("blur",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=a.getRowCurrentIndex(d),g=parseInt(a.getIndexFromElem(this),
10),c=a.getCell(c,g);a.callLostFocus(b,d,c)}}))},Vd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},ef=function(b){b&&(b.bind("mouseenter",function(b){if(!ma){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&!Y&&(a.hoverRow=d,a.refreshHover(d),a.callRowHover(b,d))}}),b.bind("mouseleave",function(b){ma||(a.hoverRow=null,(b=a.getRowFromElem(this))&&
a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},ff=function(d,c,k){d&&(d.bind("touchstart",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){b.preventDefault();a.closeFilterWindow();b=angular.element(this);var d=a.getRowCurrentIndex(d),c=parseInt(a.getIndexFromElem(this),10),g=a.getCell(d,c),k=a.getCellType(g,c),p=null,e=a.options.editorSettings;b[0].focus();g&&(p=a.getColumnById(g[a.options.cellFields.cid]));
!p&&0<=c&&c<a.columnList.length&&(p=a.columnList[c]);var f="click"==a.options.editorSettings.activate;p&&p[a.options.columnFields.editorSettings]&&(e=p[a.options.columnFields.editorSettings],f=void 0!=e.activate?"click"==e.activate:f);g&&g!=J?a.closeEditor(J):a.closeEditor();switch(k){case "checkbox":break;case "combobox":g&&0!=g[a.options.cellFields.allowEdit]&&p&&f?Bb(angular.element(this),e,d,c):a.removeDropDownList();break;case "incell":!G&&g&&0!=g[a.options.cellFields.allowEdit]&&f&&a.openInCellEditor(b,
g,p);break;case "dropdown":!G&&g&&0!=g[a.options.cellFields.allowEdit]&&f&&a.openDropDownEditor(b,g,p);break;default:a.removeDropDownList()}}}),d.bind("mouseenter",function(d){if(!ma){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!Y){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,k))if(a.hoverCell=g,a.refreshHover(c),a.callCellHover(d,g),d=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(k=a.getCellType(g,k),k){case "combobox":yb||
vc(d);break;case "incell":G&&g==J||b(d,k);break;case "dropdown":G&&g!=J||b(d,k);break;default:La(),e()}else La()}}}),d.bind("mouseleave",function(b){if(!ma&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var d=parseInt(a.getIndexFromElem(this),10);a.getCell(b,d)&&(La(),e())}}),d.bind("click",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){if(1===b.which){var c=a.getRowCurrentIndex(d),g=parseInt(a.getIndexFromElem(this),10),c=
a.getCell(c,g);a.callCellClick(b,d,c,a.getMousePos(b));a.callRowClick(b,d,a.getMousePos(b))}b.stopPropagation()}}),d.bind("dblclick",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);b.preventDefault();if(1===b.which){var g=a.getRowCurrentIndex(d),k=parseInt(a.getIndexFromElem(this),10),p=a.getCell(g,k),e=a.getCellType(p,k),f=null,h=a.options.editorSettings;p&&(f=a.getColumnById(p[a.options.cellFields.cid]));!f&&0<=k&&k<a.columnList.length&&(f=a.columnList[k]);
var l="dblclick"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(h=f[a.options.columnFields.editorSettings],l=void 0!=h.activate?"dblclick"==h.activate:l);switch(e){case "checkbox":break;case "combobox":p&&0!=p[a.options.cellFields.allowEdit]&&f&&l?Bb(angular.element(this),h,g,k):a.removeDropDownList();break;case "incell":!G&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(c,p,f);break;case "dropdown":!G&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&
a.openDropDownEditor(c,p,f);break;default:a.removeDropDownList()}a.callRowDblClick(d,a.getMousePos(b))}b.stopPropagation()}}),d.bind("mousedown",function(b){a.closeFilterWindow();var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:var d=a.getRowCurrentIndex(d),g=parseInt(a.getIndexFromElem(this),10),k=a.getCell(d,g),p=a.getCellType(k,g),e=null,f=a.options.editorSettings;k&&(e=a.getColumnById(k[a.options.cellFields.cid]));
!e&&0<=g&&g<a.columnList.length&&(e=a.columnList[g]);var h="click"==a.options.editorSettings.activate;e&&e[a.options.columnFields.editorSettings]&&(f=e[a.options.columnFields.editorSettings],h=void 0!=f.activate?"click"==f.activate:h);k&&k!=J?a.closeEditor(J):a.closeEditor();switch(p){case "checkbox":break;case "combobox":k&&0!=k[a.options.cellFields.allowEdit]&&e&&h?Bb(angular.element(this),f,d,g):a.removeDropDownList();break;case "dropdown":!G&&k&&0!=k[a.options.cellFields.allowEdit]&&h&&a.openDropDownEditor(c,
k,e);break;case "incell":!G&&k&&0!=k[a.options.cellFields.allowEdit]&&h&&a.openInCellEditor(c,k,e);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(d,a.getMousePos(b))}b.stopPropagation()}}),d.bind("mouseup",function(a){1==a.which&&dc()}))};a.getTopRow=function(){return a.isRowIndexInRange(w-1)?a.currentList[w]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return Ga;case "right":return na}return Ua};a.getHeaderElem=function(a){switch(a){case "left":return oa;
case "right":return aa}return ua};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return va?va.find("tr"):null;case "bottom":return wa?wa.find("tr"):null;default:return Va?Va.find("tr"):null}case "right":switch(b){case "top":return ha?ha.find("tr"):null;case "bottom":return Ha?Ha.find("tr"):null;default:return Wa?Wa.find("tr"):null}default:switch(b){case "top":return ia?ia.find("tr"):null;case "bottom":return ba?ba.find("tr"):null;default:return ja?ja.find("tr"):null}}};var je=
function(b){var d="";b.icon?d=b.icon:a.options.rowIcon&&(d=a.options.rowIcon);return d},ad=function(b){return b.icon||a.options.rowIcon},$d=function(b,c,k,p){var d=a.currentList.length;0<d&&(b.shiftKey?l.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Yc(b,k,p):l.isEqual(c[a.options.rowFields.id],a.currentList[d-1][a.options.rowFields.id])||Zc(b,k,p))},Zc=function(b,c,k){b.preventDefault();focusDelayTime=0;var d=c,g=w+F-2,g=g<a.currentList.length-1?g:a.currentList.length-
1;d>=g&&Q&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(r[0].clientHeight/4)}),focusDelayTime=1);if(d=a.getNextRow(d)){c=a.getRowCurrentIndex(d);c>g&&Q&&(a.ensureVisible(d,"bottom"),focusDelayTime=100);a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);var e=f(function(){a.updateFocus(c,k);f.cancel(e)},focusDelayTime)}},Yc=function(b,c,k){b.preventDefault();focusDelayTime=0;var d=w,d=0<d?d:0;c==d&&Q&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(r[0].clientHeight/4)}),focusDelayTime=
1);var g=a.getPrevRow(c);if(g){c=a.getRowCurrentIndex(g);c<d&&Q&&(a.ensureVisible(g,"bottom"),focusDelayTime=100);a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);var e=f(function(){a.updateFocus(c,k);f.cancel(e)},focusDelayTime)}},ge=function(b,c,k,p){b.preventDefault();if((void 0===p||0<=p&&p==a.options.expandColIndex)&&!a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(k,p);else if(0<=p){focusDelayTime=0;var d=p+1;b=a.columnList.length-
1;d===b&&(focusDelayTime=1);if(0<=d&&d<=b){b=l.getPageRect(r);c=a.getElemFromCell(k,d);c=l.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var g=f(function(){a.updateFocus(k,d);f.cancel(g)},focusDelayTime)}}},ee=function(b,c,k,p){b.preventDefault();if((void 0===p||0<=p&&p==a.options.expandColIndex)&&a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!1),a.updateFocus(k,p);else if(0<=p){focusDelayTime=0;var d=
1<p?p-1:0;if(0<=d){b=l.getPageRect(r);c=a.getElemFromCell(k,d);c=l.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var g=f(function(){a.updateFocus(k,d);f.cancel(g)},focusDelayTime)}}},ae=function(b,c,k){b.preventDefault();var d=c-F,d=0<d?d:0;if(d!==c){focusDelayTime=1;var g=a.getPrevRow(d+1);if(g){a.scrollTo(g);a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var e=f(function(){a.updateFocus(a.getRowCurrentIndex(g),k);f.cancel(e)},focusDelayTime)}}},be=function(b,
c,k){b.preventDefault();var d=c+F;a.options.showHeader&&d--;a.options.showFooter&&d--;d=d<a.currentList.length-1?d:a.currentList.length-1;if(d!==c){focusDelayTime=1;var g=a.getNextRow(d-1);if(g){a.scrollTo(g,"bottom");a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var e=f(function(){a.updateFocus(a.getRowCurrentIndex(g),k);f.cancel(e)},focusDelayTime)}}},ce=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:R.y});var d=a.getLastRow();if(d){a.rowSelection(d,b.shiftKey,
b.ctrlKey,b.metaKey);var g=f(function(){a.updateFocus(a.getRowCurrentIndex(d),k);f.cancel(g)},1)}},de=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var d=a.getFirstRow();if(d){a.rowSelection(d,b.shiftKey,b.ctrlKey,b.metaKey);var g=f(function(){a.updateFocus(a.getRowCurrentIndex(d),k);f.cancel(g)},1)}},ie=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var d=a.getColumnById(b[a.options.cellFields.cid]);!d&&0<=c&&c<a.columnList.length&&(d=a.columnList[c]);if(d){var g=
b[a.options.cellFields.value];if((d=d[a.options.columnFields.editorSettings])&&1==d.threeState)switch(l.isString(g)||(g="unchecked"),g){case "checked":g="unchecked";break;case "indeterminate":g="checked";break;default:g="indeterminate"}else g=l.isBoolean(g)?!g:!0;b[a.options.cellFields.value]=g;m.$apply()}}},fe=function(b,c,k,p){b.preventDefault();ie(k,p);a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey,c.selected);m.$apply()},ja=null,ia=null,ba=null,Na=angular.element('<div class="iui-grid-block iui-grid-block-top"></div>'),
ua=null,db=angular.element('<div class="iui-grid-block iui-grid-block-left"></div>'),S=0,Rb=0,oa=null,Ga=null,Va=null,va=null,wa=null,Xa=angular.element('<div class="iui-grid-block iui-grid-block-right"></div>'),Oa=0,Sb=0,aa=null,na=null,Wa=null,ha=null,Ha=null,Pa=angular.element('<div class="iui-grid-block iui-grid-block-bottom"></div>'),Ua=null,w=0,z=null,u=null,xa=null,ya=null,F=100,U=0,K=0,ob=0,Dc=0,D=0,N=0,Tb=0,Ec=!1,ma=!1,ec=9,fc=9,Fc=0,Ya=0,pb=0,Db=1,Gc=0,Hc=0,qb=0,Ub=0,Ic=1,V=null,da=null,
O=!1,Q=!1;this.scrollMousePos=null;var R={x:0,y:0},Kb=[];m.verScrollVisibility=!1;m.$watch("verScrollVisibility",function(b,c){a.suppressWatchScrollVisibility||b==c||a.updateCurrentLayout()});a.getColumnWidth=function(b){var d=100;b&&b[a.options.columnFields.width]&&(d=b[a.options.columnFields.width],l.isPercent(d)?(b=r[0].clientWidth-2*a.columnList.length,Q&&P&&(b-=P[0].offsetWidth),d=Math.floor(parseInt(d,10)/100*b)):l.isString&&(d=parseInt(d,10)));return d};a.getColumnWidthFromData=function(b){var d=
0;if(z){for(var c=null,p=0;p<z.data.length;p++)for(var e=0;e<z.data[p].length;e++){var f=z.data[p][e];if(f.column==b||l.isEqual(f.column[a.options.columnFields.id],b[a.options.columnFields.id])){c=f;break}if(c)break}c&&(d=c.width)}return d};var gc=function(b){var d=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var c=0;c<b.length;c++)var p=angular.element(b[c]),d=d+p[0].offsetWidth;return d},jf=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=
a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var k=0;k<c.length;k++){var p=angular.element(c[k]);p[0].attributes["data-element"]&&"column-header"==p[0].attributes["data-element"].value.toString()&&p[0].attributes["data-level"]&&"0"==p[0].attributes["data-level"].value.toString()&&(b+=p[0].offsetWidth)}a.isThereLeftFixedColumns&&(oa?S=oa[0].offsetWidth:Ga&&(S=Ga[0].offsetWidth),b+=S);a.isThereRightFixedColumns&&(aa?Oa=aa[0].offsetWidth:na&&(Oa=na[0].offsetWidth),
b+=Oa)}else 0<a.currentList.length&&(ja&&(b+=gc()),a.isThereLeftFixedColumns&&(b+=gc("left")),a.isThereRightFixedColumns&&(b+=gc("right")));return b};a.updateScrollVisibility=function(){var a=f(function(){O||(E.css("display","none"),R.x=0);Q||(P.css("display","none"),R.y=0);O&&Q||jb.css("display","none");f.cancel(a)},1)};r.append(E);r.append(P);r.append(jb);a.updateScrollVisibility();var ke=function(){return ia?ia[0].offsetHeight:va?va[0].offsetHeight:ha?ha[0].offsetHeight:0},le=function(){return ba?
ba[0].offsetHeight:wa?wa[0].offsetHeight:Ha?Ha[0].offsetHeight:0},hc=0,ic=999;a.updateViewSize=function(){var b=f(function(){var d=0;a.options.grouping.enabled&&v&&(d=v[0].offsetHeight);Tb=0;var c=r[0].clientWidth;Q&&P&&(c-=P[0].offsetWidth);O=!1;0<a.columnList.length&&(Tb+=jf(),Tb>c&&(E.unbind("mousedown"),E.css("display","block"),E.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=l.getClientMousePos(b,this);var d=Math.floor(r[0].clientWidth);
V&&(b.x<V[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-d,y:a.scrollPos.y}):b.x>V[0].offsetLeft+V[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+d,y:a.scrollPos.y}))}}),V=angular.element(E.children().eq(0)),O=!0,V.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(H.scrollMousePos=a.getMousePos(b),Ec=!0));b.stopPropagation()})));Q=!1;m.verScrollVisibility=!1;0<a.currentList.length&&(c=0,a.options.paging.enabled&&
X&&(c=X[0].offsetHeight),topRowHeight=ke(),bottomRowHeight=le(),d=r[0].clientHeight-d-c-(D+N)-topRowHeight-bottomRowHeight,O&&E&&(d-=E[0].offsetHeight),F=0<U?Math.floor(d/U)+1:0<D?Math.floor(d/D):100,F<a.currentList.length+1&&(P.unbind("mousedown"),P.css("display","block"),P.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=l.getClientMousePos(b,this);var d=Math.floor(r[0].clientHeight);da&&(b.y<da[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,
y:a.scrollPos.y-d}),Bc(!1,d)):b.y>da[0].offsetTop+da[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+d}),Bc(!0,d)))}}),da=angular.element(P.children().eq(0)),Q=!0,m.verScrollVisibility=!0,da.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which)){H.scrollMousePos=a.getMousePos(b);ma=!0;hc=0;ic=999;for(var d=0,c=!1,g=!1,k=a.scrollPos.x+ob-(S+Oa),p=0;p<a.columnList.length;p++)if(!a.isColumnFixed(a.columnList[p])){var e=
a.getColumnWidth(a.columnList[p])+4,d=d+e;!c&&d>=a.scrollPos.x&&(hc=p,c=!0);!g&&d>=k&&(ic=p,g=!0);if(c&&g)break}}b.stopPropagation()})));O||(E.unbind("mousedown"),R.x=0);Q||(P.unbind("mousedown"),R.y=0);O&&Q&&E.css("display","block");!O&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!Q&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0});f.cancel(b)},1)};a.updateScrollView=function(){bd()};var bd=function(){var b=f(function(){var d=0;a.options.grouping.enabled&&v&&(d=v[0].offsetHeight);
var c=0;a.options.paging.enabled&&X&&(c=X[0].offsetHeight);ob=r[0].offsetWidth-2;Dc=r[0].offsetHeight-2-d-c;O&&(Dc-=E[0].offsetHeight);Q&&(ob-=P[0].offsetWidth);Da.css("margin-top",d+"px");Da.css("width",ob+"px");Da.css("height",Dc+"px");O&&(E.css("left","0px"),E.css("bottom",c+"px"),E.css("width",ob-2+"px"));var p=2;a.options.paging.enabled&&X&&(p=4);Q&&(P.css("top",d+"px"),P.css("right","0px"),P.css("height",Dc-p+"px"));O&&Q&&(jb.css("left","auto"),jb.css("right","0px"));var e=f(function(){topRowHeight=
ke();bottomRowHeight=le();var b=D+topRowHeight;O&&ob<Tb&&(Ya=2,pb=E[0].clientWidth-4,Fc=0,pb>Ya&&(Fc=pb-Ya),ec=Math.floor(Fc*ob/Tb),9>ec&&(ec=9),V.css("width",ec+"px"),R.x=Tb-ob,Db=R.x/(Fc-ec-2));var g=a.currentList.length+1;Q&&0<a.currentList.length&&F<g&&(qb=2,Ub=P[0].clientHeight-4,Gc=0,Ub>qb&&(Gc=Ub-qb),fc=Math.floor(Gc*F/g),9>fc&&(fc=9),da.css("height",fc+"px"),Ic=(g-F+1)/(Gc-fc-2),R.y=Math.floor((g-F+1)*U),0>R.y&&(R.y=0),0==w?da.css("top",qb+"px"):w+F-1==a.currentList.length&&da.css("top",Ub-
da[0].offsetHeight+"px"));a.isThereLeftFixedColumns&&(oa?S=oa[0].offsetWidth:Ga?S=Ga[0].offsetWidth:0<a.currentList.length&&(S=gc("left")),Rb=r[0].clientHeight-d-c-D-N,O&&(Rb-=E[0].offsetHeight),db.css("top",d+D+"px"),db.css("width",S+"px"),db.css("height",Rb+"px"),ua&&ua.css("left",S+"px"),ja&&ja.css("left",S+"px"),Ua&&Ua.css("left",S+"px"));a.isThereRightFixedColumns&&(aa?Oa=aa[0].offsetWidth:na?Oa=na[0].offsetWidth:0<a.currentList.length&&(Oa=gc("right")),Sb=r[0].clientHeight-d-c-D-N,O&&(Sb-=E[0].offsetHeight),
g=0,Q&&(g=P[0].offsetWidth),aa&&aa.css("right",g+"px"),Xa.css("top",d+D+"px"),Xa.css("right",g+"px"),Xa.css("width",Oa+"px"),Xa.css("height",Sb+"px"),na&&na.css("right",g+"px"));g=c;O&&E&&(g+=E[0].offsetHeight);Pa.css("bottom",g+"px");ja&&ja.css("top",b+"px");ba&&ba.css("bottom",N+"px");Va&&Va.css("top",topRowHeight+"px");Wa&&Wa.css("top",topRowHeight+"px");b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>R.x&&(b=R.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Db)-(pb-V[0].offsetWidth-
Ya):Math.floor(a.scrollPos.x/Db)+Ya,O&&V&&V.css("left",b+"px"),cd());f.cancel(e)},1);f.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<r[0].clientWidth){for(var b=(r[0].clientWidth-b)/a.columnList.length,k,c=0;c<a.columnList.length;c++)k=a.getColumnWidth(a.columnList[c])+b,a.columnList[c][a.options.columnFields.width]=k;return!0}}return!1};m.onCellValueChanging=function(b,c,k){var d=c+w,g=a.getCell(d,
k);if(g&&0==g[a.options.cellFields.allowEdit])return!1;var g=!0,e=a.getColumnObject(k),f="label",h=null;e&&(f=e[a.options.columnFields.editorType],h=e[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=h&&1==h.threeState?b.checkState:b.checked;g=a.callCellValueChanging(a.getRowObject(d),a.getCellObject(d,k),b);break;case "combobox":g=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,k),b.item)}return g};m.onCellValueChanged=function(b,c,k){var d=c+w,g=a.getColumnObject(k),
e="label",f=null;g&&(e=g[a.options.columnFields.editorType],f=g[a.options.columnFields.editorSettings]);switch(e){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(d),a.getCellObject(d,k),b);break;case "combobox":if(d=a.getCell(c,k))d[a.options.cellFields.value]=b.item,m.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);a.updateFocus(c,k);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,k),b.item)}};m.onEditorClick=
function(b,c,k){c+=w;var d=a.getColumnObject(k),g="label";d&&(g=d[a.options.columnFields.editorType]);switch(g){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,k),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,k){if(void 0==b[a.options.cellFields.value]){var d=void 0;switch(c){case "checkbox":d=k&&1==k.threeState?"unchecked":!1;break;case "image":d=""}void 0!=d&&(b[a.options.cellFields.value]=d)}};a.getColumnTemplateUrl=function(b,c){return c?b[a.options.columnFields.templateSettings].footer?
b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var dd=function(b){b=void 0==b?"none":b;var d='<table cellpadding="0" cellspacing="0" style="position:absolute;top:0;">';if(0<a.relatedColumns.length&&0<a.completeColumnList.length){for(var d=d+"<tr>",c=0;c<a.completeColumnList[0].length;c++){var p=a.completeColumnList[0][c];d+='<td class="iui-grid-column-expand-cell" data-level="0" data-index="'+
c+'" data-element="column-expand-cell" colspan="'+p.colSpan+'">';d+='<div class="iui-grid-column-expand-cell-content">';if(a.isColumnRelated(p.column)&&(p=a.getColumnRelatedObject(p.column))){var e=a.isTherePrevRelatedColumn(p),f=a.isThereNextRelatedColumn(p);if(p.children&&0<p.children.length)var h="iui-grid-column-expand-box",h=0!=p.expanded?h+" iui-grid-column-expand-box-close":h+" iui-grid-column-expand-box-open",d=d+('<span class="'+h+'"></span>');else if(e||f)d+='<span class="iui-grid-column-expand-line-vertical"></span>';
e&&(d+='<span class="iui-grid-column-expand-line-left"></span>');f&&0!=p.expanded&&(d+='<span class="iui-grid-column-expand-line-right"></span>')}d+="</div></td>"}d+="</tr>"}for(e=0;e<a.completeColumnList.length;e++){d+="<tr>";for(c=0;c<a.completeColumnList[e].length;c++)p=a.completeColumnList[e][c],f=p.column[a.options.columnFields.fixed],f=void 0==f?"none":f,f==b&&(d+='<td iui-class="{{data['+e+"]["+c+'].style.header.general}}" data-level="'+e+'"  data-index="'+c+'" data-element="column-header"',
0<p.colSpan&&(d+=' colspan="'+p.colSpan+'"'),0<p.rowSpan&&(d+=' rowspan="'+p.rowSpan+'"'),d+='><div iui-class="{{data['+e+"]["+c+'].style.header.cell}}" data-element="column-header-cell"',d+=' iui-contextmenu menu-items="data['+e+"]["+c+"].column."+a.options.columnFields.contextMenu+'"',d+=' iui-style="overflow:hidden;width:{{data['+e+"]["+c+"].width}}px;text-align:{{data["+e+"]["+c+'].headerAlignment}};">',d+='<span iui-class="{{data['+e+"]["+c+'].style.header.content}}" data-element="cell-content"',
d+=' iui-tooltip="data['+e+"]["+c+"].column."+a.options.columnFields.headerTooltip+'">',d+="{{data["+e+"]["+c+"].column."+a.options.columnFields.headerText+"}}</span>",d+='<span iui-class="{{data['+e+"]["+c+'].style.filtering}}" data-level="'+e+'" data-index="'+c+'" data-element="filter-button" ng-show="data['+e+"]["+c+'].showFiltering"></span>',d+='<span iui-class="{{data['+e+"]["+c+'].style.sorting}}" data-level="'+e+'" data-index="'+c+'" data-element="sort-button" ng-show="data['+e+"]["+c+'].showSorting"></span>',
d+="</div>",d+="</td>");d+="</tr>"}return d+"</table>"},ed=function(b){b=void 0==b?"none":b;var d='<table cellpadding="0" cellspacing="0" style="position:absolute;bottom:0;"><tr>';for(var c=0;c<a.columnList.length;c++){var e=a.columnList[c];var f=e[a.options.columnFields.fixed];f=void 0==f?"none":f;f==b&&(d+='<td iui-class="{{dataFooter['+c+'].style.footer.general}}" data-index="'+c+'" data-element="column-footer">',d+='<div iui-class="{{dataFooter['+c+'].style.footer.cell}}" data-element="column-footer-cell"',
d+=' iui-contextmenu menu-items="dataFooter['+c+"].column."+a.options.columnFields.contextMenu+'"',d+=' iui-style="overflow:hidden;width:{{dataFooter['+c+"].width}}px;text-align:{{dataFooter["+c+'].footerAlignment}};">',e[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(e,!0)?(d+='<iui-item-content obj="dataFooter['+c+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{dataFooter['+c+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',
d+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):e[a.options.columnFields.footerContent]?d+=e[a.options.columnFields.footerContent]:e[a.options.columnFields.footerTemplate]?d+='<div ng-include="'+e[a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(d+='<span iui-class="{{dataFooter['+c+'].style.footer.content}}" data-element="cell-content"',d+=' iui-tooltip="dataFooter['+c+"].column."+a.options.columnFields.footerTooltip+'">',d+="{{dataFooter["+
c+"].column."+a.options.columnFields.footerText+"}}</span>"),d+="</div>",d+="</td>")}return d+"</tr></table>"},Ia=function(b,c,k,e){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;e='<tr class="iui-grid-row" data-index="'+b+'" data-fixed="'+e+'"';k&&(e+=' style="position:absolute;top:-9999px"');e+=">";for(var d=0;d<a.columnList.length;d++)k=a.columnList[d][a.options.columnFields.fixed],k=void 0==k?"none":k,k==c&&(e+='<td class="iui-grid-row-cell" data-element="cell" data-index="'+d+'">',
e+="<div",e+=' class="iui-grid-row-cell-content" data-element="cell-content"',e+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(e+="height:"+a.options.rowHeight+"px;"),e=0<a.groups.length&&d==a.options.expandColIndex?e+'padding-left:0px;">':e+'">',e+=me(b,d),e+="</div>",e+="</td>");return e+"</tr>"}c=void 0==c?"none":c;e='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" data-fixed="'+e+'" tabindex="{{data['+b+'].tabindex}}"';k&&(e+=' style="position:absolute;top:-9999px"');
e+=">";for(d=0;d<a.columnList.length;d++)k=a.columnList[d][a.options.columnFields.fixed],k=void 0==k?"none":k,k==c&&(e+='<td iui-class="{{data['+b+"].cells["+d+'].style.cell}}" data-element="cell" data-index="'+d+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+b+"].cells["+d+'].tabindex}}">',e+='<div ng-show="data['+b+'].visible"',e+=' iui-class="{{data['+b+"].cells["+d+'].style.content}}" data-element="cell-content"',e+=' iui-style="width:{{data['+b+"].cells["+d+"].width}}px;text-align:{{data["+
b+"].cells["+d+"].alignment}};",0<a.options.rowHeight&&(e+="height:"+a.options.rowHeight+"px;"),e=0<a.groups.length&&d==a.options.expandColIndex?e+("padding-left:{{data["+b+"].cells["+d+'].indent}}px;">'):e+'">',e+=me(b,d),e+="</div>",e+="</td>");return e+"</tr>"},me=function(b,c){if("optimal"==a.options.displayMode){var d="";c===a.options.expandColIndex&&(d+='<span data-element="expandbox"></span><span data-element="icon"></span>');var g=a.columnList[c][a.options.columnFields.editorSettings],e=rb(c);
switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":d+='<iui-checkbox name="cb-'+l.getUniqueId(4)+'"';g&&1==g.threeState?(d+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(d+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checked-changing="onCellValueChanging(e, '+
b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));d+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&(d+=' control-style="data['+b+"].cells["+c+'].editorStyle"');d=d+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="</iui-checkbox>";break;case "combobox":d=d+('<span iui-class="{{data['+b+"].cells["+
c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";d+="</span>";break;case "image":d+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';d+=' iui-tooltip="data['+b+"].cells["+c+"].related."+
a.options.cellFields.tooltip+'">';break;default:e&&""!=e?d+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(d=d+'<span class="iui-grid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),d+=".</span>")}return d}d="";
c===a.options.expandColIndex&&(d=d+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));g=a.columnList[c][a.options.columnFields.editorSettings];e=rb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":d+='<iui-checkbox name="cb-'+l.getUniqueId(4)+'"';g&&1==g.threeState?(d+=' check-state="data['+b+"].cells["+
c+"].related."+a.options.cellFields.value+'"',d=d+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(d+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));d+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&(d+=' control-style="data['+b+"].cells["+
c+'].editorStyle"');d=d+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="</iui-checkbox>";break;case "combobox":d=d+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="{{data["+b+"].cells["+c+"].related."+
a.options.cellFields.value+".text}}";d+="</span>";break;case "image":d+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';d+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:e&&""!=e?d+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+
b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(d=d+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),d+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",d+="</span>")}return d},v=angular.element('<div class="iui-grid-grouping-panel"></div>'),ea=null,jc=null,Eb=-1,
sb=!1,W=angular.element('<div style="opacity:0.75;position:absolute;top:-9999px;z-index:999;pointer-events:none;"></div>'),fd=0,pa=angular.element('<div style="display:inline-block;"></div>'),tb=[],gd=function(b){var d=b[a.options.columnFields.groupText];d&&""!=d||(d=b[a.options.columnFields.headerText]);return d},lf=function(){Jd();v.unbind("mouseenter mouseleave mousemove mouseup");v.empty();v.remove();tb.length=0;if(a.options.grouping.enabled){var b="",c=0;if(0<a.groups.length)for(var k=0;k<a.groups.length;k++){var e=
"iui-grid-grouping-panel-item";k<a.groups.length-1&&(e+=" iui-grid-grouping-marker");var f=gd(a.groups[k]),b=b+('<div class="'+e+'" data-index="'+k+'">'),b=b+('<p class="iui-grid-grouping-panel-item-label">'+f+"</p>"),b=b+'<span class="iui-grid-grouping-panel-item-button"></span></div>'}else k=angular.element('<span class="iui-grid-grouping-panel-item" style="position:absolute;top:-999px;">Temp</span>'),r.append(k),c=k[0].offsetHeight,k.remove();if(""!=b){var Vc=angular.element(b);v.append(Vc)}ka&&
v.css("opacity",la.opacity);r.append(v);e=0;f=v.find("div");for(k=0;k<f.length;k++){var m=angular.element(f[k]),n=l.getMargin(m[0]);tb.push({x:e,width:m[0].offsetWidth});e+=m[0].offsetWidth+n.left+n.right}k=l.getPadding(v[0]);v.bind("mouseenter",function(b){a.options.enabled&&1==b.which&&Y&&x&&(W.empty(),W.append('<div class="iui-grid-grouping-panel-item">'+x[a.options.columnFields.headerText]+"</div>"),v.append(W),fd=W[0].offsetWidth,W.css("display","none"),sb=!0,ea=null);b.stopPropagation()});v.bind("mousemove",
function(b){if(a.options.enabled&&1==b.which&&(Y&&x||sb&&ea)){if(Y&&x&&0>a.columnList.indexOf(x)){r.css("cursor","no-drop");document.body.style.cursor="no-drop";return}var d=v[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset;var k=a.getMousePos(b);k.x-=d.left+c;k.y-=d.top+g;d="";x?d=gd(x):ea&&(d=gd(ea));ne(b,d);ga&&ga.css("display","none");r.css("cursor","default");document.body.style.cursor="default";jc=null;d=-1;ea&&(d=a.groups.indexOf(ea));for(c=
tb.length-1;0<=c;c--)if(k.x>=tb[c].x){k.x<=tb[c].x+tb[c].width&&(jc=a.groups[c]);if(g=a.getElemFromGroup(a.groups[c]))Eb=c,pa.css("display","inline-block"),x&&pa.css("width",g[0].offsetWidth+"px"),x?k.x<=tb[c].x+tb[c].width?(k=oe(jc))?(k=a.getElemFromGroup(k))&&k.after(pa):v.prepend(pa):g.after(pa):0==c?v.prepend(pa):d>c?(k=oe(jc))&&(k=a.getElemFromGroup(k))&&k.after(pa):g.after(pa);Eb=0>Eb?0:Eb>a.groups.length-1?a.groups.length-1:Eb;break}}b.stopPropagation()});v.bind("mouseup",function(b){if(a.options.enabled&&
1==b.which&&(Y&&x||sb&&ea)){if(sb&&ea){var d=a.groups.indexOf(ea);var c=Eb;d!=c?(a.moveObject(d,c,a.groups),a.updateLayout(),a.callGroupChange(ea)):(c=a.getElemFromGroup(ea))&&c.css("display","inline-block")}else jc?(c=Eb,0>a.groups.indexOf(x)&&(a.groups.splice(c,0,x),a.updateLayout(),a.callGroupChange(x))):0>a.groups.indexOf(x)&&(a.groups.push(x),a.updateLayout(),a.callGroupChange(x));W&&W.remove();pa&&pa.remove();x=null;nb=-1;sb=Y=!1;ea=null;ga&&ga.remove();r.css("cursor","default");document.body.style.cursor=
"default";b.stopPropagation()}});v.bind("mouseleave",function(b){a.options.enabled&&(pa&&pa.remove(),W&&W.css("display","none"))});v.css("width",r[0].clientWidth+"px");""==b?v.css("height",c+(k.top+k.bottom)-2+"px"):Vc&&v.css("height",Vc[0].offsetHeight+(k.top+k.bottom)-2+"px");kf();a.updateGroupPanel()}};a.updateGroupPanel=function(){var b=1;a.options.enabled||(b=.5);if(v){var c=v.find("span");if(c&&0<c.length)for(var k=0;k<c.length;k++){var e=angular.element(c[k]);e.css("opacity",b)}if((c=v.find("p"))&&
0<c.length)for(k=0;k<c.length;k++)e=angular.element(c[k]),a.options.enabled?e.removeClass("iui-grid-grouping-panel-item-disabled"):e.addClass("iui-grid-grouping-panel-item-disabled")}};var ne=function(b,c){W.empty();W.append('<div class="iui-grid-grouping-panel-item"><p class="iui-grid-grouping-panel-item-label">'+c+"</p></div>");v.append(W);var d=l.getPadding(v[0]),g=v[0].getBoundingClientRect(),e=angular.element(h)[0].pageXOffset,f=angular.element(h)[0].pageYOffset,m=a.getMousePos(b);m.x-=g.left+
e;m.y-=g.top+f;fd=W[0].offsetWidth;g=m.x-fd/2;W.css("top",d.top+"px");W.css("left",g+"px");W.css("display","block")};a.getGroupFromElem=function(b){return b&&(b=angular.element(b))&&(b=b.parent(),b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,a.isGroupIndexinRange(b,a.groups)))?a.groups[b]:null};a.getElemFromGroup=function(b){var d=null;if(b){b=a.groups.indexOf(b);for(var c=v.find("div"),e=0;e<c.length;e++){var f=angular.element(c[e]);if(f[0].attributes&&f[0].attributes["data-index"]&&
f[0].attributes["data-index"].value==b){d=f;break}}}return d};var oe=function(b){return b&&(b=a.groups.indexOf(b)-1,a.isGroupIndexinRange(b,a.groups))?a.groups[b]:null},Jd=function(){for(var a,b=v.find("p"),c=0;c<b.length;c++)a=angular.element(b[c]),a.unbind("mousedown");b=v.find("span");for(c=0;c<b.length;c++)a=angular.element(b[c]),a.unbind("mousedown")},kf=function(){for(var b,c=v.find("p"),k=0;k<c.length;k++)b=angular.element(c[k]),b.bind("mousedown",function(b){if(a.options.enabled&&1==b.which){var d=
angular.element(this),c=d.parent();sb=!0;ea=a.getGroupFromElem(d);pa.css("width",c[0].offsetWidth+6+"px");pa.css("display","inline-block");c.after(pa);c.css("display","none");ne(b,ea[a.options.columnFields.headerText])}b.stopPropagation()});c=v.find("span");for(k=0;k<c.length;k++)b=angular.element(c[k]),b.bind("mousedown",function(b){if(a.options.enabled){var d=a.getGroupFromElem(this);if(d){var c=a.groups.indexOf(d);0<=c&&0!=a.callGroupRemoving(d)&&(a.groups.splice(c,1),a.updateLayout(),a.callGroupRemoved(d),
a.callGroupChange(d))}}b.stopPropagation()})};a.isGroupIndexinRange=function(a,b){return 0<=a&&a<b.length?!0:!1};a.moveObject=function(b,c,k){a.isGroupIndexinRange(b,k)&&a.isGroupIndexinRange(c,k)&&k.splice(c,0,k.splice(b,1)[0])};var mf=function(){U=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var g=angular.element('<div class="'+a.options.controlStyle.row.cell.content+
'" style="position:absolute;top:-9999999px;">Temp</div>');r.append(g);b=l.getPadding(g[0]);g.remove()}U=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&u){for(var b=[],k=[],g=[],e=[],h=[],m=[],n=0,q=0;q<a.currentList.length&&10>q;q++)b.push(Ia(q,"none",!0)),k.push(c(b[q])(u)),r.append(k[q]),a.isThereLeftFixedColumns&&(g.push(Ia(q,"left",!0)),e.push(c(g[q])(u)),r.append(e[q])),a.isThereRightFixedColumns&&(h.push(Ia(q,"right",!0)),m.push(c(h[q])(u)),r.append(m[q])),n++;if(0<n)var Wc=
f(function(){for(var b=0,d=0,c=0,g=0;g<n;g++)b+=k[g][0].offsetHeight,k[g].remove(),a.isThereLeftFixedColumns&&(d+=e[g][0].offsetHeight,e[g].remove()),a.isThereRightFixedColumns&&(c+=m[g][0].offsetHeight,m[g].remove());U=Math.floor(Math.max(Math.max(b,d),c)/n);f.cancel(Wc)},1)}},L=null,hd=0,id=0,X=angular.element('<div class="iui-pagination-panel"></div>'),nf=function(){L&&L.$destroy();X.empty();X.remove();id=hd=0;if(a.options.paging.showControlPanel){L=m.$new();L.currentPage=0;L.minPages=0;L.numPages=
a.pageList.length;0<L.numPages&&0==L.currentPage&&(L.currentPage=1);L.onFirstPage=function(){a.options.enabled&&(a.firstPage(),L.currentPage=a.currentPageNumber)};L.onLastPage=function(){a.options.enabled&&(a.lastPage(),L.currentPage=a.currentPageNumber)};L.onNextPage=function(){a.options.enabled&&(a.nextPage(),L.currentPage=a.currentPageNumber)};L.onPrevPage=function(){a.options.enabled&&(a.prevPage(),L.currentPage=a.currentPageNumber)};L.$watch("currentPage",function(b,d){a.options.enabled&&b!=
d&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});hd=r[0].clientWidth;for(var b="",g=0;6>g;g++)switch(g){case 0:b+='<span class="iui-pagination-panel-button iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:b+='<span class="iui-pagination-panel-button iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:b+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:b+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';
break;case 4:b+='<span class="iui-pagination-panel-button iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:b+='<span class="iui-pagination-panel-button iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(b)(L);X.append(b);r.append(X);X.css("width",hd+"px");b&&(l.getMargin(b[0]),g=l.getPadding(X[0]),id=b[0].offsetHeight+(g.top+g.bottom)-2,X.css("height",id+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(X){var c=X.find("span");
if(c&&0<c.length)for(var k=0;k<c.length;k++){var e=angular.element(c[k]);e.css("opacity",b)}(c=X.find("input"))&&0<c.length&&(e=angular.element(c[0]),a.options.enabled?e.removeAttr("disabled"):e.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;L&&(L.currentPage=0<L.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,L&&(L.currentPage=a.currentPageNumber)))};
var eb=angular.element('<div class="iui-grid-block" style="position:absolute;top:-9999999px"></div>'),qa=angular.element('<div class="iui-grid-block iui-grid-block-top" style="position:absolute;top:-9999999px"></div>'),Ja=angular.element('<div class="iui-grid-block iui-grid-block-bottom" style="position:absolute;top:-9999999px"></div>'),fb=angular.element('<div class="iui-grid-block iui-grid-block-left" style="position:absolute;top:-9999999px"></div>'),gb=angular.element('<div class="iui-grid-block iui-grid-block-right" style="position:absolute;top:-9999999px"></div>'),
pe=function(){eb&&(eb.empty(),eb.remove());qa&&(qa.empty(),qa.remove());Ja&&(Ja.empty(),Ja.remove());fb&&(fb.empty(),fb.remove());gb&&(gb.empty(),gb.remove())},of=function(){if(1<a.updateStatus)T("end");else var b=f(function(){if(0<a.columnList.length&&1==a.updateStatus){var d=0;a.options.grouping.enabled&&v&&(d=v[0].offsetHeight);z=m.$new();z.data=qe();z.dataFooter=re();a.refreshColumns();z.$apply();for(var k=N=D=0;k<a.columnList.length;k++){var e={columnID:void 0!=a.columnList[k][a.options.columnFields.id]?
a.columnList[k][a.options.columnFields.id]:k,avgItemHeight:0};switch(a.columnList[k][a.options.columnFields.editorType]){case "combobox":$e(a.columnList[k].editorSettings,k,e);Kb.push(e);break;default:Kb.push(e)}}a.options.showHeader&&(r.append(qa),ka&&(Na.css("opacity",la.opacity),qa.css("opacity",la.opacity)),qa.css("top",d+"px"),d=dd(),ua=angular.element(c(d)(z)),qa.append(ua),a.isThereLeftFixedColumns&&(d=dd("left"),oa=c(d)(z),qa.append(oa),oa.css("z-index","2"),oa.addClass("iui-grid-column-header-left")),
a.isThereRightFixedColumns&&(d=dd("right"),aa=c(d)(z),qa.append(aa),aa.css("right","0"),aa.css("z-index","1"),aa.addClass("iui-grid-column-header-right")));a.options.showFooter&&(r.append(Ja),ka&&(Pa.css("opacity",la.opacity),Ja.css("opacity",la.opacity)),d=ed(),Ua=c(d)(z),Ja.append(Ua),a.isThereLeftFixedColumns&&(d=ed("left"),Ga=c(d)(z),Ja.append(Ga),Ga.css("z-index","2"),Ga.addClass("iui-grid-column-footer-left")),a.isThereRightFixedColumns&&(d=ed("right"),na=c(d)(z),Ja.append(na),na.css("right",
"0"),na.css("z-index","1"),na.addClass("iui-grid-column-footer-right")));for(var h,l,d=-1,k=0;k<a.completeColumnList.length;k++)for(e=0;e<a.completeColumnList[k].length;e++){var n=a.completeColumnList[k][e].column;l=h=null;n[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(n)?(h=n[a.options.columnFields.templateSettings].header,d=1):n[a.options.columnFields.headerContent]?(h=n[a.options.columnFields.headerContent],d=2):n[a.options.columnFields.headerTemplate]&&(h=n[a.options.columnFields.headerTemplate],
d=3);n[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(n,!0)?l=n[a.options.columnFields.templateSettings].footer:n[a.options.columnFields.footerContent]?l=n[a.options.columnFields.footerContent]:n[a.options.columnFields.footerTemplate]&&(l=n[a.options.columnFields.footerTemplate]);if((h||l)&&(l=a.getElemFromColumnCell(n,n[a.options.columnFields.fixed]))&&h&&h&&(l=a.getChildElement(l,"column-header-cell")))switch(l.empty(),d){case 1:z&&(h='<iui-item-content obj="data['+k+"]["+e+"].column."+
a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+k+"]["+e+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+k+"]["+e+'].draggable}}"',h+=' data-element="header-template-content" ng-cloak></iui-item-content>',l.append(c(h)(z)));break;case 2:l.append(c(h)(m.$parent));break;case 3:h='<div ng-include="'+h+'"',n[a.options.columnFields.headerTemplateModel]&&(h+=' onload="'+n[a.options.columnFields.headerTemplateModel]+'"'),h+=' style="margin:0;padding:0"></div>',
l.append(c(h)(m.$parent))}}Qa(40);T("rows")}else Qa(70),T("scroll");f.cancel(b)},1)},pf=function(){if(1<a.updateStatus)T("end");else var b=f(function(){if(0<a.columnList.length){var d=0;a.options.grouping.enabled&&v&&(d=v[0].offsetHeight);var k=0;a.options.paging.enabled&&X&&(k=X[0].offsetHeight);var e=0;if(a.options.showHeader&&ua){D=ua[0].offsetHeight;a.isThereLeftFixedColumns&&oa?D=oa[0].offsetHeight:a.isThereRightFixedColumns&&aa&&(D=aa[0].offsetHeight);var h=0,l=ua.find("td");if(l&&0<l.length)for(var n=
0;n<l.length;n++)var q=angular.element(l[n]),h=h+q[0].offsetWidth;h>r[0].clientWidth&&(h=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),h.css("bottom","-9999px"),r.append(h),e=h[0].offsetHeight,h.remove());qa.css("width",r[0].clientWidth+"px");qa.css("height",D+"px");a.isThereLeftFixedColumns&&(S=oa[0].offsetWidth,Rb=r[0].clientHeight-D-N,ua.css("left",S+"px"));a.isThereRightFixedColumns&&(Oa=aa[0].offsetWidth,Sb=r[0].clientHeight-
D-N)}a.options.showFooter&&(N=Ua[0].offsetHeight,a.isThereLeftFixedColumns&&Ga?N=Ga[0].offsetHeight:a.isThereRightFixedColumns&&na&&(N=na[0].offsetHeight),Ja.css("width",r[0].clientWidth+"px"),Ja.css("height",N+"px"),a.isThereLeftFixedColumns&&(S=Ga[0].offsetWidth,Rb=r[0].clientHeight-D-N,Ua.css("left",S+"px")),a.isThereRightFixedColumns&&(Oa=na[0].offsetWidth,Sb=r[0].clientHeight-D-N));jd();if(0<a.currentList.length){u=m.$new();u.data=kd();xa=m.$new();xa.data=se();ya=m.$new();ya.data=te();a.refreshRows();
u.$apply();xa.$apply();ya.$apply();mf();var Wc=f(function(){Wd();ja&&ja.remove();ia&&ia.remove();ba&&ba.remove();Va&&Va.remove();va&&va.remove();wa&&wa.remove();Wa&&Wa.remove();ha&&ha.remove();Ha&&Ha.remove();K=0;for(var b="",g=0;g<a.currentTopList.length;g++)b+=Ia(g,"none",!1,"top"),K++;0<K&&(ia=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:'+D+'px;"></table>'),ia.append(c(b)(xa)),eb.append(ia));K=0;b="";for(g=0;g<a.currentBottomList.length;g++)b+=
Ia(g,"none",!1,"bottom"),K++;0<K&&(ba=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block" style="position:absolute;bottom:'+N+'px;"></table>'),ba.append(c(b)(ya)),eb.append(ba));b=r[0].clientHeight-d-k-(D+N)-e;F=0<U?Math.floor(b/U)+1:0<D?Math.floor(b/D)+1:100;K=0;b="";for(g=0;g<F;g++)b+=Ia(g),K++;if(0<K){ja=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+(D+topRowHeight)+'px;"></table>');ja.append(c(b)(u));eb.append(ja);
if(a.isThereLeftFixedColumns){b="";for(g=K=0;g<a.currentTopList.length;g++)b+=Ia(g,"left",!1,"top"),K++;0<K&&(va=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-left-top" style="position:absolute;"></table>'),va.append(c(b)(xa)),fb.append(va));b="";for(g=K=0;g<a.currentBottomList.length;g++)b+=Ia(g,"left",!1,"bottom"),K++;0<K&&(wa=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),
wa.append(c(b)(ya)),fb.append(wa));ja.css("left",S+"px");b="";for(g=K=0;g<F;g++)b+=Ia(g,"left"),K++;0<K&&(Va=angular.element('<table class="iui-grid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Va.append(c(b)(u)),fb.append(Va),r.append(fb),ka&&db.css("opacity",la.opacity))}if(a.isThereRightFixedColumns){b="";for(g=K=0;g<a.currentTopList.length;g++)b+=Ia(g,"right",!1,"top"),K++;0<K&&(ha=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-right-top" style="position:absolute;"></table>'),
ha.append(c(b)(xa)),gb.append(ha));b="";for(g=K=0;g<a.currentBottomList.length;g++)b+=Ia(g,"right",!1,"bottom"),K++;0<K&&(Ha=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),Ha.append(c(b)(ya)),gb.append(Ha));b="";for(g=K=0;g<F;g++)b+=Ia(g,"right"),K++;0<K&&(Wa=angular.element('<table class="iui-grid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Wa.append(c(b)(u)),
gb.append(Wa),r.append(gb),ka&&Xa.css("opacity",la.opacity))}}Qa(70);T("scroll");f.cancel(Wc)},1)}else Qa(70),T("scroll")}else Qa(70),T("scroll");f.cancel(b)},1)},Vb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},qf=function(){if(1<a.updateStatus)T("end");else{if(1==a.updateStatus){ia&&ia.unbind("dragover");ba&&ba.unbind("dragover");va&&va.unbind("dragover");wa&&wa.unbind("dragover");
ha&&ha.unbind("dragover");ha&&ha.unbind("dragover");eb&&(Da.empty(),Da.append(eb.children()),ia&&ia.bind("dragover",function(a){Vb(a);a.stopPropagation()}),ba&&ba.bind("dragover",function(a){Vb(a);a.stopPropagation()}));if(qa){var b=0;a.options.grouping.enabled&&v&&(b=v[0].offsetHeight);Na.css("top",b+"px");Na.empty();Na.append(qa.children());a.options.showHeader&&(Na.css("width",r[0].clientWidth+"px"),Na.css("height",D+"px"));r.append(Na)}Ja&&(Pa.empty(),Pa.append(Ja.children()),a.options.showFooter&&
(Pa.css("width",r[0].clientWidth+"px"),Pa.css("height",N+"px")),r.append(Pa));fb&&(db.empty(),db.append(fb.children()),r.append(db),va&&va.bind("dragover",function(a){Vb(a);a.stopPropagation()}),wa&&wa.bind("dragover",function(a){Vb(a);a.stopPropagation()}));gb&&(Xa.empty(),Xa.append(gb.children()),r.append(Xa),ha&&ha.bind("dragover",function(a){Vb(a);a.stopPropagation()}),Ha&&Ha.bind("dragover",function(a){Vb(a);a.stopPropagation()}));a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();
a.updateScrollView()}Qa(80,"complete");T("complete")}},rf=function(){switch(la.type){case "circular":1==a.updateStatus&&(ue(),Wb=0,ub=!0,a.callLoadComplete());break;case "linear":ve(!1);break;default:Wb=0,ub=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)Xb=a.updateActive=!0,1==a.updateStatus?T("start"):T("end");else if(ld())var b=f(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();f.cancel(b)},
1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},kc=[],lc=[],mc=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";kc.length=0;lc.length=0;mc.length=0;for(var k=kc;3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var e,f,h=0;h<c.length;h++){e=angular.element(c[h]);f={rowElem:e,cellList:[]};if(h<F){e=e.find("td");for(var l=0;l<e.length;l++){var m=angular.element(e[l]),n=a.getContentElement(m);if(n){var r=l;m[0].attributes&&
m[0].attributes["data-index"]&&(r=parseInt(m[0].attributes["data-index"].value,10));m={cell:m,block:n,expandBox:null,icon:null,content:null};r==a.options.expandColIndex&&(m.expandBox=angular.element(a.getContentElement(n,"expandbox")),m.icon=angular.element(a.getContentElement(n,"icon")));var q="content";switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":q="checkbox";break;case "image":q="image";break;default:(r=rb(r))&&""!=r&&(q="template-content")}m.content=angular.element(a.getContentElement(n,
q));f.cellList.push(m)}}}k.push(f)}b++;1==b?(c="left",k=lc):(c="right",k=mc)}}};var T=function(b){if(Xb&&!Fb)switch(b){case "start":1<a.updateStatus?T("end"):(a.updateColumnList(),a.updateGroupList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Qa(10),T("init"));break;case "init":1<a.updateStatus?T("end"):(Kb.length=0,Rd(),a.options.grouping.enabled&&lf(),Ec||ma||bd(),pe(),Ua=ua=ba=ia=ja=null,Rb=S=0,wa=va=Va=oa=null,Sb=Oa=0,Ha=ha=Wa=aa=null,z&&z.$destroy(),u&&u.$destroy(),a.options.paging.enabled&&
nf(),r.append(eb),Qa(20),T("columns"));break;case "columns":of();break;case "rows":qa?a.options.showHeader&&qa.find("td").length<a.columnList.length?f(function(){T(b)},1):pf():f(function(){T(b)},1);break;case "scroll":qf();break;case "complete":1<a.updateStatus?T("end"):(pe(),Qa(90),T("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(ua&&Xc(ua),a.isThereLeftFixedColumns&&oa&&Xc(oa),a.isThereRightFixedColumns&&aa&&Xc(aa)),0<a.currentList.length&&gf(),Qa(100));
T("end");break;case "end":rf()}else f(function(){T(b)},1)},we=5,Jc=0,Gb=0,Kc=0,xe=0,Fb=!1,Lc=!1,la={type:"none",speed:"normal",opacity:0},md=null,ka=!1,ub=!1,ve=function(b){var d=n(function(){b?Gb++:Gb--;Kc=(r[0].clientHeight-Gb)/2+2;nc.css("height",Gb+"px");hb.css("top",Kc+"px");b&&Gb>=we?(ka=!0,Qa(0),ub=Fb=!1,n.cancel(d)):!b&&0>=Gb&&(hb&&hb.remove(),Wb=0,ub=!0,a.callLoadComplete(),n.cancel(d))},20)},ue=function(){md&&n.cancel(md);Za&&Za.remove()};a.beginLoad=function(a){if(!Fb)switch(Fb=!0,la=a?
{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},nd(la.opacity),la.type){case "circular":ue();r.append(Za);Za.css("top",(r[0].clientHeight-Za[0].offsetHeight)/2+"px");Za.css("left",(r[0].clientWidth-Za[0].offsetWidth)/2+"px");ka=!0;ub=Fb=!1;var b=0,d=3;switch(la.speed){case "veryfast":d=7;break;case "fast":d=5;break;case "slow":d=2;break;case "veryslow":d=1}md=n(function(){b+=d;360<b&&(b=0);var a=
"rotate("+b+"deg)";Za.css("-ms-transform",a);Za.css("-webkit-transform",a);Za.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');r.append(a);we=parseInt(getComputedStyle(a[0]).height,10);a.remove();nc.css("width","0px");nc.css("height","0px");r.append(hb);Wb=0;Jc=Math.floor(.5*r[0].clientWidth);Gb=0;Kc=r[0].clientHeight/2+2;xe=(r[0].clientWidth-Jc)/2;hb.css("width",Jc+"px");hb.css("top",Kc+"px");hb.css("left",
xe+"px");hb.css("opacity","1");ve(!0);break;default:ka=!0,ub=Fb=!1}};a.endLoad=function(){if(!Lc)if(Lc=!0,ka){ka=!1;var a=3,b=la.opacity,c=n(function(){ub&&(10<a||1<=b?(nd(1),Lc=Fb=ub=!1,la={type:"none",speed:"normal"},n.cancel(c)):(b+=a/10,nd(b),a+=3))},1)}else Lc=!1};var nd=function(a){v&&v.css("opacity",a);Na&&Na.css("opacity",a);db&&db.css("opacity",a);Da&&Da.css("opacity",a);Xa&&Xa.css("opacity",a);Pa&&Pa.css("opacity",a);X&&X.css("opacity",a);E&&E.css("opacity",a);P&&P.css("opacity",a);jb&&
jb.css("opacity",a)},nc=angular.element('<div class="iui-load-block-progress"></div>'),hb=angular.element('<div class="iui-load-block"></div>');hb.append(nc);var Wb=0,Xb=!1,Za=angular.element('<div class="iui-load-circular"></div>'),Qa=function(a){if(ka&&"linear"==la.type){Xb=!1;var b=Math.floor(Jc*a/100),d=Wb;a=10;switch(la.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var c=b>d?Math.floor((b-d)/a):1,c=0<c?c:1,e=n(function(){d+=c;nc.css("width",
d+"px");d>=b&&(Wb=b,Xb=!0,n.cancel(e))},1)}else Xb=!0};a.updateStatus=0;a.updateActive=!1;a.updateLayout=function(b){r.append(H.$tw);H.s1t(H.twp);b=!0;for(var d=r.parent();"body"!=d[0].tagName.toLowerCase();){if("none"==getComputedStyle(d[0]).display){b=!1;break}d=d.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,r.removeClass("iui-grid-block-rtl"),a.options.rtl&&r.addClass("iui-grid-block-rtl"),Da.removeClass("iui-grid-block-shift-left iui-grid-block-rtl"),
Da.addClass(Uc()),U=0,F=100,N=D=0,Xb=!0,T("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.updateGroupList();a.options.paging.enabled&&(a.updatePageList(),L&&(L.minPages=0<a.pageList.length?1:0,L.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var d=f(function(){a.updateViewSize();a.updateViewSize();b&&a.updateScrollVisibility();a.updateScrollView();f.cancel(d)},1)}};var ye=function(b){var d={top:0,
right:0,bottom:0,left:0};(b=a.getElemFromColumnCell(b))&&(b=a.getChildElement(b,"column-header-cell"))&&(d=l.getPadding(b[0]));return d},ze=function(b){var d=b[a.options.columnFields.columns];if(!d||0==d.length){var c=a.getColumnWidth(b);c=0<=c?c:0;b=od(b);c<b.min&&(c=b.min);c>b.max&&(c=b.max);return c}for(var e=0,f=0;f<d.length;f++)a.isColumnWithChildenVisible(d[f])&&(c=ye(d[f]),e+=ze(d[f])+c.left+c.right);c=ye(b);return e-=c.left+c.right},Ae=function(b,c){var d=b?b.column:c;return{draggable:b?b.isRoot&&
a.options.enabled&&a.options.allowColumnReorder&&b.column[a.options.columnFields.allowDrag]:!1,headerAlignment:d[a.options.columnFields.headerAlignment],footerAlignment:d[a.options.columnFields.footerAlignment],index:a.columnList?a.columnList.indexOf(d):-1,indent:0,column:d,showFiltering:a.isFilteringAllowed(d),showSorting:a.isSortingAllowed()&&d==a.sortColumn,style:{header:{},footer:{}},width:ze(d)}},Be=function(b,c){var d=0;if(c==a.options.expandColIndex){var g=a.columnList[a.options.expandColIndex],
d=a.getColumnWidth(g),e=d-a.indentList[b],e=0<=e?e:0;var f={top:0,right:0,bottom:0,left:0};(g=a.getElemFromColumn(g,g[a.options.columnFields.fixed]))&&(g=a.getChildElement(g,"column-header-cell"))&&(f=l.getPadding(g[0]));f=f.left+a.indentList[b];0==e&&(f=d);d=f}return d},pd=function(b,c,k){var d=c;k&&(k=a.columnList[c][a.options.columnFields.id])&&(d=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,k));return d},Ce=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?
a.columnList[b][a.options.columnFields.contentAlignment]:"left"},De=function(b,c){var d=a.columnList[c],g=a.getColumnWidth(d),d=od(d);g<d.min&&(g=d.min);g>d.max&&(g=d.max);c==a.options.expandColIndex&&(g-=a.indentList[b]);return 0<=g?g:0},qd=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},Ee=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?
a.getTabIndex().toString()+(b+1).toString():""},Fe=function(b,c,k){if(0<=c){var d=a.currentList[b][a.options.rowFields.cells];switch(k){case "top":d=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":d=a.currentBottomList[b][a.options.rowFields.cells]}if(c<d.length)return d[c]}return{}},rb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},rd=function(b,c,k,e){for(var d=[],g=0;g<a.columnList.length;g++){var f=
pd(c,g,k),p=k?Fe(c,f,e):{},h=Ce(g),l=a.columnList[g][a.options.columnFields.editorSettings],l=l&&l.style?l.style:null;if(k)a:{if(0<=f){var m=a.currentList[c][a.options.rowFields.cells];if(f<m.length){m=1==a.options.enabled&&m[f][a.options.cellFields.enabled];break a}}m=1==a.options.enabled}else m=!1;var n=k?Be(c,g):0,r=f,q=k?qd(c,g):"",t=rb(g);if(k){var u=c;var w=f;var v=rb(g),u=Fe(u,w);w=0<=w&&v&&""!=v&&u&&void 0!=u[a.options.cellFields.templateObj]&&null!=u[a.options.cellFields.templateObj]?!0:
!1}else w=!1;if(k)a:{if(0<=f&&(v=a.currentList[c][a.options.rowFields.cells],f<v.length)){v=v[f][a.options.cellFields.text];break a}v=""}else v="";if(k)a:{if(0<=f&&(u=a.currentList[c][a.options.rowFields.cells],f<u.length)){u=u[f][a.options.cellFields.value];break a}u=null}else u=null;f={related:p,alignment:h,editorStyle:l,enabled:m,indent:n,index:r,style:{},tabindex:q,templateUrl:t,templateVisible:w,text:v,value:u,visible:k?0<=f?!0:!1:!1,width:k?De(c,g):0};d.push(f)}return{cells:d,expandBox:k?Sd(b):
"",expandBoxVisible:k&&!e?0!=a.options.showExpandBoxes:!1,draggable:k&&!e?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:k?je(b):"",iconVisible:k?0!=a.options.showIcons&&ad(b):!1,index:c,row:k?b:{},style:{},tabindex:k&&!e?Ee(c):"",updateContextMenu:k?null!=b[a.options.rowFields.contextMenu]:!1,visible:k}},qe=function(){for(var b=[],c=0;c<a.completeColumnList.length;c++){b.push([]);for(var e=0;e<a.completeColumnList[c].length;e++)b[c].push(Ae(a.completeColumnList[c][e]))}return b},re=function(){for(var b=
[],c=0;c<a.columnList.length;c++)b.push(Ae(null,a.columnList[c]));return b},kd=function(){for(var b=[],c=w;c<w+F;c++)b.push(rd(a.currentList[c],c,c<a.currentList.length));return b},se=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(rd(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},te=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(rd(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},jd=function(){for(var b,c=0;c<a.columnList.length;c++)a.isFilteringAllowed(a.columnList[c])&&
(b=a.getElemFromColumn(a.columnList[c],a.columnList[c][a.options.columnFields.fixed]))&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&(b.css("top",(D-parseInt(getComputedStyle(b[0]).height,10))/2-1+"px"),b.css("right","2px"));a.isSortingAllowed()&&a.sortColumn&&(c=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(b=a.getChildElement(c,"column-header-cell"))&&(b=a.getContentElement(b,"sort-button"))&&(b.css("top",(D-parseInt(getComputedStyle(b[0]).height,
10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?b.css("right","22px"):b.css("right","2px"))};a.getRowScope=function(){return u};var He=function(){a.allowEvents=!1;if(z&&0<a.columnList.length)if(z.data=qe(),z.dataFooter=re(),u){if(sd(!1),u.data=kd(),xa&&(xa.data=se()),ya&&(ya.data=te()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),z.$apply(),u.$apply(),
xa&&xa.$apply(),ya&&ya.$apply(),jd(),0>=a.options.rowHeight&&ld())for(var b=w;0<=b&&b<w+F&&b<a.currentList.length;b++)Ge(a.currentList[b])}else a.refresh(null,null,!1),z.$apply(),jd();a.allowEvents=!0},td=function(b,c){var d=0;if(b&&u){var g=a.getElemFromRow(b,c);g&&(d=g[0].offsetHeight)}return d},ld=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var e=rb(c);if(e&&""!=e){b=!0;break}}return b},ud=function(b,c,e){for(var d=0,g="none";3>d;){if((g=a.getElemFromRow(b,c,g))&&(g=g.find("td"))&&0<
g.length)for(var k=0;k<g.length;k++){var f=angular.element(g[k]),f=a.getContentElement(f),h=l.getBorderWidth(f[0]),m=l.getPadding(f[0]);f&&f.css("height",e-(h.top+h.bottom)-(m.top+m.bottom)-2.85+"px")}d++;g=1==d?"top":"bottom"}},vd=function(b,c){for(var d=0,g="none";3>d;){if((g=a.getElemFromRow(b,c,g))&&(g=g.find("td"))&&0<g.length)for(var e=0;e<g.length;e++){var f=angular.element(g[e]);(f=a.getContentElement(f))&&f.css("height","auto")}d++;g=1==d?"top":"bottom"}},Ge=function(a){vd(a,"none");vd(a,
"left");vd(a,"right");var b=td(a),c=td(a,"left"),d=td(a,"right"),b=Math.max(Math.max(b,c),d);ud(a,"none",b);ud(a,"left",b);ud(a,"right",b)};a.updateView=function(b,c){if(b)He(),a.updateCurrentView(c);else var d=f(function(){He();a.updateCurrentView(c);f.cancel(d)},1)};a.updateVerticalScrollView=function(){if(u&&(a.allowEvents=!1,sd(!1),u.data=kd(),a.refresh(null,null,!1,!0),u.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&ld()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=
w;0<=b&&b<w+F&&b<a.currentList.length;b++)Ge(a.currentList[b])};a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,d="none",e=kc;3>c;){var f,h=0,l=a.columnList.length,m=0;if("none"==d&&b)for(h=hc,l=ic,f=0;f<h&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||m++;if(e&&0<e.length)for(var n=0;n<e.length;n++)if(n<F&&n<a.currentList.length&&n+w<a.currentList.length){var r=a.currentList[n+w];e[n].rowElem&&(e[n].rowElem.attr("data-index",n+w),e[n].rowElem.attr("tabindex",
Ee(n+w)));f=m;for(var q=h;q<=l&&q<a.columnList.length;q++){var t=a.columnList[q][a.options.columnFields.fixed]?a.columnList[q][a.options.columnFields.fixed]:"none";if(t==d&&f<e[n].cellList.length){e[n].cellList[f].block.css("width",De(n+w,q)+"px");e[n].cellList[f].block.css("text-align",Ce(q));e[n].cellList[f].block.css("opacity",1);e[n].cellList[f].cell.attr("draggable",a.isRowEnabled(r)&&a.isDragAllowed(r));e[n].cellList[f].cell.attr("tabindex",qd(n+w,q));t="";var u=pd(n+w,q,!0);0<=u&&u<a.currentList[n+
w][a.options.rowFields.cells].length&&(q==a.options.expandColIndex&&(0<a.groups.length&&e[n].cellList[f].block.css("padding-left",Be(n+w,q)+"px"),e[n].cellList[f].expandBox&&(e[n].cellList[f].expandBox.removeAttr("class"),e[n].cellList[f].expandBox.addClass(Sd(r))),e[n].cellList[f].icon&&(e[n].cellList[f].icon.removeAttr("class"),e[n].cellList[f].icon.addClass(je(r)))),t=r[a.options.rowFields.cells][u][a.options.cellFields.text],"combobox"==a.columnList[q][a.options.columnFields.editorType]&&(t=r[a.options.rowFields.cells][u][a.options.cellFields.value]?
r[a.options.rowFields.cells][u][a.options.cellFields.value].text:""));if(e[n].cellList[f].content)switch(a.columnList[q][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=rb(q))&&""!=u||e[n].cellList[f].content.text(t)}f++}}}else for(e[n].rowElem&&(e[n].rowElem.attr("data-index",n+w),e[n].rowElem.attr("tabindex","")),f=m,q=h;q<=l&&q<a.columnList.length;q++)if(t=a.columnList[q][a.options.columnFields.fixed]?a.columnList[q][a.options.columnFields.fixed]:"none",
t==d&&f<e[n].cellList.length){u=q;e[n].cellList[f].block.css("width","0px");e[n].cellList[f].cell.attr("draggable",!1);e[n].cellList[f].cell.attr("tabindex","");u==a.options.expandColIndex&&(0<a.groups.length&&e[n].cellList[f].block.css("padding-left","0px"),e[n].cellList[f].expandBox&&e[n].cellList[f].expandBox.removeAttr("class"),e[n].cellList[f].icon&&e[n].cellList[f].icon.removeAttr("class"));if(e[n].cellList[f].content){switch(a.columnList[u][a.options.columnFields.editorType]){case "checkbox":break;
case "image":break;default:(u=rb(q))&&""!=u||e[n].cellList[f].content.html("")}e[n].cellList[f].content.attr("draggable",!1);e[n].cellList[f].content.attr("tabindex",qd(n+w,q))}f++}c++;1==c?(d="left",e=lc):(d="right",e=mc)}};var oc=function(b,c,e,f){var d={cell:"",content:"",general:"",label:""};switch(e){case "column":f?(e=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=e&&(e+=" "+a.options.controlStyle.column.footer.normal),d.general=e,d.cell="iui-grid-column-footer-cell",
e=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=e&&(e+=" "+a.options.controlStyle.column.footer.content)):(e=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=e&&(e+=" "+a.options.controlStyle.column.header.normal),d.general=e,d.cell="iui-grid-column-header-cell",e=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=e&&(e+=" "+a.options.controlStyle.column.header.content));d.content=e;break;case "row":e=
a.defaultStyle.row.general.normal;a.isRowFixed(b)?(e=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=e&&(e+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=e&&(e+=" "+a.options.controlStyle.row.general.normal);d.general=e;break;case "cell":e=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=e&&(e+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":e=c==w+F-1||c==a.currentList.length-
1?e+" iui-grid-lines-horizontal":e+" iui-grid-lines-none";break;case "horizontal":e+=" iui-grid-lines-horizontal";break;case "vertical":e=c==w+F-1||c==a.currentList.length-1?e+" iui-grid-lines-both":e+" iui-grid-lines-vertical";break;default:e+=" iui-grid-lines-both"}d.general=e;e=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=e&&(e+=" "+a.options.controlStyle.row.cell.content);d.content=e;d.label=a.getDefaultCellLabelClass()}return d},Ie=function(b){var c="";a.isFilteringAllowed(b)&&
(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Je=function(b){var c="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},
Ka=function(b,c,e,f){var d=a.getObjState(b);e=oc(b,e,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",d),c!=a.options.controlStyle.column.footer.normal&&(e.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(e.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",d),c!=a.options.controlStyle.column.header.normal&&(e.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&
(e.content+=" "+b));break;case "group":c=a.getCurrentRowStyle(b,d);c!=a.options.controlStyle.row.general.normal&&(e.general+=" "+c);break;case "row":c=a.getCurrentRowStyle(b,d);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(e.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&(e.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,d),f!=a.options.controlStyle.row.cell.normal&&(e.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&
(e.content+=" "+b)}return e},ib=function(a,b,c,e){var d=u;switch(e){case "top":d=xa;break;case "bottom":d=ya}d&&(d.data[a].cells[b].style.cell=c.general,d.data[a].cells[b].style.content=c.content,d.data[a].cells[b].style.label=c.label)},Ke=function(b){if(u&&(b-=w,0<=b&&b<u.data.length&&u.data[b].visible)){u.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)u.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"}};a.refreshColumns=function(){for(var b=
0;b<a.completeColumnList.length;b++)for(var c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1)};a.refreshRows=function(){for(var b=w;b<w+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Ke(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var Le=function(b,c,e,f,h){if(e&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<
e.data.length&&e.data[c].visible)){e.data[c].style=Ka(b).general;for(var d=oc(b,c,"cell"),g=0;g<a.columnList.length&&g<e.data[c].cells.length;g++){var k=e.data[c].cells[g].index;if(0<=k){var p=b[a.options.rowFields.cells];k<p.length?(k=Ka(p[k],b,c),ib(c,g,k,f)):ib(c,g,d,f)}else ib(c,g,d,f)}void 0==h&&e&&e.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,e,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,e,
f):a.refreshNormal(b,c,e)};var Me=function(a){for(var b=null,c=0;c<z.data.length;c++){for(var d=0;d<z.data[c].length;d++)if(z.data[c][d].column==a){b=z.data[c][d];break}if(b)break}return b};a.refreshNormal=function(b,c,e){if(b)switch(b.type){case "column":z&&(1==a.options.showHeader&&(c=Me(b))&&(c.style.header=Ka(b),c.style.filtering=Ie(b),c.style.sorting=Je(b)),1==a.options.showFooter&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.dataFooter.length&&(z.dataFooter[c].style.footer=Ka(b,null,-1,!0))),void 0==
e&&z&&z.$apply());break;case "group":if(u){var d=a.getRowCurrentIndex(b);var f=d-w;if(0<=f&&f<u.data.length&&u.data[f].visible){u.data[f].style=Ka(b).general;var g=oc(b,d,"cell");for(c=0;c<a.columnList.length&&c<u.data[f].cells.length;c++){var k=u.data[f].cells[c].index;if(0<=k){var h=b[a.options.rowFields.cells];k<h.length?(h=Ka(h[k],b,d),ib(f,c,h)):ib(f,c,g)}else ib(f,c,g)}void 0==e&&u&&u.$apply()}}break;case "row":if(u&&!a.isRowFixed(b)&&(d=a.getRowCurrentIndex(b),f=d-w,0<=f&&f<u.data.length&&
u.data[f].visible)){u.data[f].style=Ka(b).general;g=oc(b,d,"cell");for(c=0;c<a.columnList.length&&c<u.data[f].cells.length;c++)k=u.data[f].cells[c].index,0<=k?(h=b[a.options.rowFields.cells],k<h.length?(h=Ka(h[k],b,d),ib(f,c,h)):ib(f,c,g)):ib(f,c,g);void 0==e&&u&&u.$apply()}Le(b,a.currentTopList,xa,"top",e);Le(b,a.currentBottomList,ya,"bottom",e)}else{for(b=0;b<a.completeColumnList.length;b++)for(c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1);for(b=w;b<
w+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Ke(b);1==e&&u&&u.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==e&&xa&&xa.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==e&&ya&&ya.$apply()}};a.refreshOptimal=function(b,c,e,f){if(b)switch(b.type){case "column":z&&(1==a.options.showHeader&&(c=Me(b))&&(c.style.header=Ka(b),c.style.filtering=Ie(b),c.style.sorting=Je(b)),1==a.options.showFooter&&
(c=a.getColumnCurrentIndex(b),0<=c&&c<z.dataFooter.length&&(z.dataFooter[c].style.footer=Ka(b,null,-1,!0))),void 0==e&&z&&z.$apply());break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.completeColumnList.length;b++)for(e=0;e<a.completeColumnList[b].length;e++)a.refresh(a.completeColumnList[b][e].column,null,!1);for(b=w;b<w+F;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):Ne(b-w)}};var Ne=function(b,c){for(var d=0,e="none",f=kc;3>d;){var g=b,h=0,l=a.columnList.length,m=
0;if("none"==e&&c)for(var h=hc,l=ic,n=0;n<h&&n<a.columnList.length;n++)a.isColumnFixed(a.columnList[n])||m++;if(f&&0<f.length&&0<=g&&g<f.length&&u)for(pc(f[g].rowElem,a.defaultStyle.row.general.normal);h<=l&&h<a.columnList.length;h++)(a.columnList[h][a.options.columnFields.fixed]?a.columnList[h][a.options.columnFields.fixed]:"none")==e&&m<f[g].cellList.length&&(pc(f[g].cellList[m].cell,a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"),m++);d++;1==d?(e="left",f=lc):(e="right",f=mc)}},pc=function(a,
b){a&&(a.removeAttr("class"),a.addClass(b))};a.refreshCurrentView=function(b,c){for(var d=0,e="none",f=kc;3>d;){var g=b,h=c;if(g)switch(g.type){case "group":Oe(g,f,e,h);break;case "row":Oe(g,f,e,h)}else for(g=w;g<w+F;g++)g<a.currentList.length?a.refreshCurrentView(a.currentList[g],!0):Ne(g,!0);d++;1==d?(e="left",f=lc):(e="right",f=mc)}};var Oe=function(b,c,e,f){if(u&&c&&0<c.length){var d=a.getRowCurrentIndex(b),g=d-w;if(0<=g&&g<c.length&&g<u.data.length&&u.data[g].visible){pc(c[g].rowElem,Ka(b).general);
var k=0,h=a.columnList.length,p=0;if("none"==e&&f)for(k=hc,h=ic,f=0;f<k&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||p++;for(;k<=h&&k<a.columnList.length;k++)(a.columnList[k][a.options.columnFields.fixed]?a.columnList[k][a.options.columnFields.fixed]:"none")==e&&p<c[g].cellList.length&&(f=pd(d,k,!0),0<=f&&f<a.currentList[d][a.options.rowFields.cells].length?pc(c[g].cellList[p].cell,Ka(a.currentList[d][a.options.rowFields.cells][f],b,d).general):pc(c[g].cellList[p].cell,oc(b,d,"cell").general),
p++)}}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var d=a.columnsObj.getParent(b),d=a.columnsObj.getList(d),e=d.indexOf(b),f=-1;if(d){switch(c){case "first":f=0;break;case "left":var g=zc(b,b[a.options.columnFields.fixed],!0);g&&(g=d.indexOf(g),0<=g&&(f=g));break;case "right":if(g=Ac(b,b[a.options.columnFields.fixed],!0))g=d.indexOf(g),0<=g&&(f=g);break;case "last":f=d.length-1}0<=f&&f<d.length&&(e<f?"first"!=c&&"left"!=c||f--:e>f&&("last"!=c&&"right"!=c||f++),a.moveObject(e,
f,d),a.updateLayout(),a.callColumnPosChanged(x,a.hoverColumn))}}};a.moveRow=function(b,c,e,f){if(b){a.allowUpdate=!1;var d=-1;switch(e){case "first":d=0;break;case "at":d=f}if(Array.isArray(b)){f=[];for(var g=0;g<b.length;g++){for(var k=!1,h=a.getParent(b[g]);h;){if(0<=b.indexOf(h)){k=!0;break}h=a.getParent(h)}k||f.push(b[g])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),g=a.getObjCurrentIndex(f[f.length-1]),b<=g)for(g=0;g<f.length;g++)wd(f[g],c,d,e);else for(g=f.length-1;0<=g;g--)wd(f[g],c,d,e)}else wd(b,
c,d,e);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var wd=function(b,c,e,f){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,e,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Ta="none",Z=!1,vb=null,Ta="none",Mc=0,xd=0,ab=null;m.$watch(function(){return r[0].offsetWidth},function(b,c){a.options.autoUpdate&&(100==F?a.updateLayout():b!=c&&(ab&&(f.cancel(ab),
ab=null),ab=f(function(){Na&&Na.css("width",r[0].clientWidth+"px");Pa&&Pa.css("width",r[0].clientWidth+"px");a.updateCurrentLayout();f.cancel(ab);ab=null},250)))});var bb=null;m.$watch(function(){return r[0].offsetHeight},function(b,c){a.options.autoUpdate&&b!=c&&(a.options.autoSize?a.updateCurrentLayout():(bb&&(f.cancel(bb),bb=null),bb=f(function(){a.updateLayout();f.cancel(bb);bb=null},250)))});a.isColumnWithFixedWidth=function(b){return b&&b[a.options.columnFields.fixedWidth]?b[a.options.columnFields.fixedWidth]:
!1};a.setColumnResizingParams=function(b,c,e){b&&(vb=b,Ta=c,xd=e,Mc=a.getColumnWidthFromData(b))};a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var zc=function(b,c,e){var d=null,f=void 0==c?"none":c,g=a.getColumnCompleteIndex(b);if(0<=g.level){if(0<g.index)for(var k=g.index-1;0<=k;k--){var h=a.completeColumnList[g.level][k].column;if(!e||e&&a.isColumnVisible(h)){var l=a.isColumnFixed(h)?h[a.options.columnFields.fixed]:
"none";if(l==f){d=h;break}}}d||(b=a.getParentColumn(b))&&(d=zc(b,c,e))}return d},Ac=function(b,c,e){var d=null,f=void 0==c?"none":c,g=a.getColumnCompleteIndex(b);if(0<=g.level){if(0<=g.index)for(var k=g.index+1;k<a.completeColumnList[g.level].length;k++){var h=a.completeColumnList[g.level][k].column;if(!e||e&&a.isColumnVisible(h)){var l=a.isColumnFixed(h)?h[a.options.columnFields.fixed]:"none";if(l==f){d=h;break}}}d||(b=a.getParentColumn(b))&&(d=Ac(b,c,e))}return d},Zd=function(b,c){if(b)switch(columnFixedType=
b[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){var d=zc(b,b[a.options.columnFields.fixed]);if(!d||a.isColumnWithFixedWidth(d))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<index;break;case "right":if("right"==columnFixedType&&(d=Ac(b,b[a.options.columnFields.fixed]),!d||a.isColumnWithFixedWidth(d)))return!1}return!0},Hb=[],Pe=function(b){if(b&&(b=b[a.options.columnFields.columns]))for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(b[c][a.options.columnFields.columns]&&
0<b[c][a.options.columnFields.columns].length?Pe(b[c]):Hb.push(b[c]))};a.resizeColumn=function(b,c,e){var d=b[a.options.columnFields.fixed];0>=c&&(e=c=0);var f;if(f=a.getHeaderElem(d))f=angular.element(f.find("tr")),0!=e&&(a.resizeColumnWithChildren(b,f,c,e),a.resizeParentColumn(b,f,e));if(f=a.getFooterElem(d))for(f=angular.element(f.find("tr")),Hb.length=0,Hb.push(b),Pe(b),b=0;b<Hb.length;b++)c=a.getColumnCurrentIndex(Hb[b]),a.resizeColumnCells(Hb[b],f,c,Hb[b][a.options.columnFields.width],2,d)};
a.resizeParentColumn=function(b,c,e){if(b=a.getParentColumn(b)){var d=b[a.options.columnFields.fixed],f=a.getColumnWidthFromData(b),f="right"==d?f-e:f+e;0>=f&&(e=f=0);0!=e&&(b[a.options.columnFields.width]=f,a.resizeColumnCells(b,c,-1,f,1,d),a.resizeParentColumn(b,c,e))}};a.resizeColumnWithChildren=function(b,c,e,f){var d=b[a.options.columnFields.fixed];0>=e&&(f=e=0);if(0!=f){b[a.options.columnFields.width]=e;a.resizeColumnCells(b,c,-1,e,1,d);var g=b[a.options.columnFields.columns];if(g&&0<g.length){b=
0;if(g&&0<g.length)for(e=0;e<g.length;e++)a.isColumnWithFixedWidth(g[e])||0<a.getColumnWidth(g[e])&&b++;if(0<b){b=f/b;for(e=0;e<g.length;e++)a.isColumnWithFixedWidth(g[e])||(f=a.getColumnWidth(g[e]),0>=f&&(b="right"==d?b-a.getColumnWidthFromData(g[e]):b+a.getColumnWidthFromData(g[e])));for(e=0;e<g.length;e++)a.isColumnWithFixedWidth(g[e])||(f=a.getColumnWidth(g[e]),0<=f?(f=a.getColumnWidthFromData(g[e]),f="right"==d?f-b:f+b):f=0,a.resizeColumnWithChildren(g[e],c,f,b))}}else a.resizeRows(b,e,d),a.resizeRows(b,
e,d,"top"),a.resizeRows(b,e,d,"bottom")}};a.resizeRows=function(b,c,e,f){var d=a.getRowElems(e,f);if(d){var g=a.getColumnCurrentIndex(b),k={top:0,right:0,bottom:0,left:0},h=a.getElemFromColumn(b,b[a.options.columnFields.fixed]);h&&(h=a.getChildElement(h,"column-header-cell"))&&(k=l.getPadding(h[0]));for(h=0;h<d.length;h++)currentRowElem=angular.element(d[h]),a.resizeColumnCells(b,angular.element(d[h]),g,c,0,e,!0,k,f)}};a.resizeColumnCells=function(b,c,e,f,h,l,m,n,q){if(c){var d=-1;m&&(d=a.getRowCurrentIndex(a.getRowFromElem(c)));
c=0;0<=d&&!q&&(c=a.indentList[d]);switch(h){case 1:b=a.getElemFromColumnCell(b,l);break;case 2:b=a.getElemFromColumnCell(b,l,!0,"column-footer",e);break;case 3:b=a.getElemFromColumnCell(b,l,!1,"column-expand-cell");break;default:b=a.getElemFromCell(d,e,l,q)}b&&0<b.children().length&&(b=b.children().eq(0))&&(n=n?n.left+c:c,0<=d&&e==a.options.expandColIndex&&(f-=n),f=0<=f?f:0,3==h&&(f+=2),b.css("width",f+"px"))}};var Kd=function(b){a.dropMark()},Ld=function(a){Nb()},Md=function(b){a.removeDropMark();
a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(h).bind("dragenter",Kd);angular.element(h).bind("dragover",Ld);angular.element(h).bind("dragend",Md);var ta=angular.element('<div class="iui-grid-column-reorder-mark"><span></span></div>'),ga=angular.element('<div class="iui-grid-column-reorder-tooltip"><span></span></div>'),Td=function(b){var c="initial";if(Y&&x){var d=!0;if(!a.hoverColumn||x==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||
a.hoverColumn&&x[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])d=!1;else if(a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&x[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){var e=a.getColumnCompleteIndex(x),f=a.getColumnCompleteIndex(a.hoverColumn);if(x[a.options.columnFields.pid]!=a.hoverColumn[a.options.columnFields.pid]||e.level!=f.level)d=!1}d||(c="no-drop",b&&ga&&ga.css("display","none"))}r.css("cursor",c);document.body.style.cursor=
c},od=function(b){return b?{min:l.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:l.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Od=function(b){if(0===b.button&&vb&&"none"!=Ta){var c=a.getMousePos(b).x-xd,d=Mc+c;"right"==vb[a.options.columnFields.fixed]&&(d=Mc-c);var d=0<=d?d:0,e=od(vb);d>=e.min&&d<=e.max&&(a.resizeColumn(vb,d,c),a.updateViewSize(),a.updateScrollVisibility(),bd())}W&&W.css("display","none");ga&&ga.css("display","none");Ec?ka||1!==b.which||
(V[0].getBoundingClientRect(),b=a.getMousePos(b),H.scrollMousePos||(H.scrollMousePos=b),c=V[0].offsetLeft+(b.x-H.scrollMousePos.x),c<Ya?c=Ya:c+V[0].offsetWidth>pb&&(c=pb-V[0].offsetWidth),V.css("left",c+"px"),H.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((pb-V[0].offsetLeft-V[0].offsetWidth)*Db,10):parseInt((V[0].offsetLeft-Ya)*Db,10),cd(),(yd(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):ma&&(ka||1!==b.which||
(da[0].getBoundingClientRect(),b=a.getMousePos(b),H.scrollMousePos||(H.scrollMousePos=b),c=da[0].offsetTop+(b.y-H.scrollMousePos.y),c<qb?c=qb:c+da[0].offsetHeight>Ub&&(c=Ub-da[0].offsetHeight),da.css("top",c+"px"),H.scrollMousePos=b,Hc=c-qb,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(Hc*Ic*U),(yd(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<U?Math.floor(a.scrollPos.y/U):0,newIndex+F-1>a.currentList.length&&(newIndex=a.currentList.length-
F+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==w&&(w=newIndex,a.updateView(!0))))},Pd=function(b){a.removeDropDownList();a.closeEditor(J);a.closeFilterWindow();e()},Qd=function(b){Td(!0);W&&W.remove();1==b.which&&sb&&ea&&(b=a.getElemFromGroup(ea))&&b.css("display","inline-block");ga&&ga.remove();sb=Y=!1;ea=null;vb&&"none"!=Ta&&a.callColumnSizeChanged(vb);vb=null;Ta="none";xd=Mc=0;Z=!1;r.css("cursor","default");a.updateView();a.dropMark();ma&&a.updateView();Nb();H.scrollMousePos=null;ma=Ec=!1;
r.css("cursor","default");document.body.style.cursor="default"},Nd=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(h).bind("mousemove",Od);angular.element(h).bind("mousedown",Pd);angular.element(h).bind("mouseup",Qd);angular.element(h).bind("keyup",Nd);var zd=!1,Yb=0,Nc=null,Qe=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return O;
case "vertical":return Q}return O&&Q};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return R};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!ka&&b){var d=!0;0>b.x&&(b.x=0,d=!1);b.x>R.x&&(b.x=R.x,d=!1);0>b.y&&(b.y=0,d=!1);b.y>R.y&&(b.y=R.y,d=!1);a.scrollPos=b;Hc=Math.floor(a.scrollPos.y/(U*Ic));var e=qb+Hc;var f=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Db)-(pb-V[0].offsetWidth-Ya):Math.floor(a.scrollPos.x/Db)+Ya;O&&V&&V.css("left",f+
"px");Q&&da&&da.css("top",e+"px");cd();sd(!0,c);d&&a.callScrollPosChanged()}};var yd=function(a){return 0<a.x&&a.x<R.x||0<a.y&&a.y<R.y},Bc=function(b,c,e){zd||(a.updateFocus(),Yb=0,zd=!0,Nc=n(function(){var d=c,e=a.getScrollPos();d||(0===Yb&&(Yb=5),Yb+=5+Ic,Qe+=.5,d=Yb+=Math.floor(Qe));e.y=b?e.y+d:e.y-d;a.setScrollPos(e);(0>=e.y||a.getScrollPos().y<e.y)&&Nb()},e?e:100))},Nb=function(){Nc&&(n.cancel(Nc),Nc=null);zd=!1;Yb=0};a.cancelScrollTimer=function(){Nb()};a.scrollTo=function(b,c){if(b){var d=
a.getRowCurrentIndex(b);if(a.isRowIndexInRange(d)){var e=d;switch(c){case "center":e=Math.floor(K/2)-1;e=d>e?d-e:0;break;case "bottom":e=K-2,a.options.showHeader&&e--,a.options.showFooter&&e--,e=d>e?d-e:0}a.setScrollPos({x:a.scrollPos.x,y:e*U})}}};var cd=function(){var b=a.scrollPos.x;0>b&&(b=0);b>R.x&&(b=R.x);b*=-1;ua&&ua.css("left",b+S+"px");Ua&&Ua.css("left",b+S+"px");ja&&ja.css("left",b+S+"px");ia&&ia.css("left",b+S+"px");ba&&ba.css("left",b+S+"px")},sd=function(b,c){if(!(0==b&&0>=U)){newIndex=
0<U?Math.floor(a.scrollPos.y/U):0;a.scrollPos.y==R.y&&newIndex--;if(a.currentList.length>=F&&newIndex+F-1>a.currentList.length){newIndex=a.currentList.length-F+1;var d=a.getRowElems();d||(d=a.getRowElems("left"));d||(d=a.getRowElems("right"));d&&0<d.length&&(d=angular.element(d[d.length-1]),d[0].offsetTop+d[0].offsetHeight>r[0].clientHeight-(D+N)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=w&&(w=newIndex,0!=b&&a.updateView(c))}};r.bind("scroll",function(a){r[0].scrollTop=0;r[0].scrollLeft=0});
var Re=function(b,c){if(Q){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(J);a.closeFilterWindow();e();var d=a.hoverRow;a.hoverRow=null;a.refresh(d);d=Math.floor(r[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":d=U;break;case "slow":d=2*U;break;case "fast":d=Math.floor(r[0].clientHeight/2)-D-N-U;break;case "veryfast":d=Math.floor(r[0].clientHeight-D-N-U)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,
y:a.scrollPos.y+d*c*-1},!0);yd(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};r.bind("mousewheel",function(b){b.preventDefault();if(!ka&&a.options.enabled){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Re(b,c)}});r.bind("DOMMouseScroll",function(b){b.preventDefault();if(!ka&&a.options.enabled){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):
b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));Re(b,c)}});var qc={x:0,y:0},wb={x:0,y:0};r.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(qc={x:b[0].pageX,y:b[0].pageY})});r.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(wb={x:b[0].pageX,y:b[0].pageY});var c=wb.x-qc.x,d=wb.y-qc.y;(20<Math.abs(c)||20<Math.abs(d))&&document.activeElement&&document.activeElement.blur();var e=!1,f=!1,
h=qc,l=a.scrollPos.x,m=a.scrollPos.y,q=n(function(){var b=a.scrollPos;-20>c?(h.x-=10,h.x>wb.x?b.x+=10:(b.x=l-c,e=!0)):20<c?(h.x+=10,h.x<wb.x?b.x-=10:(b.x=l-c,e=!0)):e=!0;-20>d?(h.y-=10,h.y>wb.y?b.y+=10:(b.y=m-d,f=!0)):20<d?(h.y+=10,h.y<wb.y?b.y-=10:(b.y=m-d,f=!0)):f=!0;a.setScrollPos(b);e&&f&&n.cancel(q)},5);qc=wb}});var Ma=null,fa=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),Aa=angular.element('<ul class="iui-contextmenu-block"></ul>');m.$eval(uc.menuItems);
fa.append(Aa);var Se=m.name,Oc=null,Ib={general:"iui-contextmenu",block:{general:"iui-contextmenu-block",marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",
space:"iui-contextmenu-marker-expand-space"}}},item:{general:{disabled:"iui-contextmenu-item-disabled",focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},t={controlStyle:Ib,dataFields:{enabled:"enabled",icon:"icon",
id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"},enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},rc=[],Ra=[],Ad=function(a,b,c){a.type||(a.type="item");a[t.dataFields.id]||(a[t.dataFields.id]=l.getUniqueId());b&&(a[t.dataFields.pid]=b);c?Ra.push(a):rc.push(a)},Te=function(a,b,c){if(a[t.dataFields.items]){if(Ad(a,b,c),b=a[t.dataFields.items])for(var d=0;d<
b.length;d++)Te(b[d],a[t.dataFields.id],c)}else Ad(a,b,c)},sf=function(){Ra.length=0;if(Ma)for(var a=sc(Ma),b=0;b<a.length;b++)Te(a[b],null,!0);return Ra},tf=function(){rc.length=0;if(Ma){var a=sc(Ma);if(a)for(var b=0;b<a.length;b++)Ad(a[b],0,null,!1)}},Pc=function(a){return a&&Ra?Ra.indexOf(a):-1},sc=function(b){return"column"==b.type?b[a.options.columnFields.contextMenu]:b[a.options.rowFields.contextMenu]},Yd=function(a,b){if(b){var c=sc(b);if(!c||c&&0==c.length)return!1;a.ctrlKey||a.metaKey||(fa&&
(fa.unbind("blur"),fa.remove()),uf(a));return!0}return!1};angular.element(h).bind("click",function(a){Cb()});angular.element(h).bind("contextmenu",function(a){Cb()});angular.element(h).bind("keydown",function(a){switch(a.keyCode){case 27:Cb()}});var Qc=function(a){(a?a:Aa).unbind("contextmenu");a=a?a.find("li"):Aa.children();if(0<a.length)for(var b=0;b<a.length;b++)currentElem=angular.element(a[b]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},Bd=function(a){Qc(a);(a?a:Aa).bind("contextmenu",
function(a){a.preventDefault()});var b=null;a=a?a.find("li"):Aa.children();if(0<a.length)for(var c=null,d=0;d<a.length;d++)c=angular.element(a[d]),(b=tc(c))&&b&&l.isEnabled(b[t.dataFields.enabled])&&b&&"item"==b.type&&vf(c)},Dd=function(){for(var a=0;a<Ba.length;a++)Ba[a][t.dataFields.selected]=!1,Cd(Ba[a]);Ba.splice(0,Ba.length);Ca=null},vf=function(a){a&&(a.bind("mousedown",function(a){var b=tc(this);b&&(b.itemClick&&b.itemClick({parentName:Se,item:b,mousePos:{x:a.pageX,y:a.pageY}}),Cb());a.stopPropagation()}),
a.bind("mouseenter",function(a){var b=tc(this);b&&(angular.element(this),Oc=b,Zb(null,!0),Ed(b)&&b!=Ca&&Dd(),$a&&f.cancel($a),$a=f(function(){$a&&wf(b)},500));a.stopPropagation()}),a.bind("mouseleave",function(a){Oc=null;var b=tc(this);if(b){Zb(null,!0);Ed(b)&&b==Ca&&Dd();Ca&&(Ca[t.dataFields.selected]=!0,Zb(Ca));var c=f(function(){Cd(b);f.cancel(c)},250)}$a&&f.cancel($a);$a=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();var b=l.getTouchData(a);if(b&&0<b.length){var c=
tc(this);c&&(c.itemClick&&c.itemClick({parentName:Se,item:c,mousePos:{x:b[0].pageX,y:b[0].pageY}}),Cb());a.stopPropagation()}}))},Ca=null,Ba=[],Ue=function(a){return a?(a=a[t.dataFields.items],void 0!=a&&0<a.length):!1},wf=function(a){var b=Fd(a);if(a&&Gd(a)&&ca&&b){var c=b.find("ul");if(0<c.length){c=angular.element(c.eq(0));Qc(c);Ue(a)&&(b.removeClass(t.controlStyle.block.marker.expand.down),b.removeClass(t.controlStyle.block.marker.expand.left),b.removeClass(t.controlStyle.block.marker.expand.right),
b.removeClass(t.controlStyle.block.marker.expand.rtlDown));Ca=Ed(a)?a:Ca;Ca[t.dataFields.selected]=!0;0>Ba.indexOf(Ca)&&Ba.unshift(Ca);for(var d=0;d<Ba.length;d++)Ba[d]!=Ca&&(Ba[d][t.dataFields.selected]=!1,Cd(Ba[d]));Ba.splice(1,Ba.length-1);if(Ue(a)){d=Ve(a);if(0<=d){var e=0,h="auto",h=angular.element(b.parent());l.getPadding(b[0]);var m=l.getPadding(h[0]),b=l.getPadding(b[0]),e=e-(m.top+b.top),h=h[0].offsetWidth-8;0<b.right&&(h+=b.right-4);b="display:block;"+("top:"+e+"px;");"auto"!=h&&(b+="left:"+
h+"px;");(a=Rc(Sc(a)))&&a.data&&d<a.data.length&&(a.data[d].inlineBlockStyle=b,ca.$apply())}f(function(){Bd(c);We()},1)}}}},Cd=function(a){var b=Fd(a);if(a&&ca&&b){var c=b.find("ul");0<c.length&&(c=angular.element(c.eq(0)),Qc(c),Gd(a)&&b.addClass(t.controlStyle.block.marker.expand.right),b=Ve(a),0<=b&&(a=Rc(Sc(a)))&&a.data&&b<a.data.length&&(a.data[b].inlineBlockStyle="display:none;",ca.$apply()))}},Cb=function(){Dd();Oc=null;fa&&(fa.unbind("blur"),fa.remove());if(document.body)for(var a=angular.element(document.body).children(),
b=0;b<a.length;b++){var c=angular.element(a[b]);c[0].attributes&&c[0].attributes["data-element"]&&"context-menu"===c[0].attributes["data-element"].value&&c.remove()}Ma=Ca=null;$a&&f.cancel($a);$a=null},uf=function(a){if(document.body){fa.css("top","-999px");fa.css("tabindex","999");angular.element(document.body).append(fa);fa.bind("blur",function(a){Cb()});tf();sf();xf(void 0);var b=f(function(){fa[0].focus();var c=a.pageY,d=a.pageX,e=l.getPageRect(r[0]);switch(t.position){case "above":c=e.top-2-
Aa[0].offsetHeight;d=e.right-Aa[0].offsetWidth+1;break;case "below":c=e.bottom+2;d=e.right-Aa[0].offsetWidth+1;break;case "left":c=e.top-1;d=e.left-2-Aa[0].offsetWidth;break;case "right":c=e.top-1,d=e.right+2}fa.css("top",c+"px");fa.css("left",d+"px");Bd();t.open&&t.open({mousePos:{x:a.pageX,y:a.pageY}});f.cancel(b)},1)}},Fd=function(a){var b=null;if(a){a=Pc(a);var c=fa.find("li");if(c&&0<c.length)for(var d=0;d<c.length;d++){var e=angular.element(c[d]);if(e[0].attributes["data-index"]&&e[0].attributes["data-index"].value.toString()===
a.toString()){b=e;break}}}return b},yf=function(a){var b=null;a&&(a=Fd(a))&&(a=a.find("ul"),0<a.length&&(b=angular.element(a.eq(0))));return b},tc=function(a){if(a&&(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<Ra.length))return Ra[a]},Xe=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<b.length;)c=b[d][t.dataFields.id]&&a[t.dataFields.pid]&&b[d][t.dataFields.id].toString()===a[t.dataFields.pid].toString()?b[d]:Xe(a,b[d][t.dataFields.items]),
d++;return c},Ve=function(a){var b=Sc(a),b=Ye(b),c=-1;b||(b=Ye());if(!a[t.dataFields.id]&&b)c=b.indexOf(a);else if(a&&b)for(var d=0;d<b.length;d++)if(b[d][t.dataFields.id]&&a[t.dataFields.id]&&b[d][t.dataFields.id].toString()===a[t.dataFields.id].toString()){c=d;break}return c},Sc=function(a){if(Ma){var b=sc(Ma);return a&&b?Xe(a,b):null}return null},Ye=function(a){return a?(a[t.dataFields.items]||(a[t.dataFields.items]=[]),a[t.dataFields.items]):Ma?sc(Ma):[]},zf=function(a){if(a&&"separator"!=a.type){if(0==
a[t.dataFields.enabled])return"disabled";if(a==H.menuHoverItem)return"hovered";if(1==a[t.dataFields.selected])return"selected"}return"normal"},Ed=function(a){return!a||void 0!=a[t.dataFields.pid]&&null!=a[t.dataFields.pid]?!1:!0},$a=null,ca=null,Gd=function(a){if(a){var b=a[t.dataFields.items];return a[t.dataFields.hasChildren]||b&&0<b.length}return!1},ad=function(a){return null!=a.icon||null!=t.itemIcon},Af=function(a,b,c){var d="";a[t.dataFields.icon]||""==a[t.dataFields.icon]?d=a[t.dataFields.icon]:
t.itemIcon&&(d=t.itemIcon);return{icon:d,iconVisible:0!=t.showIcons&&ad(a),index:b,inlineBlockStyle:"display:none",item:a,style:{},visible:c}},Hd=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)b.push(Af(a[c],Pc(a[c])));return b},We=function(){var a=Aa.find("li");if(0<a.length)for(var b=0;b<a.length;b++)for(var c=angular.element(a[b]),e=c.children(),f=0;f<e.length;f++){var h=angular.element(e[f]);h[0].attributes["data-element"]&&"load-icon"==h[0].attributes["data-element"].value.toString()&&
h.css("top",(c[0].clientHeight-h[0].offsetHeight)/2+"px")}},Bf=function(){var a=Aa.find("li");if(0<a.length)for(var b=0;b<a.length;b++){var c=angular.element(a[b]);c&&c.attr("data-index",b)}},Ze=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<a.length;)c=a[d].item==b?a[d]:Ze(a[d].data,b),d++;return c},Rc=function(a){return a?Ze(ca.data,a):ca},xf=function(a){var b=f(function(){Qc();t.rtl?fa.css("direction","rtl"):fa.css("direction","ltr");a||(Aa.empty(),ca&&ca.$destroy());f.cancel(b)},1),d=f(function(){var b=
"";if(a){var e=Rc(a);if(e){var g=a[t.dataFields.items];if(g&&0<g.length){e.data=Hd(g);Zb();ca.$apply();for(var h=0;h<g.length;h++)b+=Id(h,g[h],e.scopeRef,e.data);""!=b&&(e=yf(a))&&(e.empty(),e.append(c(b)(ca)))}Bf()}}else{ca=m.$new();ca.data=Hd(rc);Zb();ca.$apply();for(e=0;e<rc.length;e++)b+=Id(e,rc[e],"data",ca.data);""!=b&&Aa.append(c(b)(ca))}Bd();var k=f(function(){We();f.cancel(k)},1);f.cancel(d)},1)},Id=function(a,b,c,e){Pc(b);var d='<li iui-class="{{'+c+"["+a+"].style",d="header"==b.type?d+
'.header}}"':d+'.general}}"',d=d+(' data-index="'+Pc(b)+'">');switch(b.type){case "header":d=d+'<span data-element="header">'+("{{"+c+"["+a+"].item."+t.dataFields.text+"}}");d+="</span>";break;case "separator":d+='<hr iui-class="{{'+c+"["+a+'].style.separator}}" data-element="separator" />';break;default:d=d+('<span iui-class="{{'+c+"["+a+'].icon}}" data-element="icon" ng-show="'+c+"["+a+'].iconVisible"></span>')+('<span iui-class="{{'+c+"["+a+'].style.content}}"  data-element="content">')+("{{"+
c+"["+a+"].item."+t.dataFields.text+"}}"),d=d+"</span>"+('<span iui-class="{{'+c+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var f=b[t.dataFields.items];if(b[t.dataFields.hasChildren]||f&&0<f.length){d+='<ul iui-class="{{'+c+"["+a+"].style.block";switch(t.displayMode){case "vertical":d=t.rtl?d+'.marker.right}}"':d+'.marker.left}}"';break;default:d=t.rtl?d+'.marker.right}}"':d+'.marker.left}}"'}d+=' iui-style="{{'+c+"["+a+'].inlineBlockStyle}}">';c+="["+a+"].data";e[a].data=Hd(f);
e[a].scopeRef=c;if(f&&0<f.length)for(b=0;b<f.length;b++)d+=Id(b,f[b],e[a].scopeRef,e[a].data);d+="</ul>"}return d+"</li>"};this.getCurrentMenuItemStyle=function(a,b){var c=t.controlStyle.item;if(a)switch(a.style){case "initial":break;case "parent":return H.getCurrentMenuItemStyle(H.getParentMenu(a),b);default:null!=a.style&&(c=a.style)}if(b){if(l.isString(c.general))return c.general;switch(b){case "disabled":return c.general&&c.general.disabled?c.general.disabled:t.controlStyle.item.general.disabled;
case "focused":return c.general&&c.general.focused?c.general.focused:t.controlStyle.item.general.focused;case "hovered":return c.general&&c.general.hovered?c.general.hovered:t.controlStyle.item.general.hovered;case "selected":return c.general&&c.general.selected?c.general.selected:t.controlStyle.item.general.selected;default:return c.general&&c.general.normal?c.general.normal:t.controlStyle.item.general.normal}}else return c?c:t.controlStyle.item};var Zb=function(a,b){if(ca)if(a)switch(a.type){default:var c=
Rc(a);if(c){var d=Gd(a),e=zf(a),f={block:Ib.block,content:"",general:"",header:Ib.item.header,label:"",loadIcon:"",separator:Ib.item.separator};var g=Ib.item.general.normal;t.controlStyle.item.general.normal!=g&&(g+=" "+t.controlStyle.item.general.normal);f.general=g;g=Ib.item.content;t.controlStyle.item.content!=g&&(g+=" "+t.controlStyle.item.content);f.content=g;g=Ib.item.loadIcon.general;t.controlStyle.item.loadIcon.general!=g&&(g+=" "+t.controlStyle.item.loadIcon.general);t.rtl&&(g+="-rtl");f.loadIcon=
g;switch(a.type){case "header":g=getCurrentMenuItemStyle(a).header;g!=t.controlStyle.item.header&&(f.header+=" "+g);break;case "separator":g=getCurrentMenuItemStyle(a).separator;g!=t.controlStyle.item.separator&&(f.separator+=" "+g);break;default:var h=getCurrentMenuItemStyle(a);g=getCurrentMenuItemStyle(a,e);g!=t.controlStyle.item.general.normal&&(f.general+=" "+g);d&&"selected"!=e&&!t.loadItem&&(f.general=t.rtl?f.general+(" "+t.controlStyle.block.marker.expand.left):f.general+(" "+t.controlStyle.block.marker.expand.right));
g=h.content;g!=t.controlStyle.item.content&&(f.content+=" "+g);a==t.loadItem&&(g=h.loadIcon.icon,f.loadIcon+=" "+g,g!=t.controlStyle.item.loadIcon.icon&&(f.loadIcon+=" "+g))}c.style=f;void 0==b&&ca.$apply()}}else{for(c=0;c<Ra.length;c++)Ra[c][t.dataFields.selected]=!1;for(c=Oc;c;)c[t.dataFields.selected]=!0,c=Sc(c);for(c=0;c<Ra.length;c++)Zb(Ra[c],!1);1==b&&ca.$apply()}},H=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(H.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",r[0].scrollTop+"px"),this.$tw.css("left",r[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
r[0].scrollTop+"px"),this.$tw.css("left",r[0].scrollLeft+"px"))};this.s1t=function(a){H.s3t();this.trlTime=f(function(){H.trActive||(H.trCount=0,H.trActive=!0,H.trId=n(function(){H.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(n.cancel(this.trId),this.trId=null);this.trlTime&&(f.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};r.append(this.$tw);this.s1t(this.twp);angular.isDefined(m.options)?a.updateOptions(m.options):
(0==m.allowAnimation&&(a.options.allowAnimation=m.allowAnimation),0==m.allowCellFocus&&(a.options.allowCellFocus=m.allowCellFocus),1==m.allowColumnReorder&&(a.options.allowColumnReorder=m.allowColumnReorder),1==m.allowDrag&&(a.options.allowDrag=m.allowDrag),0==m.allowDrop&&(a.options.allowDrop=m.allowDrop),1==m.allowFilter&&(a.options.allowFilter=m.allowFilter),0==m.allowFocus&&(a.options.allowFocus=m.allowFocus),0==m.autoExpand&&(a.options.autoExpand=m.autoExpand),0==m.autoUpdate&&(a.options.autoUpdate=
m.autoUpdate),angular.isDefined(m.animationSpeed)&&200!==m.animationSpeed&&(a.options.animationSpeed=m.animationSpeed),angular.isDefined(m.controlStyle)&&a.updateControlStyle(m.controlStyle),angular.isDefined(m.displayMode)&&(a.options.displayMode=m.displayMode),angular.isDefined(m.editorSettings)&&a.updateEditorSettings(m.editorSettings),0==m.enabled&&(a.options.enabled=m.enabled),angular.isDefined(m.expandingColumnIndex)&&(a.options.expandColIndex=m.expandingColumnIndex),angular.isDefined(m.fields)&&
(a.updateDataFields(m.fields),a.updateData()),1==m.fillSpace&&(a.options.fillSpace=m.fillSpace),angular.isDefined(m.gridLines)&&(a.options.gridLines=m.gridLines),angular.isDefined(m.grouping)&&a.updateGrouping(m.grouping),1==m.hoverSelection&&(a.options.hoverSelection=m.hoverSelection),angular.isDefined(m.indent)&&(a.options.indent=m.indent),angular.isDefined(m.labelEdit)&&(a.options.labelEdit=m.labelEdit),angular.isDefined(m.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=m.mouseWheelSpeed),angular.isDefined(m.paging)&&
a.updatePaging(m.paging),angular.isDefined(m.rowHeight)&&(a.options.rowHeight=m.rowHeight),angular.isDefined(m.rowIcon)&&(a.options.rowIcon=m.rowIcon),1==m.rtl&&(a.options.rtl=m.rtl),angular.isDefined(m.selectedIndex)&&(a.options.selectedIndex=m.selectedIndex),angular.isDefined(m.selectedRow)&&(a.options.selectedRow=m.selectedRow),angular.isDefined(m.selectionMode)&&(a.options.selectionMode=m.selectionMode),0==m.showFooter&&(a.options.showFooter=m.showFooter),0==m.showHeader&&(a.options.showHeader=
m.showHeader),0==m.showIcons&&(a.options.showIcons=m.showIcons),angular.isDefined(m.sorting)&&(a.options.sorting=m.sorting));a.updateLayout()}}}]);