/*
  filename: angular.integralui.contextmenu.min.js
  version : 2.2.5
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").directive("iuiContextmenu",["$compile","$window","$timeout","$interval","IntegralUIInternalService",function(Y,B,n,Z,e){return{restrict:"A",link:function(z,u,A,O,aa){var H=e.getBodyElem(u[0]),l=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),q=angular.element('<ul class="iui-contextmenu-block"></ul>');O=z.$eval(A.menuItems);l.append(q);var D="",I=null,w={general:"iui-contextmenu",block:{general:"iui-contextmenu-block",
marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",space:"iui-contextmenu-marker-expand-space"}}},item:{general:{disabled:"iui-contextmenu-item-disabled",
focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},d={controlStyle:w,dataFields:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"},
enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},E=[],v=[],P=function(a,c,b){a.type||(a.type="item");a[d.dataFields.id]||(a[d.dataFields.id]=e.getUniqueId());c&&(a[d.dataFields.pid]=c);b?v.push(a):E.push(a)},ba=function(a,c,b){if(a[d.dataFields.items]){if(P(a,c,b),c=a[d.dataFields.items])for(var g=0;g<c.length;g++)ba(c[g],a[d.dataFields.id],b)}else P(a,c,b)},ra=function(){v.length=0;for(var a=d[d.dataFields.items],
c=0;c<a.length;c++)ba(a[c],null,!0);return v},sa=function(){E.length=0;var a=d[d.dataFields.items];if(a)for(var c=0;c<a.length;c++)P(a[c],0,null,!1)},J=function(a){return a&&v?v.indexOf(a):-1},K=function(a){if(!d.items||d.items&&0==d.items.length)return!1;y();a.ctrlKey||a.metaKey||(l&&(l.unbind("blur"),l.remove()),ta(a));return!0};u.bind("contextmenu",function(a){var c="click"!=d.activate&&d.items&&0<d.items.length;c&&a.preventDefault();c=!0;switch(d.activate){case "both":K(a);break;case "click":y();
break;default:K(a)}c&&a.stopPropagation()});u.bind("click",function(a){a.preventDefault();switch(d.activate){case "both":K(a);a.stopPropagation();break;case "click":K(a);a.stopPropagation();break;default:y()}});var ca=function(a){y()},da=function(a){y()},ea=function(a){switch(a.keyCode){case 27:y()}};angular.element(B).bind("click",ca);angular.element(B).bind("contextmenu",da);angular.element(B).bind("keydown",ea);var F=function(a){(a?a:q).unbind("contextmenu");a=a?a.find("li"):q.children();if(0<
a.length)for(var c=0;c<a.length;c++)currentElem=angular.element(a[c]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},Q=function(a){F(a);(a?a:q).bind("contextmenu",function(a){a.preventDefault()});var c=null;a=a?a.find("li"):q.children();if(0<a.length)for(var b=null,g=0;g<a.length;g++)b=angular.element(a[g]),(c=G(b))&&c&&e.isEnabled(c[d.dataFields.enabled])&&c&&"item"==c.type&&ua(b)},R=function(){for(var a=0;a<r.length;a++)r[a][d.dataFields.selected]=!1,L(r[a]);r.splice(0,
r.length);p=null},ua=function(a){a&&(a.bind("mousedown",function(a){var b=G(this);b&&(b.itemClick?b.itemClick({parentName:D,item:b,mousePos:{x:a.pageX,y:a.pageY}}):d.itemClick&&d.itemClick({parentName:D,item:b,mousePos:{x:a.pageX,y:a.pageY}}),y());a.stopPropagation()}),a.bind("mouseenter",function(a){var b=G(this);b&&(angular.element(this),I=b,C(null,!0),S(b)&&b!=p&&R(),d.openOnHover?(x&&n.cancel(x),x=n(function(){x&&fa(b)},500)):T&&b!=p&&(p&&L(p),fa(b)));a.stopPropagation()}),a.bind("mouseleave",
function(a){I=null;var b=G(this);if(b&&(C(null,!0),S(b)&&b==p&&R(),p&&(p[d.dataFields.selected]=!0,C(p)),d.openOnHover))var g=n(function(){L(b);n.cancel(g)},250);x&&n.cancel(x);x=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();var b=e.getTouchData(a);if(b&&0<b.length){var g=G(this);g&&(g.itemClick?g.itemClick({parentName:D,item:g,mousePos:{x:b[0].pageX,y:b[0].pageY}}):d.itemClick&&d.itemClick({parentName:D,item:g,mousePos:{x:b[0].pageX,y:b[0].pageY}}),y());a.stopPropagation()}}))},
T=!1,p=null,r=[],ga=function(a){return a?(a=a[d.dataFields.items],void 0!=a&&0<a.length):!1},fa=function(a){var c=U(a);if(a&&V(a)&&m&&c){var b=c.find("ul");if(0<b.length){b=angular.element(b.eq(0));F(b);ga(a)&&(c.removeClass(d.controlStyle.block.marker.expand.down),c.removeClass(d.controlStyle.block.marker.expand.left),c.removeClass(d.controlStyle.block.marker.expand.right),c.removeClass(d.controlStyle.block.marker.expand.rtlDown));T=!0;p=S(a)?a:p;p[d.dataFields.selected]=!0;0>r.indexOf(p)&&r.unshift(p);
for(var g=0;g<r.length;g++)r[g]!=p&&(r[g][d.dataFields.selected]=!1,L(r[g]));r.splice(1,r.length-1);if(ga(a)){g=ha(a);if(0<=g){var f=0,k="auto",h="auto",l=angular.element(c.parent());e.getPadding(c[0]);var q=e.getPadding(l[0]),c=e.getPadding(c[0]),f=f-(q.top+c.top);d.rtl?(k=l[0].offsetWidth-8,0<c.left&&(k+=c.left-4)):(h=l[0].offsetWidth-8,0<c.right&&(h+=c.right-4));c="display:block;"+("top:"+f+"px;");"auto"!=h&&(c+="left:"+h+"px;");"auto"!=k&&(c+="right:"+k+"px;");(a=M(N(a)))&&a.data&&g<a.data.length&&
(a.data[g].inlineBlockStyle=c,m.$apply())}n(function(){Q(b);ia()},1)}}}},L=function(a){var c=U(a);if(a&&m&&c){var b=c.find("ul");0<b.length&&(b=angular.element(b.eq(0)),F(b),V(a)&&(d.rtl?c.addClass(d.controlStyle.block.marker.expand.left):c.addClass(d.controlStyle.block.marker.expand.right)),c=ha(a),0<=c&&(a=M(N(a)))&&a.data&&c<a.data.length&&(a.data[c].inlineBlockStyle="display:none;",m.$apply()))}},y=function(){R();I=null;l&&(l.unbind("blur"),l.remove());if(H=e.getBodyElem(u[0]))for(var a=angular.element(H).children(),
c=0;c<a.length;c++){var b=angular.element(a[c]);b[0].attributes&&b[0].attributes["data-element"]&&"context-menu"===b[0].attributes["data-element"].value&&b.remove()}T=!1;p=null;x&&n.cancel(x);x=null},ta=function(a){if(H=e.getBodyElem(u[0])){l.css("top","-999px");l.css("tabindex","999");angular.element(H).append(l);l.bind("blur",function(a){y()});sa();ra();va(void 0);var c=n(function(){l[0].focus();var b=a.pageY,g=a.pageX,f=e.getPageRect(u[0]);switch(d.position){case "above":b=f.top-2-q[0].offsetHeight;
g=f.right-q[0].offsetWidth+1;break;case "below":b=f.bottom+2;g=f.right-q[0].offsetWidth+1;break;case "left":b=f.top-1;g=f.left-2-q[0].offsetWidth;break;case "right":b=f.top-1,g=f.right+2}l.css("top",b+"px");l.css("left",g+"px");for(b=u;b&&b[0]&&b[0]!==document.getElementsByTagName("body")[0];){if(b[0].attributes&&b[0].attributes.name){D=b[0].attributes.name.value;break}b=b.parent()}Q();d.open&&d.open({mousePos:{x:a.pageX,y:a.pageY}});(b=l.find("div"))&&0<b.length&&b.remove();l.append(t.cm_$tw);t.cm_s1t(t.cm_twp);
n.cancel(c)},1)}},U=function(a){var c=null;if(a){a=J(a);var b=l.find("li");if(b&&0<b.length)for(var d=0;d<b.length;d++){var f=angular.element(b[d]);if(f[0].attributes["data-index"]&&f[0].attributes["data-index"].value.toString()===a.toString()){c=f;break}}}return c},wa=function(a){var c=null;a&&(a=U(a))&&(a=a.find("ul"),0<a.length&&(c=angular.element(a.eq(0))));return c},G=function(a){if(a&&(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<v.length))return v[a]},
ja=function(a,c){var b=null;if(a&&c)for(var g=0;!b&&g<c.length;)b=c[g][d.dataFields.id]&&a[d.dataFields.pid]&&c[g][d.dataFields.id].toString()===a[d.dataFields.pid].toString()?c[g]:ja(a,c[g][d.dataFields.items]),g++;return b},ha=function(a){var c=N(a),c=ka(c),b=-1;c||(c=ka());if(!a[d.dataFields.id]&&c)b=c.indexOf(a);else if(a&&c)for(var g=0;g<c.length;g++)if(c[g][d.dataFields.id]&&a[d.dataFields.id]&&c[g][d.dataFields.id].toString()===a[d.dataFields.id].toString()){b=g;break}return b},N=function(a){return a?
ja(a,d[d.dataFields.items]):null},ka=function(a){return a?(a[d.dataFields.items]||(a[d.dataFields.items]=[]),a[d.dataFields.items]):d.items},xa=function(a){if(a&&"separator"!=a.type){if(0==a[d.dataFields.enabled])return"disabled";if(a==t.hoverItem)return"hovered";if(1==a[d.dataFields.selected])return"selected"}return"normal"},S=function(a){return!a||void 0!=a[d.dataFields.pid]&&null!=a[d.dataFields.pid]?!1:!0},x=null,m=null,V=function(a){if(a){var c=a[d.dataFields.items];return a[d.dataFields.hasChildren]||
c&&0<c.length}return!1},ya=function(a,c,b){var g="";a[d.dataFields.icon]||""==a[d.dataFields.icon]?g=a[d.dataFields.icon]:d.itemIcon&&(g=d.itemIcon);return{icon:g,iconVisible:0!=d.showIcons&&(null!=a.icon||null!=d.itemIcon),index:c,inlineBlockStyle:"display:none",item:a,style:{},visible:b}},W=function(a){var c=[];if(a)for(var b=0;b<a.length;b++)c.push(ya(a[b],J(a[b])));return c},ia=function(){var a=q.find("li");if(0<a.length)for(var c=0;c<a.length;c++)for(var b=angular.element(a[c]),d=b.children(),
f=0;f<d.length;f++){var e=angular.element(d[f]);e[0].attributes["data-element"]&&"load-icon"==e[0].attributes["data-element"].value.toString()&&e.css("top",(b[0].clientHeight-e[0].offsetHeight)/2+"px")}},za=function(){var a=q.find("li");if(0<a.length)for(var c=0;c<a.length;c++){var b=angular.element(a[c]);b&&b.attr("data-index",c)}},la=function(a,c){var b=null;if(a&&c)for(var d=0;!b&&d<a.length;)b=a[d].item==c?a[d]:la(a[d].data,c),d++;return b},M=function(a){return a?la(m.data,a):m},va=function(a){var c=
n(function(){F();d.rtl?l.css("direction","rtl"):l.css("direction","ltr");a||(q.empty(),m&&m.$destroy());n.cancel(c)},1),b=n(function(){var c="";if(a){var f=M(a);if(f){var e=a[d.dataFields.items];if(e&&0<e.length){f.data=W(e);C();m.$apply();for(var h=0;h<e.length;h++)c+=X(h,e[h],f.scopeRef,f.data);""!=c&&(f=wa(a))&&(f.empty(),f.append(Y(c)(m)))}za()}}else{m=z.$new();m.data=W(E);C();m.$apply();for(f=0;f<E.length;f++)c+=X(f,E[f],"data",m.data);""!=c&&q.append(Y(c)(m))}Q();var l=n(function(){ia();n.cancel(l)},
1);n.cancel(b)},1)},X=function(a,c,b,e){J(c);var f='<li iui-class="{{'+b+"["+a+"].style",f="header"==c.type?f+'.header}}"':f+'.general}}"',f=f+(' data-index="'+J(c)+'">');switch(c.type){case "header":f=f+'<span data-element="header">'+("{{"+b+"["+a+"].item."+d.dataFields.text+"}}");f+="</span>";break;case "separator":f+='<hr iui-class="{{'+b+"["+a+'].style.separator}}" data-element="separator" />';break;default:f=f+('<span iui-class="{{'+b+"["+a+'].icon}}" data-element="icon" ng-show="'+b+"["+a+'].iconVisible"></span>')+
('<span iui-class="{{'+b+"["+a+'].style.content}}"  data-element="content">')+("{{"+b+"["+a+"].item."+d.dataFields.text+"}}"),f=f+"</span>"+('<span iui-class="{{'+b+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var k=c[d.dataFields.items];if(c[d.dataFields.hasChildren]||k&&0<k.length){f+='<ul iui-class="{{'+b+"["+a+"].style.block";switch(d.displayMode){case "vertical":f=d.rtl?f+'.marker.right}}"':f+'.marker.left}}"';break;default:f=d.rtl?f+'.marker.right}}"':f+'.marker.left}}"'}f+=
' iui-style="{{'+b+"["+a+'].inlineBlockStyle}}">';b+="["+a+"].data";e[a].data=W(k);e[a].scopeRef=b;if(k&&0<k.length)for(c=0;c<k.length;c++)f+=X(c,k[c],e[a].scopeRef,e[a].data);f+="</ul>"}return f+"</li>"},ma=function(a){if(a){var c=e.isFieldAvailable(a.general,"iui-contextmenu-block");var b=a.marker;if(b){a=e.isFieldAvailable(b.top,"iui-contextmenu-marker-top");var g=e.isFieldAvailable(b.left,"iui-contextmenu-marker-left"),f=e.isFieldAvailable(b.bottom,"iui-contextmenu-marker-bottom"),k=e.isFieldAvailable(b.right,
"iui-contextmenu-marker-right"),b=(b=b.expand)?{down:e.isFieldAvailable(b.down,"iui-contextmenu-marker-expand-down"),right:e.isFieldAvailable(b.right,"iui-contextmenu-marker-expand-right"),up:e.isFieldAvailable(b.up,"iui-contextmenu-marker-expand-up"),left:e.isFieldAvailable(b.left,"iui-contextmenu-marker-expand-left"),space:e.isFieldAvailable(b.space,"iui-contextmenu-marker-expand-space")}:d.controlStyle.block.marker.expand;a={top:a,left:g,bottom:f,right:k,expand:b}}else a=d.controlStyle.block.marker;
return{general:c,marker:a}}return d.controlStyle.block},na=function(a){if(a){var c;c=(c=a.general)?{disabled:e.isFieldAvailable(c.disabled,"iui-contextmenu-item-disabled"),focused:e.isFieldAvailable(c.focused,"iui-contextmenu-item-focused"),normal:e.isFieldAvailable(c.normal,"iui-contextmenu-item"),hovered:e.isFieldAvailable(c.hovered,"iui-contextmenu-item-hovered"),selected:e.isFieldAvailable(c.selected,"iui-contextmenu-item-selected")}:d.controlStyle.item.general;var b=e.isFieldAvailable(a.content,
"iui-contextmenu-item-content"),g=e.isFieldAvailable(a.header,"iui-contextmenu-item-header"),f;f=(f=a.loadIcon)?{general:e.isFieldAvailable(f.general,"iui-contextmenu-load"),icon:e.isFieldAvailable(f.icon,"iui-submenu-load-icon")}:d.controlStyle.item.loadIcon;return{general:c,content:b,header:g,loadIcon:f,separator:e.isFieldAvailable(a.separator,"iui-contextmenu-item-separator")}}return d.controlStyle.item};this.getCurrentItemStyle=function(a,c){var b=d.controlStyle.item;if(a)switch(a.style){case "initial":break;
case "parent":return t.getCurrentItemStyle(t.getParent(a),c);default:null!=a.style&&(b=a.style)}if(c){if(e.isString(b.general))return b.general;switch(c){case "disabled":return b.general&&b.general.disabled?b.general.disabled:d.controlStyle.item.general.disabled;case "focused":return b.general&&b.general.focused?b.general.focused:d.controlStyle.item.general.focused;case "hovered":return b.general&&b.general.hovered?b.general.hovered:d.controlStyle.item.general.hovered;case "selected":return b.general&&
b.general.selected?b.general.selected:d.controlStyle.item.general.selected;default:return b.general&&b.general.normal?b.general.normal:d.controlStyle.item.general.normal}}else return b?b:d.controlStyle.item};var oa=function(a){return a?{general:e.isFieldAvailable(a.general,"iui-contextmenu"),block:ma(a.block),item:na(a.item)}:{general:e.isFieldAvailable(w.general,"iui-contextmenu"),block:ma(w.block),item:na(w.item)}},C=function(a,c){if(m)if(a)switch(a.type){default:var b=M(a);if(b){var e=V(a),f=xa(a),
k={block:w.block,content:"",general:"",header:w.item.header,label:"",loadIcon:"",separator:w.item.separator},h;h=w.item.general.normal;d.controlStyle.item.general.normal!=h&&(h+=" "+d.controlStyle.item.general.normal);k.general=h;h=w.item.content;d.controlStyle.item.content!=h&&(h+=" "+d.controlStyle.item.content);k.content=h;h=w.item.loadIcon.general;d.controlStyle.item.loadIcon.general!=h&&(h+=" "+d.controlStyle.item.loadIcon.general);d.rtl&&(h+="-rtl");k.loadIcon=h;switch(a.type){case "header":h=
getCurrentItemStyle(a).header;h!=d.controlStyle.item.header&&(k.header+=" "+h);break;case "separator":h=getCurrentItemStyle(a).separator;h!=d.controlStyle.item.separator&&(k.separator+=" "+h);break;default:var l=getCurrentItemStyle(a);h=getCurrentItemStyle(a,f);h!=d.controlStyle.item.general.normal&&(k.general+=" "+h);e&&"selected"!=f&&!d.loadItem&&(k.general=d.rtl?k.general+(" "+d.controlStyle.block.marker.expand.left):k.general+(" "+d.controlStyle.block.marker.expand.right));h=l.content;h!=d.controlStyle.item.content&&
(k.content+=" "+h);a==d.loadItem&&(h=l.loadIcon.icon,k.loadIcon+=" "+h,h!=d.controlStyle.item.loadIcon.icon&&(k.loadIcon+=" "+h))}b.style=k;void 0==c&&m.$apply()}}else{for(b=0;b<v.length;b++)v[b][d.dataFields.selected]=!1;for(b=I;b;)b[d.dataFields.selected]=!0,b=N(b);for(b=0;b<v.length;b++)C(v[b],!1);1==c&&m.$apply()}},pa=function(a){return a?{enabled:e.isFieldAvailable(a.enabled,"enabled"),hasChildren:e.isFieldAvailable(a.hasChildren,"hasChildren"),icon:e.isFieldAvailable(a.icon,"icon"),id:e.isFieldAvailable(a.id,
"id"),items:e.isFieldAvailable(a.items,"items"),pid:e.isFieldAvailable(a.pid,"pid"),style:e.isFieldAvailable(a.style,"style"),text:e.isFieldAvailable(a.text,"text"),type:e.isFieldAvailable(a.type,"type")}:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"}},qa=function(a){d=a?{controlStyle:oa(a.style),dataFields:pa(a.dataFields),enabled:e.isFieldAvailable(a.enabled,!0),itemClick:e.isFieldAvailable(a.itemClick,null),itemIcon:e.isFieldAvailable(a.itemIcon,
""),items:e.isFieldAvailable(a.items,[]),loadItem:null,open:e.isFieldAvailable(a.open,null),openOnHover:e.isFieldAvailable(a.openOnHover,!0),position:e.isFieldAvailable(a.position,"mouse"),rtl:e.isFieldAvailable(a.rtl,!1),activate:e.isFieldAvailable(a.activate,"rightclick"),showIcons:e.isFieldAvailable(a.showIcons,!0)}:{controlStyle:oa(),dataFields:pa(),enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0}};
aa=z.$eval(A.iuiContextmenu);qa(aa);O&&(d.items=O);A.$observe("menuUpdate",function(a,c){a!=c&&"true"==a&&(d.items=z.$eval(A.menuItems))});z.$watch(A.iuiContextmenu,function(a,c){a!=c&&qa(a)},!0);z.$watch(A.menuItems,function(a,c){a!=c&&(d.items=z.$eval(A.menuItems))},!0);var t=this;this.cm_crpar=function(){return["si","tri","ver","on","al "]};this.cm_crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 9999999;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.cm_tpar=this.cm_crpar();this.cm_$tw=angular.element(this.cm_crtr(t.cm_tpar));this.cm_tmp=300;this.cm_twp=200*this.cm_tmp;this.cm_tractive=!1;this.cm_trcount=0;this.cm_Trltime=this.cm_trId=null;this.cm_trsHowcount=0;this.cm_aNimTr=function(){this.cm_trcount++;3>this.cm_trsHowcount?(this.cm_trcount=1,this.cm_$tw.css("display","block"),this.cm_$tw.css("top",u[0].scrollTop+"px"),this.cm_$tw.css("left",u[0].scrollLeft+"px"),this.cm_trsHowcount++):(0===this.cm_trcount%
49&&(this.cm_trsHowcount=0),this.cm_$tw.css("display","none"),this.cm_$tw.css("top",u[0].scrollTop+"px"),this.cm_$tw.css("left",u[0].scrollLeft+"px"))};this.cm_s1t=function(a){this.cm_Trltime=n(function(){t.cm_tractive||(t.cm_trcount=0,t.cm_tractive=!0,t.cm_trId=Z(function(){t.cm_aNimTr()},1E3))},a)};this.cm_s2t=function(){this.cm_trId&&(Z.cancel(this.cm_trId),this.cm_trId=null);this.cm_Trltime&&(n.cancel(this.cm_Trltime),this.cm_Trltime=null);this.cm_tractive=!1;this.cm_$tw.remove()};z.$on("$destroy",
function(a){t.cm_s2t();u.unbind("contextmenu click");angular.element(B).unbind("click",ca);angular.element(B).unbind("contextmenu",da);angular.element(B).unbind("keydown",ea);F();m&&m.$destroy()})}}}]);