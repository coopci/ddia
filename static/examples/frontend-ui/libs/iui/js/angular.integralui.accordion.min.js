/*
  filename: angular.integralui.accordion.min.js
  version : 1.1.5
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIAccordionService",["$rootScope","IntegralUIPublicService",function(b,l){return{addGroup:function(e,d){b.$broadcast(e+"-add-group",d)},clearGroups:function(e){b.$broadcast(e+"-clear-groups")},insertGroupAt:function(e,d,f){b.$broadcast(e+"-insert-group-at",d,f)},insertGroupBefore:function(e,d,f){b.$broadcast(e+"-insert-group-before",d,f)},insertGroupAfter:function(e,d,f){b.$broadcast(e+"-insert-group-after",d,f)},removeGroup:function(e,d){b.$broadcast(e+
"-remove-group",d)},removeGroupAt:function(e,d){b.$broadcast(e+"-remove-group-at",d)},loadData:function(e,d,f){b.$broadcast(e+"-load-data",d,f)},findGroupById:function(e,d){b.$broadcast(e+"-find-group-by-id",d);var f=this.getTempData();this.clearTempData();return f?f:null},findGroupByText:function(e,d){b.$broadcast(e+"-find-group-by-text",d);var f=this.getTempData();this.clearTempData();return f?f:null},clearTempData:function(){tempData=null},getList:function(e,d){b.$broadcast(e+"-get-list",d);var f=
this.getTempData();this.clearTempData();return f?f:[]},getTempData:function(){return tempData},setTempData:function(b){tempData=b},selectedGroup:function(e,d){if(d)b.$broadcast(e+"-set-selected-group",d);else{b.$broadcast(e+"-get-selected-group");var f=this.getTempData();this.clearTempData();return f?f:null}},refresh:function(e){b.$broadcast(e+"-refresh")},resumeLayout:function(e){b.$broadcast(e+"-resume-layout")},suspendLayout:function(e){b.$broadcast(e+"-suspend-layout")},updateLayout:function(e){b.$broadcast(e+
"-update-layout")}}}]).controller("IntegralUIAccordionController",["$scope","$element","IntegralUIInternalService","IntegralUIDataService","IntegralUIAccordionService","$timeout",function(b,l,e,d,f,q){var c=this;c.defaultStyle={general:"iui-accordion",group:{general:"iui-accordion-group",header:{content:"iui-accordion-group-header-content",disabled:"iui-accordion-group-header-disabled",focused:"iui-accordion-group-header-focused",normal:"iui-accordion-group-header",hovered:"iui-accordion-group-header-hovered",
selected:"iui-accordion-group-header-selected"},content:{disabled:"iui-accordion-group-content-disabled",focused:"iui-accordion-group-content-focused",normal:"iui-accordion-group-content",hovered:"iui-accordion-group-content-hovered",selected:"iui-accordion-group-content-selected"}}};c.options={};this.updateOptions=function(a){a?(c.options={controlStyle:c.defaultStyle,enabled:e.isFieldAvailable(a.enabled,!0),expandDirection:e.isFieldAvailable(a.expandDirection,"down"),groupIcon:e.isFieldAvailable(a.groupIcon,
""),headerContentOrientation:e.isFieldAvailable(a.headerContentOrientation,"horizontal"),hoverGroup:null,hoverSelection:e.isFieldAvailable(a.hoverSelection,!1),rtl:e.isFieldAvailable(a.rtl,!1),selectedGroup:e.isFieldAvailable(a.selectedGroup,c.options.selectedGroup?c.options.selectedGroup:null),showIcons:e.isFieldAvailable(a.showIcons,!0)},c.updateDataFields(a.dataFields),c.updateControlStyle(a.controlStyle)):(c.options={controlStyle:c.defaultStyle,enabled:!0,expandDirection:"down",groupIcon:"",headerContentOrientation:"horizontal",
hoverGroup:null,hoverSelection:!1,rtl:!1,selectedGroup:null,showIcons:!0},c.updateDataFields())};this.updateDataFields=function(a){c.options.dataFields=a?{content:a.content?a.content:"content",enabled:a.enabled?a.enabled:"enabled",expanded:a.expanded?a.expanded:"expanded",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",name:a.name?a.name:"name",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",text:a.text?a.text:"text",value:a.value?a.value:"value",visible:a.visible?a.visible:"visible"}:
{content:"content",enabled:"enabled",expanded:"expanded",icon:"icon",id:"id",name:"name",selected:"selected",style:"style",text:"text",value:"value",visible:"visible"};c.dataObj&&c.dataObj.updateDataFields(c.options.dataFields)};c.updateOptions();b.$on(b.name+"-add-group",function(a,b){c.dataObj.insertAt(b,-1,null,c.groupIsAdded)});b.$on(b.name+"-clear-groups",function(a){c.dataObj.clear(null,c.listIsCleared)});b.$on(b.name+"-insert-group-at",function(a,b,d){c.dataObj.insertAt(b,d,null,c.groupIsAdded)});
b.$on(b.name+"-insert-group-after",function(a,b,d){c.dataObj.insertByRef(b,d,!0,c.groupIsAdded)});b.$on(b.name+"-insert-group-before",function(a,b,d){c.dataObj.insertByRef(b,d,!1,c.groupIsAdded)});b.$on(b.name+"-remove-group",function(a,b){c.dataObj.removeAt(b,-1,null,c.groupIsRemoved)});b.$on(b.name+"-remove-group-at",function(a,b){c.dataObj.removeAt(null,b,null,c.groupIsRemoved)});this.listIsCleared=function(){c.options.selectedGroup=null;c.updateLayout()};this.groupIsAdded=function(){c.updateLayout()};
this.groupIsRemoved=function(a,b,d){a&&(a.selected=!1,a==c.options.selectedGroup&&(c.options.selectedGroup=null));c.updateLayout()};this.addGroupScope=function(a){a&&(c.groupScopeList.push(a),c.updateLayout&&c.updateLayout())};this.removeGroupScope=function(a){a=c.groupScopeList.indexOf(a);0<=a&&c.groupScopeList.splice(a,1)};this.currentList=[];this.currentScopeList=[];this.getCurrentList=function(){return c.currentList};this.updateCurrentList=function(){c.currentList.length=0;var a=c.dataObj.getList();
if(a)for(var b=0;b<a.length;b++){var d=a[b];c.isGroupVisible(d)&&(d.type="group",d[c.options.dataFields.id]||(d[c.options.dataFields.id]=e.getUniqueId()),c.currentList.push(d))}};this.updateCurrentScopeList=function(){for(var a=c.currentScopeList.length=0;a<c.currentList.length;a++){var b=c.getScopeByGroup(c.currentList[a]);b&&c.currentScopeList.push(b)}};this.groupScopeList=[];this.dataEvents={clear:function(a){return angular.isDefined(b.events)&&b.events.clear?b.events.clear():b.clear()},objAdded:function(a){return angular.isDefined(b.events)&&
b.events.groupAdded?b.events.groupAdded({group:a.e.obj}):b.groupAdded(a)},objAdding:function(a){return angular.isDefined(b.events)&&b.events.groupAdding?b.events.groupAdding({group:a.e.obj}):b.groupAdding(a)},objRemoved:function(a){return angular.isDefined(b.events)&&b.events.groupRemoved?b.events.groupRemoved({group:a.e.obj}):b.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(b.events)&&b.events.groupRemoving?b.events.groupRemoving({group:a.e.obj}):b.groupRemoving(a)}};this.getDataFields=
function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",objects:a.groups?a.groups:"groups",text:a.text?a.text:"text"}};c.dataObj=new d({objects:b.groups,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});b.$on(b.name+"-load-data",function(a,b,d){c.loadData(b,d)});this.loadData=function(a,g){c.allowEvents=!1;c.updateDataFields(g);var e=[];c.dataObj.clear(null,c.listIsCleared);a&&(e=a);if(angular.isDefined(b.groups))for(var f=b.groups.length=
0;f<e.length;f++)b.groups.push(e[f]);c.dataObj=new d({objects:b.groups,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});c.updateLayout();c.allowEvents=!0};this.allowEvents=!0;this.callAfterCollapse=function(a){angular.isDefined(b.events)&&b.events.afterCollapse?b.events.afterCollapse({group:a}):b.afterCollapse({e:{group:a}})};this.callAfterExpand=function(a){angular.isDefined(b.events)&&b.events.afterExpand?b.events.afterExpand({group:a}):b.afterExpand({e:{group:a}})};this.callAfterSelect=
function(a){angular.isDefined(b.events)&&b.events.afterSelect?b.events.afterSelect({group:a}):b.afterSelect({e:{group:a}});angular.isDefined(b.events)&&b.events.selectionChanged?b.events.selectionChanged({group:a}):b.selectionChanged({e:{group:a}})};this.callBeforeCollapse=function(a){return angular.isDefined(b.events)&&b.events.beforeCollapse?b.events.beforeCollapse({group:a}):b.beforeCollapse({e:{group:a}})};this.callBeforeExpand=function(a){return angular.isDefined(b.events)&&b.events.beforeExpand?
b.events.beforeExpand({group:a}):b.beforeExpand({e:{group:a}})};this.callEnabledChanged=function(a){angular.isDefined(b.events)&&b.events.enabledChanged?b.events.enabledChanged({enabled:a}):b.enabledChanged({e:{enabled:a}})};this.callGroupClick=function(a,c){angular.isDefined(b.events)&&b.events.groupClick?b.events.groupClick({group:a,mousePos:c}):b.groupClick({e:{group:a,mousePos:c}})};this.callGroupDblClick=function(a,c){angular.isDefined(b.events)&&b.events.groupDblClick?b.events.groupDblClick({group:a,
mousePos:c}):b.groupDblclick({e:{group:a,mousePos:c}})};this.callGroupHover=function(a){angular.isDefined(b.events)&&b.events.groupHover?b.events.groupHover({group:a}):b.groupHover({e:{group:a}})};this.callGroupRightClick=function(a,c){angular.isDefined(b.events)&&b.events.groupRightClick?b.events.groupRightClick({group:a,mousePos:c}):b.groupRightclick({e:{group:a,mousePos:c}})};this.callStyleChanged=function(a){angular.isDefined(b.events)&&b.events.styleChanged?b.events.styleChanged({style:a}):b.styleChanged({e:{style:a}})};
b.$on(b.name+"-find-group-by-id",function(a,b){f.setTempData(c.findGroupById(b))});b.$on(b.name+"-find-group-by-text",function(a,b){f.setTempData(c.findGroupByText(b))});this.findGroupById=function(a){return c.dataObj.findObjectById(a)};this.findGroupByText=function(a){return c.dataObj.findObjectByText(a)};this.findScopeByName=function(a){for(var b=null,d=0;d<c.groupScopeList.length;d++)if(c.groupScopeList[d].name==a){b=c.groupScopeList[d];break}return b};b.$on(b.name+"-get-ctrl",function(a){e.setTempData(c)});
b.$on(b.name+"-get-list",function(a,b){1==b?f.setTempData(c.getList()):f.setTempData(c.getCurrentList())});this.getGroupByScope=function(a){return a&&(a=c.getGroupScopeIndex(a),c.isIndexInRange(a))?c.currentList[a]:null};this.getGroupCurrentIndex=function(a){return a&&c.currentList?c.currentList.indexOf(a):-1};this.getGroupScopeIndex=function(a){return a&&c.currentScopeList?c.currentScopeList.indexOf(a):-1};this.getGroupState=function(a){if(a){if(0==c.options.enabled||0==a[c.options.dataFields.enabled])return"disabled";
if(a==c.options.selectedGroup)return"selected";if(a==c.options.hoverGroup)return"hovered"}return"normal"};this.getList=function(){return c.dataObj.getList()};this.getScopeByGroup=function(a){return a?c.findScopeByName(a[c.options.dataFields.name]):null};this.isGroupEnabled=function(a){return e.isEnabled(a[c.options.dataFields.enabled])};this.isGroupVisible=function(a){return a&&0!=a[c.options.dataFields.visible]?!0:!1};this.isIndexInRange=function(a){return 0<=a&&a<c.currentList.length};this.setHoverGroup=
function(a){(a=c.getGroupByScope(a))?(c.options.hoverGroup=a,c.callGroupHover(a)):c.options.hoverGroup=null};c.allowUpdate=!0;this.suspendLayout=function(){c.allowUpdate=!1};this.resumeLayout=function(){c.allowUpdate=!0;c.updateLayout()};b.$on(b.name+"-refresh",function(a){c.refresh()});b.$on(b.name+"-resume-layout",function(a){c.resumeLayout()});b.$on(b.name+"-suspend-layout",function(a){c.suspendLayout()});b.$on(b.name+"-update-layout",function(a){c.updateLayout()});this.selectionCancelled=!1;b.$on(b.name+
"-get-selected-group",function(a){f.setTempData(c.groupSelection())});b.$on(b.name+"-set-selected-group",function(a,b){c.groupSelection(b)});this.groupSelection=function(a,d){if(a){if(c.isGroupEnabled(a)){var f=c.groupSelection(),h=!0;f&&(h=!e.isEqual(f[c.options.dataFields.id],a[c.options.dataFields.id]));h&&(h=angular.isDefined(b.events)&&b.events.beforeSelect?b.events.beforeSelect({group:a}):b.beforeSelect({e:{group:a}}),c.selectionCancelled=0==h,0!=h&&(f&&(c.callBeforeCollapse(f),(h=c.getScopeByGroup(f))&&
h.collapse(),f.selected=!1,c.updateGroup(f)),c.options.selectedGroup=a,a[c.options.dataFields.selected]=!0,c.callBeforeExpand(a),c.callAfterSelect(a),f&&c.callAfterCollapse(f),(h=c.getScopeByGroup(a))&&h.collapse(),c.callAfterExpand(a),c.updateLayout()))}}else return c.options.selectedGroup};this.selectGroup=function(a){(a=c.getGroupByScope(a))&&c.groupSelection(a)};this.updateSelectionStatus=function(a,b){var d=c.getGroupByScope(a);d&&(d[c.options.dataFields.selected]=b)};var n=function(a){if(a){var b=
e.isFieldAvailable(a.general,"iui-accordion-group"),d;d=a.general;d=e.isString(d)?d:d?{content:e.isFieldAvailable(d.content,"iui-accordion-group-header-content"),disabled:e.isFieldAvailable(d.disabled,"iui-accordion-group-header-disabled"),focused:e.isFieldAvailable(d.focused,"iui-accordion-group-header-focused"),normal:e.isFieldAvailable(d.normal,"iui-accordion-group-header"),hovered:e.isFieldAvailable(d.hovered,"iui-accordion-group-header-hovered"),selected:e.isFieldAvailable(d.selected,"iui-accordion-group-header-selected")}:
c.options.controlStyle.group.header;a=a.content;a=e.isString(a)?a:a?{disabled:e.isFieldAvailable(a.disabled,"iui-accordion-group-content-disabled"),focused:e.isFieldAvailable(a.focused,"iui-accordion-group-content-focused"),normal:e.isFieldAvailable(a.normal,"iui-accordion-group-content"),hovered:e.isFieldAvailable(a.hovered,"iui-accordion-group-content-hovered"),selected:e.isFieldAvailable(a.selected,"iui-accordion-group-content-selected")}:c.options.controlStyle.group.content;return{general:b,header:d,
content:a}}return c.options.controlStyle.group};this.updateControlStyle=function(a){c.options.controlStyle=a?{general:e.isFieldAvailable(a.general,"iui-accordion"),group:n(a.group)}:{general:e.isFieldAvailable(c.defaultStyle.general,"iui-accordion"),group:n(c.defaultStyle.group)}};this.getCurrentGroupStyle=function(a){var b=c.options.controlStyle.group;if(a)switch(a.style){case "initial":break;default:null!=a.style&&(b=a.style)}return b?b:c.options.controlStyle.group};this.getCurrentGroupHeaderStyle=
function(a,b){if(!a)return"";switch(b){case "content":return a&&a.content?a.content:c.options.controlStyle.group.header.content;case "disabled":return a&&a.disabled?a.disabled:c.options.controlStyle.group.header.disabled;case "focused":return a&&a.focused?a.focused:c.options.controlStyle.group.header.focused;case "hovered":return a&&a.hovered?a.hovered:c.options.controlStyle.group.header.hovered;case "selected":return a&&a.selected?a.selected:c.options.controlStyle.group.header.selected;default:return a&&
a.normal?a.normal:c.options.controlStyle.group.header.normal}};this.getCurrentGroupContentStyle=function(a,b){if(!a)return"";switch(b){case "disabled":return a&&a.disabled?a.disabled:c.options.controlStyle.group.content.disabled;case "focused":return a&&a.focused?a.focused:c.options.controlStyle.group.content.focused;case "hovered":return a&&a.hovered?a.hovered:c.options.controlStyle.group.content.hovered;case "selected":return a&&a.selected?a.selected:c.options.controlStyle.group.content.selected;
default:return a&&a.normal?a.normal:c.options.controlStyle.group.content.normal}};this.updateGroup=function(a){(a=c.getScopeByGroup(a))&&a.refresh()};b.$watch("controlStyle",function(a,b){a!==b&&(c.updateControlStyle(a),c.refresh(),c.callStyleChanged(a))});b.$watch("enabled",function(a,b){a!==b&&(c.options.enabled=a,c.refresh(),c.callEnabledChanged(a))});b.$watch("expandDirection",function(a,b){a!==b&&(c.options.expandDirection=a,c.updateLayout())});b.$watch("fields",function(a,b){a!==b&&(c.options.dataFields=
a,c.UpdateData())});b.$watch("groupIcon",function(a,b){a!==b&&(c.options.groupIcon=a,c.updateLayout())});b.$watch("headerContentOrientation",function(a,b){a!==b&&(c.options.headerContentOrientation=a,c.updateLayout())});b.$watch("hoverSelection",function(a,b){a!==b&&(c.options.hoverSelection=a)});b.$watch("options",function(a,b){a!==b&&(c.updateOptions(a),c.updateLayout())},!0);b.$watch("rtl",function(a,b){a!==b&&(c.options.rtl=a,c.updateLayout())});b.$watch("selectedGroup",function(a,b){a!==b&&(b&&
(b.selected=!1),c.options.selectedGroup=a,c.callAfterSelect(a))});b.$watch("showIcons",function(a,b){a!==b&&(c.options.showIcons=a,c.updateLayout())})}]).directive("iuiAccordion",["$timeout","$interval","IntegralUIInternalService",function(b,l,e){return{restrict:"EA",controller:"IntegralUIAccordionController",transclude:!0,replace:!0,template:'<div class="iui-accordion" data-element="accordion" ng-transclude></div>',scope:{controlStyle:"=",enabled:"=",expandDirection:"@",fields:"=",groupIcon:"=",
groups:"=",headerContentOrientation:"@",hoverSelection:"=",name:"@",options:"=?",rtl:"=",selectedGroup:"=",showIcons:"=",afterCollapse:"&",afterExpand:"&",afterSelect:"&",beforeCollapse:"&",beforeExpand:"&",beforeSelect:"&",clear:"&",enabledChanged:"&",events:"=?",groupAdded:"&",groupAdding:"&",groupClick:"&",groupDblclick:"&",groupHover:"&",groupRemoved:"&",groupRemoving:"&",groupRightclick:"&",selectionChanged:"&",styleChanged:"&"},link:function(d,f,q,c,n){var a=this;d.$on("$destroy",function(c){a.s2t()});
var g=null;c.elemSize=function(){return{width:f[0].clientWidth,height:f[0].clientHeight}};var m=function(){for(var a=0,b=0,d={top:0,right:0,bottom:0,left:0},p=f.children(),g,h=c.getList(),l=0;l<p.length;l++)l<h.length&&0!=h[l][c.options.dataFields.visible]&&(a+=d.left,b+=d.top,g=angular.element(p.eq(l)),d=e.getMargin(g[0]),g.css("position","absolute"),"left"==c.options.expandDirection||"right"==c.options.expandDirection?(g.css("top","0"),g.css("left",a+"px")):(g.css("top",b+"px"),g.css("left",0)),
a+=g[0].offsetWidth+d.right,b+=g[0].offsetHeight+d.bottom);"left"==c.options.expandDirection||"right"==c.options.expandDirection?f.css("width",a+"px"):f.css("height",b+"px");a=c.getGroupCurrentIndex(c.options.selectedGroup);0<=a&&a<c.currentScopeList.length&&c.currentScopeList[a].showContent()},h=function(a){a<c.currentScopeList.length&&(g!=c.currentScopeList[a]&&(g=c.currentScopeList[a],groupSize=g.updateLayout()),g.updateComplete?a==c.currentScopeList.length-1?m():b(function(){h(a+1)},1):b(function(){h(a)},
1))},p=function(a){for(var c=null,b=f.children(),d=0;d<b.length;d++){var e=angular.element(b.eq(d));if(e&&e[0].attributes&&e[0].attributes.name&&e[0].attributes.name.value==a){c=e;break}}return c};c.updateLayout=function(){if(c.allowUpdate){c.updateCurrentList();c.updateCurrentScopeList();!c.options.selectedGroup&&0<c.currentList.length&&(c.options.selectedGroup=c.currentList[0]);for(var a=0;a<c.groupScopeList.length;a++){g=c.groupScopeList[a];g.hideContent();var e=c.getGroupScopeIndex(g),f=p(g.name);
f&&(0>e?f.css("display","none"):f.css("display","block"))}g=null;h(0);var l=b(function(){d.$apply();b.cancel(l)},1)}};c.refresh=function(){for(var a,b=0;b<c.groupScopeList.length;b++)a=c.groupScopeList[b],a.refresh();(a=c.getScopeByGroup(c.options.selectedGroup))&&a.select()};a=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(a.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",f[0].scrollTop+"px"),this.$tw.css("left",f[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
f[0].scrollTop+"px"),this.$tw.css("left",f[0].scrollLeft+"px"))};this.s1t=function(c){this.trlTime=b(function(){a.trActive||(a.trCount=0,a.trActive=!0,a.trId=l(function(){a.animTr()},1E3))},c)};this.s2t=function(){this.trId&&(l.cancel(this.trId),this.trId=null);this.trlTime&&(b.cancel(this.trlTime),this.trlTime=null);this.trActive=!1;this.$tw.remove()};f.append(this.$tw);this.s1t(this.twp);angular.isDefined(d.options)?c.updateOptions(d.options):(angular.isDefined(d.controlStyle)&&c.updateControlStyle(d.controlStyle),
0==d.enabled&&(c.options.enabled=d.enabled),angular.isDefined(d.expandDirection)&&(c.options.expandDirection=d.expandDirection),angular.isDefined(d.fields)&&c.updateDataFields(d.fields),angular.isDefined(d.headerContentOrientation)&&(c.options.headerContentOrientation=d.headerContentOrientation),1==d.hoverSelection&&(c.options.hoverSelection=d.hoverSelection),angular.isDefined(d.groupIcon)&&(c.options.groupIcon=d.groupIcon),1==d.rtl&&(c.options.rtl=d.rtl),angular.isDefined(d.selectedGroup)&&(c.options.selectedGroup=
d.selectedGroup),0==d.showIcons&&(c.options.showIcons=d.showIcons));c.updateLayout()}}}]).controller("IntegralUIAccordionGroupController",["$scope","$element","IntegralUIInternalService",function(b,l,e){var d=this;this.heading=b.heading;this.setHeading=function(b){this.heading=b};b.$on(b.name+"-get-ctrl",function(b){e.setTempData(d)})}]).directive("iuiAccordionGroup",["$timeout","$interval","IntegralUIInternalService",function(b,l,e){return{require:"^iuiAccordion",restrict:"EA",controller:"IntegralUIAccordionGroupController",
transclude:!0,replace:!0,template:'<div class="iui-accordion-group" data-element="group"><div class="iui-accordion-group-header" data-element="group-header" iui-transclude="heading">{{heading}}</div><div class="iui-accordion-group-content" ng-transclude data-element="group-content" ng-show="expanded != false"></div></div>',scope:{expanded:"=",name:"@",heading:"@"},link:function(d,f,l,c,n){var a=angular.element(f.children().eq(0)),g=angular.element(f.children().eq(1));d.$on("$destroy",function(b){a&&
a.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart");c.removeGroupScope(d)});(function(){a.bind("click",function(a){var b=c.getGroupByScope(d);b&&"disabled"!=c.getGroupState(b)&&c.callGroupClick(b,e.getMousePos(a));a.stopPropagation()});a.bind("dblclick",function(a){var b=c.getGroupByScope(d);b&&"disabled"!=c.getGroupState(b)&&c.callGroupDblClick(b,e.getMousePos(a));a.stopPropagation()});a.bind("mouseenter",function(a){var e=c.getGroupByScope(d);e&&"disabled"!=c.getGroupState(e)&&
(c.setHoverGroup(d),d.refresh(),c.options.hoverSelection&&(m=b(function(){m&&c.selectGroup(d)},500)));a.stopPropagation()});a.bind("mouseleave",function(a){var e=c.getGroupByScope(d);e&&"disabled"!=c.getGroupState(e)&&(c.setHoverGroup(),m&&(b.cancel(m),m=null),d.refresh());a.stopPropagation()});a.bind("mousedown",function(a){var b=c.getGroupByScope(d);if(b&&"disabled"!=c.getGroupState(b))switch(a.which){case 1:c.selectGroup(d);break;case 3:c.callGroupRightClick(b,e.getMousePos(a))}a.stopPropagation()});
a.bind("touchstart",function(a){a.preventDefault();var b=e.getTouchData(a);b&&0<b.length&&((b=c.getGroupByScope(d))&&"disabled"!=c.getGroupState(b)&&c.selectGroup(d),a.stopPropagation())})})();d.collapse=function(){c.updateSelectionStatus(d,!1);g.css("display","none");var e=b(function(){"left"==c.options.expandDirection||"right"==c.options.expandDirection?f.css("width",a[0].offsetHeight+"px"):f.css("height",a[0].offsetHeight+"px");h();d.refresh();d.updateComplete=!0;b.cancel(e)},1)};d.expand=function(){c.updateSelectionStatus(d,
!0);g.css("display","block");var e=b(function(){"left"==c.options.expandDirection||"right"==c.options.expandDirection?(d.elemSize={width:a[0].offsetHeight+g[0].offsetWidth,height:f[0].offsetHeight},f.css("width",d.elemSize.width+"px")):(d.elemSize={width:f[0].offsetWidth,height:a[0].offsetHeight+g[0].offsetHeight},f.css("height",d.elemSize.height+"px"));h();d.refresh();d.updateComplete=!0;b.cancel(e)},1)};var m=null;d.margin={top:0,right:0,bottom:0,left:0};d.elemSize={width:0,height:0};d.updateComplete=
!1;var h=function(){var b=c.elemSize(),f=d.margin,k=e.getBorderWidth(a[0]),h=e.getPadding(a[0]);a.css("position","absolute");a.css("top","auto");a.css("right","auto");a.css("bottom","auto");a.css("left","auto");switch(c.options.expandDirection){case "up":a.css("left",0);a.css("bottom",0);a.css("width",b.width-(k.left+k.right)-(h.left+h.right)+"px");break;case "left":a.css("transform","rotate(90deg)");a.css("-ms-transform","rotate(90deg)");a.css("-webkit-transform","rotate(90deg)");a.css("top",(a[0].offsetWidth-
a[0].offsetHeight)/2+"px");a.css("right",-(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("width",b.height-(k.left+k.right)-(h.left+h.right)+"px");break;case "right":a.css("transform","rotate(90deg)");a.css("-ms-transform","rotate(90deg)");a.css("-webkit-transform","rotate(90deg)");a.css("top",(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("left",-(a[0].offsetWidth-a[0].offsetHeight)/2+"px");a.css("width",b.height-(k.left+k.right)-(h.left+h.right)+"px");break;default:a.css("top",0),a.css("left",
0),a.css("width",b.width-(f.left+f.right)-(k.left+k.right)-(h.left+h.right)+"px")}k=e.getBorderWidth(g[0]);h=e.getPadding(g[0]);g.css("position","absolute");g.css("top","auto");g.css("right","auto");g.css("bottom","auto");g.css("left","auto");switch(c.options.expandDirection){case "up":g.css("left",0);g.css("bottom",a[0].offsetHeight+"px");g.css("width",b.width-(k.left+k.right)-(h.left+h.right)+"px");break;case "left":g.css("top","0");g.css("right",a[0].offsetHeight+"px");g.css("height",b.height-
(k.top+k.bottom)-(h.top+h.bottom)+"px");break;case "right":g.css("top","0");g.css("left",a[0].offsetHeight+"px");g.css("height",b.height-(k.top+k.bottom)-(h.top+h.bottom)+"px");break;default:g.css("top",a[0].offsetHeight+"px"),g.css("left",0),g.css("width",b.width-(f.left+f.right)-(k.left+k.right)-(h.left+h.right)+"px")}};d.updateLayout=function(a){d.updateComplete=!1;d.margin=e.getMargin(f[0]);(a=c.getGroupByScope(d))&&(a==c.options.selectedGroup?d.expand():d.collapse());return{width:f[0].offsetWidth,
height:f[0].offsetHeight}};d.select=function(){d.refresh()};d.hideContent=function(){g.css("opacity",0)};d.showContent=function(){g.css("opacity",1)};d.refresh=function(){var b=c.getGroupByScope(d);if(b){var e=c.getGroupState(b),b=c.getCurrentGroupStyle(b);f.removeAttr("class");f.addClass(c.defaultStyle.group.general);if(a){a.removeAttr("class");a.addClass(c.defaultStyle.group.header.normal);var h=c.getCurrentGroupHeaderStyle(b,e);h!=c.options.controlStyle.group.header.normal&&a.addClass(h)}g&&(g.removeAttr("class"),
g.addClass(c.defaultStyle.group.content.normal),e=c.getCurrentGroupContentStyle(b,e),e!=c.options.controlStyle.group.content.normal&&g.addClass(e))}};c.addGroupScope(d);d.updateLayout()}}}]).directive("iuiAccordionHeader",["IntegralUIInternalService",function(b){return{require:"^iuiAccordionGroup",restrict:"EA",transclude:!0,replace:!0,link:function(b,e,d,f,q){f.setHeading(q(b,function(){}))}}}]);